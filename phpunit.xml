<phpunit
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://schema.phpunit.de/4.6/phpunit.xsd"
  bootstrap="sys/flexyadmin/tests/bootstrap.php"
	colors="true"
	convertNoticesToExceptions="false"
	convertWarningsToExceptions="false"
	stopOnError="false"
	stopOnFailure="false"
	stopOnIncomplete="false"
	stopOnSkipped="false">
  
	<testsuites>
    
    <!-- Real Unit tests, fast and no need for demo database -->
    <testsuite name="fast">
      <directory suffix="Test.php">sys/flexyadmin/tests/fast</directory>
		</testsuite>

    <!-- Test this before committing: the fast unit tests, and testing the code for debug actions -->
    <testsuite name="commit">
      <directory suffix="Test.php">sys/flexyadmin/tests/fast</directory>
      <directory suffix="Test.php">sys/flexyadmin/tests/commit</directory>
      <file>site/tests/frontend/DebugTest.php</file>
		</testsuite>

    <!-- Just test the frontend -->
		<testsuite name="frontend">
      <directory suffix="Test.php">site/tests</directory>
		</testsuite>

    <!--Heavy testing: auth, api, which assumes the demo database is present -->
    <testsuite name="demo_db">
      <directory suffix="Test.php">sys/flexyadmin/tests/demo_db</directory>
		</testsuite>
    
	</testsuites>
  
  <listeners>
    <listener class="JohnKary\PHPUnit\Listener\SpeedTrapListener" file='vendor/johnkary/phpunit-speedtrap/src/JohnKary/PHPUnit/Listener/SpeedTrapListener.php'/>
    <arguments>
      <array>
        <element key="slowThreshold">
          <integer>200</integer>
        </element>
        <element key="reportLength">
          <integer>7</integer>
        </element>
      </array>
    </arguments>
  </listeners>
  
	<php>
		<const name="PHPUNIT_TEST" value="1" />
		<server name="REMOTE_ADDR" value="127.0.0.1" />
	</php>

	<filter>
		<blacklist>
      <directory suffix=".php">sys/codeigniter</directory>
      <directory suffix=".php">sys/flexyadmin/libraries</directory>
		</blacklist>
	</filter>

</phpunit>
