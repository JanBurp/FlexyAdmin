(function(a){a.fn.filterable=function(b,d){var c=a.extend({},a.fn.filterable.defaults,b);return this.each(function(){var g=a(this);var h=a('<div class="'+c.queryCss+'">');switch(c.queryPosition){case"before":h.insertBefore(g);break;case"after":h.insertAfter(g);break}var e=a('<input type="text" />').appendTo(h);if(c.queryLabel){h.prepend("<label>"+c.queryLabel+"</label>")}var f=function(j){a("input.filter").addClass("busy");var k=e.val().toLowerCase();var i=k.length;if(i>2||i==0){g.find(c.affects).each(function(){var l=a(this);if(l.text().toLowerCase().indexOf(k)>=0){l.show()}else{l.hide()}});if(d!=undefined&&d!=""){d.call(this,j.keyCode)}}a("input.filter").removeClass("busy")};if(c.queryButton){a('<input type="button" value="'+c.queryButton+'" />').appendTo(h).click(f)}else{e.keyup(f)}})};a.fn.filterable.defaults={affects:"> *",queryLabel:"",queryButton:"",queryPosition:"before",queryCss:"ui-filterable-query",callback:""}})(jQuery);