<div>
<p>Als je site meer gegevens nodig heeft of een andere structuur van de gegevens, dan zul je de database moeten aanpassen.</p>
<h2>Extra velden&nbsp;</h2>
<p>De eenvoudigste aanpassingen is het toevoegen van extra velden toevoegen aan bestaande tabellen. Bijvoorbeeld een extra tekstveld voor een subtitel in&nbsp;<em>tbl_menu.</em>&nbsp;In dit geval zul je dan in je database tool (bv PhpMyAdmin) bij&nbsp;<em>tbl_menu</em>&nbsp;een extra veld met (bijvoorbeeld) de naam&nbsp;<em>str_subtitle</em>&nbsp;toevoegen.</p>
<p>Je hebt natuurlijk niets aan een extra veld als de site er verder niets mee doet. In dit voorbeeld kun je bijvoorbeeld de view&nbsp;<em>page.php</em>&nbsp;aanpassen door een&nbsp;<span class="code">h2</span>&nbsp;tag toe te voegen na de&nbsp;<span class="code">h1</span>&nbsp;tag:</p>
<p><code><span style="color: #000000">
<span style="color: #007700">&lt;</span><span style="color: #0000BB">h1</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">&lt;?</span><span style="color: #007700">=</span><span style="color: #0000BB">ascii_to_entities</span><span style="color: #007700">(</span><span style="color: #0000BB">$str_title</span><span style="color: #007700">);</span><span style="color: #0000BB">?&gt;</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">h1</span><span style="color: #007700">&gt;<br />
&lt;</span><span style="color: #0000BB">h2&nbsp;</span><span style="color: #007700">class=</span><span style="color: #DD0000">"subtitle"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">&lt;?</span><span style="color: #007700">=</span><span style="color: #0000BB">ascii_to_entities</span><span style="color: #007700">(</span><span style="color: #0000BB">$str_subtitle</span><span style="color: #007700">);</span><span style="color: #0000BB">?&gt;</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">h2</span><span style="color: #007700">&gt;<br />
&lt;</span><span style="color: #0000BB">div&nbsp;</span><span style="color: #007700">class=</span><span style="color: #DD0000">"text"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">&lt;?</span><span style="color: #007700">=</span><span style="color: #0000BB">$txt_text?&gt;</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">div</span><span style="color: #007700">&gt;&nbsp;</span>
</span>
</code></p>
<p>Bij '<a href="handleiding_voor_webbouwers/database/velden_en_hun_prefixen">Velden en hun Prefixen</a>' lees je meer over de diverse velden die FlexyAdmin herkent.</p>
<h2>Extra tabellen</h2>
<p>Als je meer extra's wilt, bijvoorbeeld een lijst met Frequently Asked Questions op je site, dan zul je een extra tabel moeten maken. In dit geval bijvoorbeeld&nbsp;<em>tbl_faq.&nbsp;</em>FlexyAdmin gaat ervanuit dat elke tabel een&nbsp;<em>primary key</em>&nbsp;heeft met de naam&nbsp;<em>id.</em></p>
<p>Lees bij '<a href="handleiding_voor_webbouwers/database">Database</a>' hoe je je tabellen en velden kunt noemen in FlexyAdmin.</p>
<p>&nbsp;</p>
<h2>Database aanpassen met FlexyAdmin</h2>
<p>FlexyAdmin heeft beperkte mogelijkheden om de database aan te passen. Je zult in de meeste gevallen gebruik moeten maken van standaard database tools zoals PhpMyAdmin. Bij de meeste hostingpakketten is dit inbegrepen, en ook bij de meeste lokale servers op je eigen computer.</p>
<p>Wat FlexyAdmin wel kan is:</p>
<ul>
<li>SQL queries verwerken</li>
<li>Database bestanden (sql) importeren en exporteren</li>
<li>FlexyAdmin heeft diverse plugins voor oa het maken (en vullen) van relatietabellen, indexeren van tabellen etc.</li>
</ul>
<h3>Database importeren</h3>
<p>Als je als superadmin bent ingelogd heb je de optie om de database te importeren of exporteren.</p>
<p>Bij het importeren heb je drie opties:</p>
<ol>
<li>Een (sql) bestand selecteren en uploaden</li>
<li>Een SQL statement met de hand invoeren (hiermee kun je dus in principe zelf de database aanpassen).</li>
<li>Een database update uitvoeren aan de hand van het revisie nummer van FlexyAdmin (dit kan alleen als de map&nbsp;<em>db&nbsp;</em>nog bestaat en de update sql bestanden bevat.)</li>
</ol>
<div>&nbsp;
<div>Nadat een optie is gekozen komt FlexyAdmin terug met de gekozen SQL statements en de vraag of je het echt wilt.
<div>FlexyAdmin zal altijd controleren of je wel rechten hebt om de database aan te passen. Destructieve SQL statements zullen niet uitgevoerd worden als je geen super-admin rechten hebt.
<h3>Database exporteren</h3>
<p>Het exporteren bestaat uit het selecteren van tabellen die als geheel (met data) moeten worden ge&euml;xporteerd en tabellen waarvan alleen de structuur (zonder data) moet worden ge&euml;xporteerd. Standaard staat het ingesteld zodat de hele database met data wordt ge&euml;xporteerd behalve van de log en statistiek tabellen, daarvan wordt alleen de structuur meegenomen.</p>
<p>Je kunt de naam van het bestand wat wordt gecreerd nog aanpassen.</p>
<h2>Database manipulatie plugins</h2>
<p>Hieronder staan enkele standaard plugins uitgelegd die kunnen helpen met het aanpassen van de database.</p>
<h3>add_relation_table</h3>
<p>Deze plugin maakt een relatie tabel (zie&nbsp;<a href="handleiding_voor_webbouwers/database/relaties_met_ander_tabellen">relatie tabellen</a>) tussen de twee meegegeven tabellen. Stel je wilt een relatie tabel tussen&nbsp;<em>tbl_menu</em>&nbsp;en&nbsp;<em>tbl_links</em>&nbsp;dan type je de volgende url in en de plugin doet z'n werk:</p>
<p><code><span style="color: #000000">
<span style="color: #007700">.../</span><span style="color: #0000BB">admin</span><span style="color: #007700">/</span><span style="color: #0000BB">plugin</span><span style="color: #007700">/</span><span style="color: #0000BB">add_relation_table</span><span style="color: #007700">/</span><span style="color: #0000BB">tbl_menu</span><span style="color: #007700">/</span><span style="color: #0000BB">tbl_links&nbsp;</span>
</span>
</code></p>
<h3>create_indexes&nbsp;</h3>
<p>Deze plugin zal alle tabellen waar het zinvol is voorzien van indexen op zinvollen velden. De velden waar indexen van worden gemaakt zijn:&nbsp;<em>id_...</em>,&nbsp;<em>self_parent</em>,&nbsp;<em>uri</em>&nbsp;en&nbsp;<em>order&nbsp;</em>in alle tabellen waar deze velden worden gevonden.<br />
In de tabel&nbsp;<em>res_menu_result</em>&nbsp;(zie Samengesteld menu's ####) zullen ook de volgende velden worden voorzien van een index:&nbsp;<em>int_id</em>,&nbsp;<em>str_uri&nbsp;</em>en&nbsp;<em>str_table</em>.</p>
<h3>fill_many_with_foreign</h3>
<p>Deze plugin komt van pas als je een tabel hebt die met een&nbsp;<em>foreign key</em>&nbsp;verwijst naar een andere tabel en je wilt de&nbsp;<em>foreign key</em>&nbsp;verwijzing vervangen door een relatie tabel om zo meerdere keuzes mogelijk te maken.</p>
<p>Stel bijvoorbeeld dat in&nbsp;<em>tbl_menu</em>&nbsp;het veld&nbsp;<em>id_links&nbsp;</em>bestaat:</p>
<ul>
<li>Maak (met de plugin&nbsp;<strong>add_relation_table</strong>) een relatie tabel aan:&nbsp;<em>rel_menu__links.</em></li>
<li>Roep dan de plugin&nbsp;<strong>fill_many_with_foreign</strong>&nbsp;aan&nbsp;en de tabel&nbsp;<em>rel_menu_links&nbsp;</em>wordt dan automatisch gevuld met verwijzingen die overeenkomen met de al bestaande foreign key verwijzingen van&nbsp;<em>id_links.</em></li>
<li>Nu kun je zonder problemen het veld&nbsp;<em>id_links</em>&nbsp;van&nbsp;<em>tbl_menu</em>&nbsp;verwijderen.</li>
</ul>

