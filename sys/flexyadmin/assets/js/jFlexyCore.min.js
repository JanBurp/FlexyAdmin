$(document).ready(function(){keyEnter=13;keyUp=38;keyDown=40;keyBackspace=8;keyDelete=48;dialog=$("#ui");Popup=$("#popup");isForm=$("#content").hasClass("form");isGrid=($("#content").hasClass("grid")&&!$(".grid").hasClass("res_menu_result"));isGridAction=$(".grid").hasClass("actionGrid");isFile=$("#content").hasClass("filemanager");if(!isGrid&&isFile){isGrid=$("#content").hasClass("list")}if(isFile){isThumbs=$("#content").hasClass("icons")}isSortable=false;if(isGrid||isFile){doGrid()}$("#messages").delay(5000).fadeOut(2000);$("#errors").each(function(){var a=$("#errors").html();info_dialog(a)}).hide();(function(a){a.fn.formTabs=function(b){return this.each(function(){var e=a(this).find("fieldset:not(.formbuttons):not(.flexyFormButtons)");var d="<ul>";e.each(function(){var h=a(this).find("legend").html();var g="tab_"+a(this).attr("id");d+='<li><a href="#'+g+'">'+h+"</a></li>";a(this).find("legend").remove();a(this).replaceWith('<div id="'+g+'">'+a(this).html()+"</div>")});d+="</ul>";var f=a(this).find(".formbuttons").add(".flexyFormButtons");a(this).prepend(f);a(this).prepend(d)})}})(jQuery);$("#content form").formTabs().tabs();if(isForm){doForm()}$(".verticalText").each(function(){w=$(this).width();if(w<30){$(this).flipv().addClass("verticalShow")}});showAutoZoom();showHelpItems();$(".after_form").each(function(){var a=$("fieldset.formfields").height();var b=$("#menu").height();$(this).css({top:-(-a+b-30)})})});function confirm_dialog(b,a,d){showName="";if(a.length>1){showName+=langp("dialog_delete_more",a.length)}else{for(x in a){showName+=" + '"+a[x]+"'"}showName=showName.substr(3)}dialog.html(langp("dialog_delete_sure",showName));$(dialog).dialog({title:lang("dialog_title_confirm"),modal:true,width:500,buttons:({cancel:function(){$(dialog).dialog("destroy")},yes:function(){$(".ui-dialog .ui-dialog-buttonpane").add(".ui-dialog a").hide();$(".ui-dialog .ui-dialog-content").append("<img src='"+site_url("sys/flexyadmin/assets/icons/wait.gif")+"' align='right' />");var e="";for(x in d){e+=":"+d[x]}e=e.substr(1);$(".ui-dialog .ui-dialog-content").append('<form method="POST" id="confirmform" action="'+b+'"><input type="hidden" name="items" value="'+e+'" /><input name="confirm" value="confirmed" type="hidden" /></form>');$("#confirmform").submit()}}),close:function(){$(dialog).dialog("destroy")}});changeButt("cancel",lang("dialog_cancel"));changeButt("yes",lang("dialog_yes"))}function info_dialog(a){dialog.html(a);$(dialog).dialog({title:lang("dialog_title_warning"),modal:true,minWidth:500,buttons:({ok:function(){$(dialog).dialog("destroy")}}),close:function(){$(dialog).dialog("destroy")}});changeButt("ok",lang("dialog_ok"))}function clean_message(){$("#message").html("")}function showHelpItems(){var a;var b;$("span.help").children().removeAttr("title");$("span.help").mouseenter(function(){var d=$(this);var e=get_subclass("help_",d);if(e!=""){a=setTimeout(function(){var g=$("#help_messages span#help_"+e).html();var f=g;$(Popup).html(f).fadeIn(150);b=setTimeout(function(){$(Popup).fadeOut(1000)},5000)},1000)}}).mouseout(function(){clearTimeout(a);$(Popup).fadeOut(150)}).mousemove(function(d){clearTimeout(b);$(Popup).css({left:d.pageX+8,top:d.pageY+18})})}function showAutoZoom(){var a;var b;$("img.zoom").add(".flash .zoom").not(".thumbs img.zoom").not(".thumbs .flash .zoom").mouseenter(function(){obj=$(this);a=setTimeout(function(){zoomThumb=$(obj).clone().addClass("autoZoom");$("body").append(zoomThumb);widthThumb=$(".autoZoom").width();if(widthThumb<100){widthThumb=100}if(widthThumb>250){widthThumb=250}heightThumb=$(".autoZoom").height();if(heightThumb<100){heightThumb=100}$(".autoZoom").remove();imgName=$(zoomThumb).attr("alt");imgName=imgName.substr(imgName.lastIndexOf("/")+1);offsetThumb=$(obj).offset();leftThumb=offsetThumb.left-(widthThumb/2)+13+"px";$("body").append('<div class="zoomThumb"><p>'+imgName+"</p></div>");if($(obj).parent("li").parent("ul.values").length>0){topThumb=offsetThumb.top-(heightThumb+34)+"px";$("div.zoomThumb").append(zoomThumb)}else{topThumb=offsetThumb.top+30+"px";$("div.zoomThumb").prepend(zoomThumb)}$(".zoomThumb").css({left:leftThumb,top:topThumb}).fadeIn(150).mouseleave(function(){$(".zoomThumb").fadeOut(150,function(){$(this).remove()})})},200)}).mouseleave(function(){clearTimeout(a);$(".zoomThumb").fadeOut(150,function(){$(this).remove()})});$("img.zoom").add(".flash .zoom").not("form ul li img.zoom").not("form ul li .flash .zoom").fullsize({triggerIcon:false,forceTitleBar:true});$("form ul li img.zoom").add("form ul li .flash .zoom").fullsize({triggerIcon:false,triggerEvent:"dblclick",forceTitleBar:true})}function close_dialog(){$(dialog).dialog("destroy")}function ajaxError(a){dialog.html(a);$(dialog).dialog({title:"Error",modal:true,width:500,buttons:({ok:function(){$(dialog).dialog("destroy");$(obj).attr({href:href})}}),close:function(){$(dialog).dialog("destroy");$(obj).attr({href:href})}})}function changeButt(d,b){var a;$("div.ui-dialog-buttonset button").each(function(){a=$(this).html();$(this).html(a=a.replace(d,b))})}function lang(a){return $("div#ui_messages span#"+a).html()}function langp(a,d){var b;b=lang(a);return b.replace(/%s/g,d)}function get_cell(b){var a;c=b.attr("class").split(" ");a=String(c[1]);a=a.replace("id","");return{table:c[0],id:a,field:c[2]}}function get_class(d,b){var a;c=d.attr("class").split(" ");return c[b]}function get_table(a){var b;b=get_cell(a);return b.table}function get_field(a){var b;b=get_cell(a);return b.field}function get_id(b){var d,a;a=b.attr("class").split(" ");d=jQuery.grep(a,function(e){return(e.indexOf("id")==0)});d=String(d);d=d.replace("id","");return d}function get_nr(b){var d,a;a=b.attr("class").split(" ");d=jQuery.grep(a,function(e){return(e.indexOf("nr")>=0)});d=String(d);d=d.replace("nr","");return d}function get_subclass(d,e){var b,a;a=e.attr("class").split(" ");b=jQuery.grep(a,function(f){return(f.indexOf(d)>=0)});b=String(b);b=b.replace(d,"");return b}function get_name(b){var a;a=$("td.str:first",b).text();if(a==""){a=$("td.name:first",b).text()}if(a==""){a=$("div.name:first",b).text()}a=stripTags(a);return trim(a)}function get_prefix(e,d){if(d==undefined){d="_"}var b=e.split(d);return b[0]}function stripTags(a){return a.replace(/<\/?[^>]+>/gi,"")}function trim(a){a=a.replace(/^\s+/,"");a=a.replace(/\s+$/,"");return a}function randomPassword(f){var e,d,a,b;e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";d="";for(a=0;a<f;a++){b=Math.floor(Math.random()*62);d+=e.charAt(b)}return d}function serialize(d){var b,d,a;b="";d=$(d);$(d).each(function(){a=get_id($(this));b+="&id[]="+a});return b.substr(1)}function rowsEvenOdd(){if($(".grid tbody tr .file").length==0){$("table.grid tbody tr").removeClass("oddrow").removeClass("evenrow");$("table.grid tbody tr:visible:odd").addClass("oddrow");$("table.grid tbody tr:visible:even").addClass("evenrow")}}function setCurrent(a){if(!$(".grid").hasClass("files")){current=$(".grid tbody tr.current").removeClass("current");oldIndex=$(".grid tbody tr:visible").index(current);switch(a){case"first":current=$(".grid tbody tr:visible:first").addClass("current");break;case"down":index=oldIndex+1;len=$(".grid tbody tr:visible").length-1;if(index>=len){index=len}current=$(".grid tbody tr:visible:eq("+index+")").addClass("current");break;case"up":index=oldIndex-1;if(index<0){index=0}current=$(".grid tbody tr:visible:eq("+index+")").addClass("current");break;default:current=$(".grid tbody tr:visible:eq("+a+")").addClass("current")}}}function get_ext(d){var b,d;d=String(d);b=d.split(".");return b[b.length-1]}function pathdecode(a){a=a.replace(/___/g,"/");return a}function pathencode(a){a=a.replace(/\//g,"___");return a}function site_url(a){if(a==undefined){a=config.site_url}else{a=config.site_url+a}return a}function regBoldReplace(b,a){return"<b>"+a+"</b>"}function cachedThumb(a){return a}function flash(e,b,d){var a,g;a='width="'+b+'" height="'+d+'"';g='<object class="flash" data="#swf#" #attr# classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" ><param name="allowScriptAccess" value="sameDomain" /><param name="movie" value="#swf#" /><param name="quality" value="high" /><param name="bgcolor" value="#ffffff" /><embed class="flash" src="#swf#" quality="high" bgcolor="#ffffff" #attr# allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" /></object>';g=g.replace(/#swf#/g,e);g=g.replace(/#attr#/g,a);return g};