!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=Z.type(e);return"function"===i||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(Z.isFunction(t))return Z.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return Z.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(st.test(t))return Z.filter(t,e,i);t=Z.filter(t,e)}return Z.grep(e,function(e){return V.call(t,e)>=0!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=ft[e]={};return Z.each(e.match(ht)||[],function(e,i){t[i]=!0}),t}function o(){J.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(wt,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:bt.test(i)?Z.parseJSON(i):i}catch(r){}yt.set(e,t,i)}else i=void 0;return i}function c(){return!0}function d(){return!1}function p(){try{return J.activeElement}catch(e){}}function u(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var i=0,n=e.length;n>i;i++)vt.set(e[i],"globalEval",!t||vt.get(t[i],"globalEval"))}function g(e,t){var i,n,r,a,o,s,l,c;if(1===t.nodeType){if(vt.hasData(e)&&(a=vt.access(e),o=vt.set(t,a),c=a.events)){delete o.handle,o.events={};for(r in c)for(i=0,n=c[r].length;n>i;i++)Z.event.add(t,r,c[r][i])}yt.hasData(e)&&(s=yt.access(e),l=Z.extend({},s),yt.set(t,l))}}function v(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],i):i}function y(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Et.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function b(t,i){var n,r=Z(i.createElement(t)).appendTo(i.body),a=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:Z.css(r[0],"display");return r.detach(),a}function w(e){var t=J,i=jt[e];return i||(i=b(e,t),"none"!==i&&i||(Ft=(Ft||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ft[0].contentDocument,t.write(),t.close(),i=b(e,t),Ft.detach()),jt[e]=i),i}function x(e,t,i){var n,r,a,o,s=e.style;return i=i||qt(e),i&&(o=i.getPropertyValue(t)||i[t]),i&&(""!==o||Z.contains(e.ownerDocument,e)||(o=Z.style(e,t)),Ut.test(o)&&Ht.test(t)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function $(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Gt.length;r--;)if(t=Gt[r]+i,t in e)return t;return n}function E(e,t,i){var n=zt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function C(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===i&&(o+=Z.css(e,i+$t[a],!0,r)),n?("content"===i&&(o-=Z.css(e,"padding"+$t[a],!0,r)),"margin"!==i&&(o-=Z.css(e,"border"+$t[a]+"Width",!0,r))):(o+=Z.css(e,"padding"+$t[a],!0,r),"padding"!==i&&(o+=Z.css(e,"border"+$t[a]+"Width",!0,r)));return o}function T(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=qt(e),o="border-box"===Z.css(e,"boxSizing",!1,a);if(0>=r||null==r){if(r=x(e,t,a),(0>r||null==r)&&(r=e.style[t]),Ut.test(r))return r;n=o&&(K.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+C(e,t,i||(o?"border":"content"),n,a)+"px"}function S(e,t){for(var i,n,r,a=[],o=0,s=e.length;s>o;o++)n=e[o],n.style&&(a[o]=vt.get(n,"olddisplay"),i=n.style.display,t?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&kt(n)&&(a[o]=vt.access(n,"olddisplay",w(n.nodeName)))):(r=kt(n),"none"===i&&r||vt.set(n,"olddisplay",r?i:Z.css(n,"display"))));for(o=0;s>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[o]||"":"none"));return e}function _(e,t,i,n,r){return new _.prototype.init(e,t,i,n,r)}function I(){return setTimeout(function(){Kt=void 0}),Kt=Z.now()}function M(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=$t[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function D(e,t,i){for(var n,r=(ii[t]||[]).concat(ii["*"]),a=0,o=r.length;o>a;a++)if(n=r[a].call(i,t,e))return n}function A(e,t,i){var n,r,a,o,s,l,c,d,p=this,u={},h=e.style,f=e.nodeType&&kt(e),m=vt.get(e,"fxshow");i.queue||(s=Z._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,Z.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=Z.css(e,"display"),d="none"===c?vt.get(e,"olddisplay")||w(e.nodeName):c,"inline"===d&&"none"===Z.css(e,"float")&&(h.display="inline-block")),i.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Qt.exec(r)){if(delete t[n],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}u[n]=m&&m[n]||Z.style(e,n)}else c=void 0;if(Z.isEmptyObject(u))"inline"===("none"===c?w(e.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=vt.access(e,"fxshow",{}),a&&(m.hidden=!f),f?Z(e).show():p.done(function(){Z(e).hide()}),p.done(function(){var t;vt.remove(e,"fxshow");for(t in u)Z.style(e,t,u[t])});for(n in u)o=D(f?m[n]:0,n,p),n in m||(m[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function O(e,t){var i,n,r,a,o;for(i in e)if(n=Z.camelCase(i),r=t[n],a=e[i],Z.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),o=Z.cssHooks[n],o&&"expand"in o){a=o.expand(a),delete e[n];for(i in a)i in e||(e[i]=a[i],t[i]=r)}else t[n]=r}function L(e,t,i){var n,r,a=0,o=ti.length,s=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Kt||I(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,a=1-n,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(a);return s.notifyWith(e,[c,a,i]),1>a&&l?i:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Kt||I(),duration:i.duration,tweens:[],createTween:function(t,i){var n=Z.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),d=c.props;for(O(d,c.opts.specialEasing);o>a;a++)if(n=ti[a].call(c,e,d,c.opts))return n;return Z.map(d,D,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function P(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(ht)||[];if(Z.isFunction(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function N(e,t,i,n){function r(s){var l;return a[s]=!0,Z.each(e[s]||[],function(e,s){var c=s(t,i,n);return"string"!=typeof c||o||a[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var a={},o=e===bi;return r(t.dataTypes[0])||!a["*"]&&r("*")}function R(e,t){var i,n,r=Z.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&Z.extend(!0,e,n),e}function B(e,t,i){for(var n,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}function F(e,t,i,n){var r,a,o,s,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=d.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=c[l+" "+a]||c["* "+a],!o)for(r in c)if(s=r.split(" "),s[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){o===!0?o=c[r]:c[r]!==!0&&(a=s[0],d.unshift(s[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(p){return{state:"parsererror",error:o?p:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function j(e,t,i,n){var r;if(Z.isArray(t))Z.each(t,function(t,r){i||Ei.test(e)?n(e,r):j(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==Z.type(t))n(e,t);else for(r in t)j(e+"["+r+"]",t[r],i,n)}function H(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],q=U.slice,W=U.concat,z=U.push,V=U.indexOf,Y={},X=Y.toString,G=Y.hasOwnProperty,K={},J=e.document,Q="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:q.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:U.sort,splice:U.splice},Z.extend=Z.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||Z.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)i=o[t],n=e[t],o!==n&&(c&&n&&(Z.isPlainObject(n)||(r=Z.isArray(n)))?(r?(r=!1,a=i&&Z.isArray(i)?i:[]):a=i&&Z.isPlainObject(i)?i:{},o[t]=Z.extend(c,a,n)):void 0!==n&&(o[t]=n));return o},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[X.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,a=0,o=e.length,s=i(e);if(n){if(s)for(;o>a&&(r=t.apply(e[a],n),r!==!1);a++);else for(a in e)if(r=t.apply(e[a],n),r===!1)break}else if(s)for(;o>a&&(r=t.call(e[a],a,e[a]),r!==!1);a++);else for(a in e)if(r=t.call(e[a],a,e[a]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?Z.merge(n,"string"==typeof e?[e]:e):z.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:V.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],a=0,o=e.length,s=!i;o>a;a++)n=!t(e[a],a),n!==s&&r.push(e[a]);return r},map:function(e,t,n){var r,a=0,o=e.length,s=i(e),l=[];if(s)for(;o>a;a++)r=t(e[a],a,n),null!=r&&l.push(r);else for(a in e)r=t(e[a],a,n),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),Z.isFunction(e)?(n=q.call(arguments,2),r=function(){return e.apply(t||this,n.concat(q.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:K}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,i,n){var r,a,o,s,l,c,p,h,f,m;if((t?t.ownerDocument||t:j)!==A&&D(t),t=t||A,i=i||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return i;if(!n&&L){if(11!==s&&(r=yt.exec(e)))if(o=r[1]){if(9===s){if(a=t.getElementById(o),!a||!a.parentNode)return i;if(a.id===o)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&B(t,a)&&a.id===o)return i.push(a),i}else{if(r[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((o=r[3])&&x.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(o)),i}if(x.qsa&&(!P||!P.test(e))){if(h=p=F,f=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=C(e),(p=t.getAttribute("id"))?h=p.replace(wt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+u(c[l]);f=bt.test(e)&&d(t.parentNode)||t,m=c.join(",")}if(m)try{return Q.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{p||t.removeAttribute("id")}}}return S(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>$.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var i=e.split("|"),n=e.length;n--;)$.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function u(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function h(e,t,i){var n=t.dir,r=i&&"parentNode"===n,a=U++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,a)}:function(t,i,o){var s,l,c=[H,a];if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[F]||(t[F]={}),(s=l[n])&&s[0]===H&&s[1]===a)return c[2]=s[2];if(l[n]=c,c[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var r=0,a=i.length;a>r;r++)t(e,i[r],n);return n}function g(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,c=null!=t;l>s;s++)(a=e[s])&&(!i||i(a,n,r))&&(o.push(a),c&&t.push(s));return o}function v(e,t,i,r,a,o){return r&&!r[F]&&(r=v(r)),a&&!a[F]&&(a=v(a,o)),n(function(n,o,s,l){var c,d,p,u=[],h=[],f=o.length,v=n||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?v:g(v,u,e,s,l),b=i?a||(n?e:f||r)?[]:o:y;if(i&&i(y,b,s,l),r)for(c=g(b,h),r(c,[],s,l),d=c.length;d--;)(p=c[d])&&(b[h[d]]=!(y[h[d]]=p));if(n){if(a||e){if(a){for(c=[],d=b.length;d--;)(p=b[d])&&c.push(y[d]=p);a(null,b=[],c,l)}for(d=b.length;d--;)(p=b[d])&&(c=a?et(n,p):u[d])>-1&&(n[c]=!(o[c]=p))}}else b=g(b===o?b.splice(f,b.length):b),a?a(null,o,b,l):Q.apply(o,b)})}function y(e){for(var t,i,n,r=e.length,a=$.relative[e[0].type],o=a||$.relative[" "],s=a?1:0,l=h(function(e){return e===t},o,!0),c=h(function(e){return et(t,e)>-1},o,!0),d=[function(e,i,n){var r=!a&&(n||i!==_)||((t=i).nodeType?l(e,i,n):c(e,i,n));return t=null,r}];r>s;s++)if(i=$.relative[e[s].type])d=[h(f(d),i)];else{if(i=$.filter[e[s].type].apply(null,e[s].matches),i[F]){for(n=++s;r>n&&!$.relative[e[n].type];n++);return v(s>1&&f(d),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),i,n>s&&y(e.slice(s,n)),r>n&&y(e=e.slice(n)),r>n&&u(e))}d.push(i)}return f(d)}function b(e,i){var r=i.length>0,a=e.length>0,o=function(n,o,s,l,c){var d,p,u,h=0,f="0",m=n&&[],v=[],y=_,b=n||a&&$.find.TAG("*",c),w=H+=null==y?1:Math.random()||.1,x=b.length;for(c&&(_=o!==A&&o);f!==x&&null!=(d=b[f]);f++){if(a&&d){for(p=0;u=e[p++];)if(u(d,o,s)){l.push(d);break}c&&(H=w)}r&&((d=!u&&d)&&h--,n&&m.push(d))}if(h+=f,r&&f!==h){for(p=0;u=i[p++];)u(m,v,o,s);if(n){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=K.call(l));v=g(v)}Q.apply(l,v),c&&!n&&v.length>0&&h+i.length>1&&t.uniqueSort(l)}return c&&(H=w,_=y),m};return r?n(o):o}var w,x,$,k,E,C,T,S,_,I,M,D,A,O,L,P,N,R,B,F="sizzle"+1*new Date,j=e.document,H=0,U=0,q=i(),W=i(),z=i(),V=function(e,t){return e===t&&(M=!0),0},Y=1<<31,X={}.hasOwnProperty,G=[],K=G.pop,J=G.push,Q=G.push,Z=G.slice,et=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=nt.replace("w","w#"),at="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+it+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),dt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),pt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(ot),ht=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),$t=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},kt=function(){D()};try{Q.apply(G=Z.call(j.childNodes),j.childNodes),G[j.childNodes.length].nodeType}catch(Et){Q={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:j;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,O=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",kt,!1):i.attachEvent&&i.attachEvent("onunload",kt)),L=!E(n),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(n.getElementsByClassName),x.getById=r(function(e){return O.appendChild(e).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),x.getById?($.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},$.filter.ID=function(e){var t=e.replace(xt,$t);return function(e){return e.getAttribute("id")===t}}):(delete $.find.ID,$.filter.ID=function(e){var t=e.replace(xt,$t);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),$.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},$.find.CLASS=x.getElementsByClassName&&function(e,t){return L?t.getElementsByClassName(e):void 0},N=[],P=[],(x.qsa=vt.test(n.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+it+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+F+"-]").length||P.push("~="),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||P.push(".#.+[+~]")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(x.matchesSelector=vt.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){x.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),N.push("!=",ot)}),P=P.length&&new RegExp(P.join("|")),N=N.length&&new RegExp(N.join("|")),t=vt.test(O.compareDocumentPosition),B=t||vt.test(O.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return M=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===j&&B(j,e)?-1:t===n||t.ownerDocument===j&&B(j,t)?1:I?et(I,e)-et(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return M=!0,0;var i,r=0,a=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:I?et(I,e)-et(I,t):0;if(a===s)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===j?-1:c[r]===j?1:0},n):A},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==A&&D(e),i=i.replace(pt,"='$1']"),!(!x.matchesSelector||!L||N&&N.test(i)||P&&P.test(i)))try{var n=R.call(e,i);if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&D(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&D(e);var i=$.attrHandle[t.toLowerCase()],n=i&&X.call($.attrHandle,t.toLowerCase())?i(e,t,!L):void 0;return void 0!==n?n:x.attributes||!L?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(M=!x.detectDuplicates,I=!x.sortStable&&e.slice(0),e.sort(V),M){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return I=null,e},k=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},$=t.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,$t),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,$t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ut.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,$t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var a=t.attr(r,e);return null==a?"!="===i:i?(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a.replace(st," ")+" ").indexOf(n)>-1:"|="===i?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,d,p,u,h,f,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(a){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(d=g[F]||(g[F]={}),c=d[e]||[],h=c[0]===H&&c[1],u=c[0]===H&&c[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(u=h=0)||f.pop();)if(1===p.nodeType&&++u&&p===t){d[e]=[H,h,u];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===H)u=c[1];else for(;(p=++h&&p&&p[m]||(u=h=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++u||(y&&((p[F]||(p[F]={}))[e]=[H,u]),p!==t)););return u-=r,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(e,i){var r,a=$.pseudos[e]||$.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(i):a.length>1?(r=[e,e,"",i],$.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)n=et(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return a(e,0,r)}):a}},pseudos:{not:n(function(e){var t=[],i=[],r=T(e.replace(lt,"$1"));return r[F]?n(function(e,t,i,n){for(var a,o=r(e,null,n,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,n,a){return t[0]=e,r(t,null,a,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(xt,$t),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,$t).toLowerCase(),function(t){var i;do if(i=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},$.pseudos.nth=$.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})$.pseudos[w]=l(w);return p.prototype=$.filters=$.pseudos,$.setFilters=new p,C=t.tokenize=function(e,i){var n,r,a,o,s,l,c,d=W[e+" "];if(d)return i?0:d.slice(0);for(s=e,l=[],c=$.preFilter;s;){(!n||(r=ct.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),n=!1,(r=dt.exec(s))&&(n=r.shift(),a.push({value:n,type:r[0].replace(lt," ")}),s=s.slice(n.length));for(o in $.filter)!(r=ft[o].exec(s))||c[o]&&!(r=c[o](r))||(n=r.shift(),a.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):W(e,l).slice(0)},T=t.compile=function(e,t){var i,n=[],r=[],a=z[e+" "];if(!a){for(t||(t=C(e)),i=t.length;i--;)a=y(t[i]),a[F]?n.push(a):r.push(a);a=z(e,b(r,n)),a.selector=e}return a},S=t.select=function(e,t,i,n){var r,a,o,s,l,c="function"==typeof e&&e,p=!n&&C(e=c.selector||e);if(i=i||[],1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&x.getById&&9===t.nodeType&&L&&$.relative[a[1].type]){if(t=($.find.ID(o.matches[0].replace(xt,$t),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=ft.needsContext.test(e)?0:a.length;r--&&(o=a[r],!$.relative[s=o.type]);)if((l=$.find[s])&&(n=l(o.matches[0].replace(xt,$t),bt.test(a[0].type)&&d(t.parentNode)||t))){if(a.splice(r,1),e=n.length&&u(a),!e)return Q.apply(i,n),i;break}}return(c||T(e,p))(n,t,!L,i,bt.test(e)&&d(t.parentNode)||t),i},x.sortStable=F.split("").sort(V).join("")===F,x.detectDuplicates=!!M,D(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(tt,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);Z.find=rt,Z.expr=rt.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=rt.uniqueSort,Z.text=rt.getText,Z.isXMLDoc=rt.isXML,Z.contains=rt.contains;var at=Z.expr.match.needsContext,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Z.find.matchesSelector(n,e)?[n]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;i>t;t++)if(Z.contains(r[t],this))return!0
}));for(t=0;i>t;t++)Z.find(e,r[t],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&at.test(e)?Z(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=Z.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ot.test(i[1])&&Z.isPlainObject(t))for(i in t)Z.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=J.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};dt.prototype=Z.fn,lt=Z(J);var pt=/^(?:parents|prev(?:Until|All))/,ut={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),Z.fn.extend({has:function(e){var t=Z(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=at.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?Z.unique(a):a)},index:function(e){return e?"string"==typeof e?V.call(Z(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Z.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Z.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Z.dir(e,"previousSibling",i)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(i,n){var r=Z.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=Z.filter(n,r)),this.length>1&&(ut[e]||Z.unique(r),pt.test(e)&&r.reverse()),this.pushStack(r)}});var ht=/\S+/g,ft={};Z.Callbacks=function(e){e="string"==typeof e?ft[e]||a(e):Z.extend({},e);var t,i,n,r,o,s,l=[],c=!e.once&&[],d=function(a){for(t=e.memory&&a,i=!0,s=r||0,r=0,o=l.length,n=!0;l&&o>s;s++)if(l[s].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):t?l=[]:p.disable())},p={add:function(){if(l){var i=l.length;!function a(t){Z.each(t,function(t,i){var n=Z.type(i);"function"===n?e.unique&&p.has(i)||l.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),n?o=l.length:t&&(r=i,d(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var i;(i=Z.inArray(t,l,i))>-1;)l.splice(i,1),n&&(o>=i&&o--,s>=i&&s--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||i&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(i){Z.each(t,function(t,a){var o=Z.isFunction(e[t])&&e[t];r[a[1]](function(){var e=o&&o.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,n):n}},r={};return n.pipe=n.then,Z.each(t,function(e,a){var o=a[2],s=a[3];n[a[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,a=q.call(arguments),o=a.length,s=1!==o||e&&Z.isFunction(e.promise)?o:0,l=1===s?e:Z.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?q.call(arguments):r,n===t?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)a[r]&&Z.isFunction(a[r].promise)?a[r].promise().done(c(r,n,a)).fail(l.reject).progress(c(r,i,t)):--s;return s||l.resolveWith(n,a),l.promise()}});var mt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(mt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return mt||(mt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),mt.promise(t)},Z.ready.promise();var gt=Z.access=function(e,t,i,n,r,a,o){var s=0,l=e.length,c=null==i;if("object"===Z.type(i)){r=!0;for(s in i)Z.access(e,t,s,i[s],!0,a,o)}else if(void 0!==n&&(r=!0,Z.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(Z(e),i)})),t))for(;l>s;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)));return r?e:c?t.call(e):l?t(e[0],i):a};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=s.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,Z.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=i;else if(Z.isEmptyObject(a))Z.extend(this.cache[r],t);else for(n in t)a[n]=t[n];return a},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,Z.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,a=this.key(e),o=this.cache[a];if(void 0===t)this.cache[a]={};else{Z.isArray(t)?n=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in o?n=[t,r]:(n=r,n=n in o?[n]:n.match(ht)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new s,yt=new s,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Z.extend({hasData:function(e){return yt.hasData(e)||vt.hasData(e)},data:function(e,t,i){return yt.access(e,t,i)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,i){return vt.access(e,t,i)},_removeData:function(e,t){vt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=yt.get(a),1===a.nodeType&&!vt.get(a,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),l(a,n,r[n])));vt.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){yt.set(this,e)}):gt(this,function(t){var i,n=Z.camelCase(e);if(a&&void 0===t){if(i=yt.get(a,e),void 0!==i)return i;if(i=yt.get(a,n),void 0!==i)return i;if(i=l(a,n,void 0),void 0!==i)return i}else this.each(function(){var i=yt.get(this,n);yt.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Z.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=vt.get(e,t),i&&(!n||Z.isArray(i)?n=vt.access(e,t,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=Z.queue(e,t),n=i.length,r=i.shift(),a=Z._queueHooks(e,t),o=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,o,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return vt.get(e,i)||vt.access(e,i,{empty:Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",i])})})}}),Z.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?Z.queue(this[0],e):void 0===t?this:this.each(function(){var i=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=Z.Deferred(),a=this,o=this.length,s=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)i=vt.get(a[o],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$t=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Et=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),i=J.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),K.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ct="undefined";K.focusinBubbles="onfocusin"in e;var Tt=/^key/,St=/^(?:mouse|pointer|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,It=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,c,d,p,u,h,f,m,g=vt.get(e);if(g)for(i.handler&&(a=i,i=a.handler,r=a.selector),i.guid||(i.guid=Z.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return typeof Z!==Ct&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ht)||[""],c=t.length;c--;)s=It.exec(t[c])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h&&(p=Z.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,p=Z.event.special[h]||{},d=Z.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},a),(u=l[h])||(u=l[h]=[],u.delegateCount=0,p.setup&&p.setup.call(e,n,f,o)!==!1||e.addEventListener&&e.addEventListener(h,o,!1)),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,d):u.push(d),Z.event.global[h]=!0)},remove:function(e,t,i,n,r){var a,o,s,l,c,d,p,u,h,f,m,g=vt.hasData(e)&&vt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(s=It.exec(t[c])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h){for(p=Z.event.special[h]||{},h=(n?p.delegateType:p.bindType)||h,u=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=u.length;a--;)d=u[a],!r&&m!==d.origType||i&&i.guid!==d.guid||s&&!s.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(a,1),d.selector&&u.delegateCount--,p.remove&&p.remove.call(e,d));o&&!u.length&&(p.teardown&&p.teardown.call(e,f,g.handle)!==!1||Z.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)Z.event.remove(e,h+t[c],i,n,!0);Z.isEmptyObject(l)&&(delete g.handle,vt.remove(e,"events"))}},trigger:function(t,i,n,r){var a,o,s,l,c,d,p,u=[n||J],h=G.call(t,"type")?t.type:t,f=G.call(t,"namespace")?t.namespace.split("."):[];if(o=s=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!_t.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[Z.expando]?t:new Z.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:Z.makeArray(i,[t]),p=Z.event.special[h]||{},r||!p.trigger||p.trigger.apply(n,i)!==!1)){if(!r&&!p.noBubble&&!Z.isWindow(n)){for(l=p.delegateType||h,_t.test(l+h)||(o=o.parentNode);o;o=o.parentNode)u.push(o),s=o;s===(n.ownerDocument||J)&&u.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=u[a++])&&!t.isPropagationStopped();)t.type=a>1?l:p.bindType||h,d=(vt.get(o,"events")||{})[t.type]&&vt.get(o,"handle"),d&&d.apply(o,i),d=c&&o[c],d&&d.apply&&Z.acceptData(o)&&(t.result=d.apply(o,i),t.result===!1&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||p._default&&p._default.apply(u.pop(),i)!==!1||!Z.acceptData(n)||c&&Z.isFunction(n[h])&&!Z.isWindow(n)&&(s=n[c],s&&(n[c]=null),Z.event.triggered=h,n[h](),Z.event.triggered=void 0,s&&(n[c]=s)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,i,n,r,a,o=[],s=q.call(arguments),l=(vt.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=Z.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((Z.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;s>i;i++)a=t[i],r=a.selector+" ",void 0===n[r]&&(n[r]=a.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),n[r]&&n.push(a);n.length&&o.push({elem:l,handlers:n})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||J,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,i,n,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=St.test(r)?this.mouseHooks:Tt.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new Z.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=Z.extend(new Z.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:d):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==n&&!Z.contains(n,r))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),K.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=vt.access(n,t);r||n.addEventListener(e,i,!0),vt.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=vt.access(n,t)-1;r?vt.access(n,t,r):(n.removeEventListener(e,i,!0),vt.remove(n,t))}}}),Z.fn.extend({on:function(e,t,i,n,r){var a,o;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(o in e)this.on(o,t,i,e[o],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=d;else if(!n)return this;return 1===r&&(a=n,n=function(e){return Z().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Z(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=d),this.each(function(){Z.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?Z.event.trigger(e,t,i,!0):void 0}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,At=/<|&#?\w+;/,Ot=/<(?:script|style|link)/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^$|\/(?:java|ecma)script/i,Nt=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Bt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bt.optgroup=Bt.option,Bt.tbody=Bt.tfoot=Bt.colgroup=Bt.caption=Bt.thead,Bt.th=Bt.td,Z.extend({clone:function(e,t,i){var n,r,a,o,s=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(o=v(s),a=v(e),n=0,r=a.length;r>n;n++)y(a[n],o[n]);if(t)if(i)for(a=a||v(e),o=o||v(s),n=0,r=a.length;r>n;n++)g(a[n],o[n]);else g(e,s);return o=v(s,"script"),o.length>0&&m(o,!l&&v(e,"script")),s},buildFragment:function(e,t,i,n){for(var r,a,o,s,l,c,d=t.createDocumentFragment(),p=[],u=0,h=e.length;h>u;u++)if(r=e[u],r||0===r)if("object"===Z.type(r))Z.merge(p,r.nodeType?[r]:r);else if(At.test(r)){for(a=a||d.appendChild(t.createElement("div")),o=(Dt.exec(r)||["",""])[1].toLowerCase(),s=Bt[o]||Bt._default,a.innerHTML=s[1]+r.replace(Mt,"<$1></$2>")+s[2],c=s[0];c--;)a=a.lastChild;Z.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(t.createTextNode(r));for(d.textContent="",u=0;r=p[u++];)if((!n||-1===Z.inArray(r,n))&&(l=Z.contains(r.ownerDocument,r),a=v(d.appendChild(r),"script"),l&&m(a),i))for(c=0;r=a[c++];)Pt.test(r.type||"")&&i.push(r);return d},cleanData:function(e){for(var t,i,n,r,a=Z.event.special,o=0;void 0!==(i=e[o]);o++){if(Z.acceptData(i)&&(r=i[vt.expando],r&&(t=vt.cache[r]))){if(t.events)for(n in t.events)a[n]?Z.event.remove(i,n):Z.removeEvent(i,n,t.handle);vt.cache[r]&&delete vt.cache[r]}delete yt.cache[i[yt.expando]]}}}),Z.fn.extend({text:function(e){return gt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=u(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=u(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?Z.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||Z.cleanData(v(i)),i.parentNode&&(t&&Z.contains(i.ownerDocument,i)&&m(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return gt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ot.test(e)&&!Bt[(Dt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Mt,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var i,n,r,a,o,s,l=0,c=this.length,d=this,p=c-1,u=e[0],m=Z.isFunction(u);if(m||c>1&&"string"==typeof u&&!K.checkClone&&Lt.test(u))return this.each(function(i){var n=d.eq(i);m&&(e[0]=u.call(this,i,n.html())),n.domManip(e,t)});if(c&&(i=Z.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=Z.map(v(i,"script"),h),a=r.length;c>l;l++)o=i,l!==p&&(o=Z.clone(o,!0,!0),a&&Z.merge(r,v(o,"script"))),t.call(this[l],o,l);if(a)for(s=r[r.length-1].ownerDocument,Z.map(r,f),l=0;a>l;l++)o=r[l],Pt.test(o.type||"")&&!vt.access(o,"globalEval")&&Z.contains(s,o)&&(o.src?Z._evalUrl&&Z._evalUrl(o.src):Z.globalEval(o.textContent.replace(Rt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var i,n=[],r=Z(e),a=r.length-1,o=0;a>=o;o++)i=o===a?this:this.clone(!0),Z(r[o])[t](i),z.apply(n,i.get());return this.pushStack(n)}});var Ft,jt={},Ht=/^margin/,Ut=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),qt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(a);var t=e.getComputedStyle(o,null);i="1%"!==t.top,n="4px"===t.width,r.removeChild(a)}var i,n,r=J.documentElement,a=J.createElement("div"),o=J.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(o),e.getComputedStyle&&Z.extend(K,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=o.appendChild(J.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",r.appendChild(a),t=!parseFloat(e.getComputedStyle(i,null).marginRight),r.removeChild(a),o.removeChild(i),t}}))}(),Z.swap=function(e,t,i,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];r=i.apply(e,n||[]);for(a in t)e.style[a]=o[a];return r};var Wt=/^(none|table(?!-c[ea]).+)/,zt=new RegExp("^("+xt+")(.*)$","i"),Vt=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Gt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=x(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=Z.camelCase(t),l=e.style;return t=Z.cssProps[s]||(Z.cssProps[s]=k(l,s)),o=Z.cssHooks[t]||Z.cssHooks[s],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:l[t]:(a=typeof i,"string"===a&&(r=Vt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),a="number"),void(null!=i&&i===i&&("number"!==a||Z.cssNumber[s]||(i+="px"),K.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l[t]=i))))}},css:function(e,t,i,n){var r,a,o,s=Z.camelCase(t);return t=Z.cssProps[s]||(Z.cssProps[s]=k(e.style,s)),o=Z.cssHooks[t]||Z.cssHooks[s],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=x(e,t,n)),"normal"===r&&t in Xt&&(r=Xt[t]),""===i||i?(a=parseFloat(r),i===!0||Z.isNumeric(a)?a||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,i,n){return i?Wt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Yt,function(){return T(e,t,n)}):T(e,t,n):void 0},set:function(e,i,n){var r=n&&qt(e);return E(e,i,n?C(e,t,n,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=$(K.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+$t[n]+t]=a[n]||a[n-2]||a[0];return r}},Ht.test(e)||(Z.cssHooks[e+t].set=E)}),Z.fn.extend({css:function(e,t){return gt(this,function(e,t,i){var n,r,a={},o=0;if(Z.isArray(t)){for(n=qt(e),r=t.length;r>o;o++)a[t[o]]=Z.css(e,t[o],!1,n);return a}return void 0!==i?Z.style(e,t,i):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=_,_.prototype={constructor:_,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(Z.cssNumber[i]?"":"px")},cur:function(){var e=_.propHooks[this.prop];return e&&e.get?e.get(this):_.propHooks._default.get(this)},run:function(e){var t,i=_.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):_.propHooks._default.set(this),this}},_.prototype.init.prototype=_.prototype,_.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},_.propHooks.scrollTop=_.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=_.prototype.init,Z.fx.step={};var Kt,Jt,Qt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[A],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Zt.exec(t),a=r&&r[3]||(Z.cssNumber[e]?"":"px"),o=(Z.cssNumber[e]||"px"!==a&&+n)&&Zt.exec(Z.css(i.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+n||1;do s=s||".5",o/=s,Z.style(i.elem,e,o+a);while(s!==(s=i.cur()/n)&&1!==s&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=a,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};Z.Animation=Z.extend(L,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),Z.speed=function(e,t,i){var n=e&&"object"==typeof e?Z.extend({},e):{complete:i||!i&&t||Z.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({fadeTo:function(e,t,i,n){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=Z.isEmptyObject(e),a=Z.speed(t,i,n),o=function(){var t=L(this,Z.extend({},e),a);(r||vt.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=Z.timers,o=vt.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&ei.test(r)&&n(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));(t||!i)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=vt.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=Z.timers,o=n?n.length:0;for(i.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);
delete i.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var i=Z.fn[t];Z.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(M(t,!0),e,n,r)}}),Z.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,i=Z.timers;for(Kt=Z.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||Z.fx.stop(),Kt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),i=t.appendChild(J.createElement("option"));e.type="checkbox",K.checkOn=""!==e.value,K.optSelected=i.selected,t.disabled=!0,K.optDisabled=!i.disabled,e=J.createElement("input"),e.value="t",e.type="radio",K.radioValue="t"===e.value}();var ni,ri,ai=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return gt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,i){var n,r,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?typeof e.getAttribute===Ct?Z.prop(e,t,i):(1===a&&Z.isXMLDoc(e)||(t=t.toLowerCase(),n=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?ri:ni)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void Z.removeAttr(e,t)):void 0},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(ht);if(a&&1===e.nodeType)for(;i=a[r++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!K.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ri={set:function(e,t,i){return t===!1?Z.removeAttr(e,i):e.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ai[t]||Z.find.attr;ai[t]=function(e,t,n){var r,a;return n||(a=ai[t],ai[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,ai[t]=a),r}});var oi=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return gt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,a,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?(a=1!==o||!Z.isXMLDoc(e),a&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||oi.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),K.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var si=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,i,n,r,a,o,s="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(si," "):" ")){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=Z.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(e){var t,i,n,r,a,o,s=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(si," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=e?Z.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(i){Z(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=Z(this),a=e.match(ht)||[];t=a[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===Ct||"boolean"===i)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(si," ").indexOf(t)>=0)return!0;return!1}});var li=/\r/g;Z.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=Z.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(li,""):null==i?"":i)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:n.length,l=0>r?s:a?r:0;s>l;l++)if(i=n[l],!(!i.selected&&l!==r||(K.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(t=Z(i).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=Z.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=Z.inArray(n.value,a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},K.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var ci=Z.now(),di=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var pi=/#.*$/,ui=/([?&])_=[^&]*/,hi=/^(.*?):[ \t]*([^\r\n]*)$/gm,fi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mi=/^(?:GET|HEAD)$/,gi=/^\/\//,vi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yi={},bi={},wi="*/".concat("*"),xi=e.location.href,$i=vi.exec(xi.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xi,type:"GET",isLocal:fi.test($i[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Z.ajaxSettings),t):R(Z.ajaxSettings,e)},ajaxPrefilter:P(yi),ajaxTransport:P(bi),ajax:function(e,t){function i(e,t,i,o){var l,d,v,y,w,$=t;2!==b&&(b=2,s&&clearTimeout(s),n=void 0,a=o||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(y=B(p,x,i)),y=F(p,y,x,l),l?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Z.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Z.etag[r]=w)),204===e||"HEAD"===p.type?$="nocontent":304===e?$="notmodified":($=y.state,d=y.data,v=y.error,l=!v)):(v=$,(e||!$)&&($="error",0>e&&(e=0))),x.status=e,x.statusText=(t||$)+"",l?f.resolveWith(u,[d,$,x]):f.rejectWith(u,[x,$,v]),x.statusCode(g),g=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[x,p,l?d:v]),m.fireWith(u,[x,$]),c&&(h.trigger("ajaxComplete",[x,p]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,a,o,s,l,c,d,p=Z.ajaxSetup({},t),u=p.context||p,h=p.context&&(u.nodeType||u.jquery)?Z(u):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=p.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=hi.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,v[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),i(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((e||p.url||xi)+"").replace(pi,"").replace(gi,$i[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=Z.trim(p.dataType||"*").toLowerCase().match(ht)||[""],null==p.crossDomain&&(l=vi.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===$i[1]&&l[2]===$i[2]&&(l[3]||("http:"===l[1]?"80":"443"))===($i[3]||("http:"===$i[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Z.param(p.data,p.traditional)),N(yi,p,t,x),2===b)return x;c=Z.event&&p.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!mi.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(di.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=ui.test(r)?r.replace(ui,"$1_="+ci++):r+(di.test(r)?"&":"?")+"_="+ci++)),p.ifModified&&(Z.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&x.setRequestHeader("If-None-Match",Z.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+wi+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(u,x,p)===!1||2===b))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](p[d]);if(n=N(bi,p,t,x)){x.readyState=1,c&&h.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},p.timeout));try{b=1,n.send(v,i)}catch($){if(!(2>b))throw $;i(-1,$)}}else i(-1,"No Transport");return x},getJSON:function(e,t,i){return Z.get(e,t,i,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,i,n,r){return Z.isFunction(i)&&(r=r||n,n=i,i=void 0),Z.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(i){Z(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var ki=/%20/g,Ei=/\[\]$/,Ci=/\r?\n/g,Ti=/^(?:submit|button|image|reset|file)$/i,Si=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var i,n=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(i in e)j(i,e[i],t,r);return n.join("&").replace(ki,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Si.test(this.nodeName)&&!Ti.test(e)&&(this.checked||!Et.test(e))}).map(function(e,t){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(e){return{name:t.name,value:e.replace(Ci,"\r\n")}}):{name:t.name,value:i.replace(Ci,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var _i=0,Ii={},Mi={0:200,1223:204},Di=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Ii)Ii[e]()}),K.cors=!!Di&&"withCredentials"in Di,K.ajax=Di=!!Di,Z.ajaxTransport(function(e){var t;return K.cors||Di&&!e.crossDomain?{send:function(i,n){var r,a=e.xhr(),o=++_i;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)a.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete Ii[o],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(Mi[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=Ii[o]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Ai=[],Oi=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ai.pop()||Z.expando+"_"+ci++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,o,s=t.jsonp!==!1&&(Oi.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oi.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Oi,"$1"+r):t.jsonp!==!1&&(t.url+=(di.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||Z.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},n.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Ai.push(r)),o&&Z.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||J;var n=ot.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],n.childNodes))};var Li=Z.fn.load;Z.fn.load=function(e,t,i){if("string"!=typeof e&&Li)return Li.apply(this,arguments);var n,r,a,o=this,s=e.indexOf(" ");return s>=0&&(n=Z.trim(e.slice(s)),e=e.slice(0,s)),Z.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,o.html(n?Z("<div>").append(Z.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Pi=e.document.documentElement;Z.offset={setOffset:function(e,t,i){var n,r,a,o,s,l,c,d=Z.css(e,"position"),p=Z(e),u={};"static"===d&&(e.style.position="relative"),s=p.offset(),a=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(a+l).indexOf("auto")>-1,c?(n=p.position(),o=n.top,r=n.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(u.top=t.top-s.top+o),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):p.css(u)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},a=n&&n.ownerDocument;return a?(t=a.documentElement,Z.contains(t,n)?(typeof n.getBoundingClientRect!==Ct&&(r=n.getBoundingClientRect()),i=H(a),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===Z.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(n=e.offset()),n.top+=Z.css(e[0],"borderTopWidth",!0),n.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-Z.css(i,"marginTop",!0),left:t.left-n.left-Z.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pi;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Pi})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;Z.fn[t]=function(r){return gt(this,function(t,r,a){var o=H(t);return void 0===a?o?o[i]:t[r]:void(o?o.scrollTo(n?e.pageXOffset:a,n?a:e.pageYOffset):t[r]=a)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=$(K.pixelPosition,function(e,i){return i?(i=x(e,t),Ut.test(i)?Z(e).position()[t]+"px":i):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){Z.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return gt(this,function(t,i,n){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?Z.css(t,i,o):Z.style(t,i,n,o)},t,a?n:void 0,a,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Ni=e.jQuery,Ri=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Ri),t&&e.jQuery===Z&&(e.jQuery=Ni),Z},typeof t===Ct&&(e.jQuery=e.$=Z),Z}),function(e,t){"use strict";function i(){function e(e,i){return t.extend(Object.create(e),i)}function i(e,t){var i=t.caseInsensitiveMatch,n={originalPath:e,regexp:e},r=n.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,i,n){var a="?"===n?n:null,o="*"===n?n:null;return r.push({name:i,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),n.regexp=new RegExp("^"+e+"$",i?"i":""),n}var n={};this.when=function(e,r){var a=t.copy(r);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),n[e]=t.extend(a,e&&i(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";n[o]=t.extend({redirectTo:e},i(o,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,r,a,o,l,c,d){function p(e,t){var i=t.keys,n={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var a=1,o=r.length;o>a;++a){var s=i[a-1],l=r[a];s&&l&&(n[s.name]=l)}return n}function u(e){var n=b.current;g=f(),v=g&&n&&g.$$route===n.$$route&&t.equals(g.pathParams,n.pathParams)&&!g.reloadOnSearch&&!y,v||!n&&!g||i.$broadcast("$routeChangeStart",g,n).defaultPrevented&&e&&e.preventDefault()}function h(){var e=b.current,n=g;v?(e.params=n.params,t.copy(e.params,a),i.$broadcast("$routeUpdate",e)):(n||e)&&(y=!1,b.current=n,n&&n.redirectTo&&(t.isString(n.redirectTo)?r.path(m(n.redirectTo,n.params)).search(n.params).replace():r.url(n.redirectTo(n.pathParams,r.path(),r.search())).replace()),o.when(n).then(function(){if(n){var e,i,r=t.extend({},n.resolve);return t.forEach(r,function(e,i){r[i]=t.isString(e)?l.get(e):l.invoke(e,null,null,i)}),t.isDefined(e=n.template)?t.isFunction(e)&&(e=e(n.params)):t.isDefined(i=n.templateUrl)&&(t.isFunction(i)&&(i=i(n.params)),i=d.getTrustedResourceUrl(i),t.isDefined(i)&&(n.loadedTemplateUrl=i,e=c(i))),t.isDefined(e)&&(r.$template=e),o.all(r)}}).then(function(r){n==b.current&&(n&&(n.locals=r,t.copy(n.params,a)),i.$broadcast("$routeChangeSuccess",n,e))},function(t){n==b.current&&i.$broadcast("$routeChangeError",n,e,t)}))}function f(){var i,a;return t.forEach(n,function(n){!a&&(i=p(r.path(),n))&&(a=e(n,{params:t.extend({},r.search(),i),pathParams:i}),a.$$route=n)}),a||n[null]&&e(n[null],{params:{},pathParams:{}})}function m(e,i){var n=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)n.push(e);else{var r=e.match(/(\w+)(?:[?*])?(.*)/),a=r[1];n.push(i[a]),n.push(r[2]||""),delete i[a]}}),n.join("")}var g,v,y=!1,b={routes:n,reload:function(){y=!0,i.$evalAsync(function(){u(),h()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw s("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),r.path(m(this.current.$$route.originalPath,e)),r.search(e)}};return i.$on("$locationChangeStart",u),i.$on("$locationChangeSuccess",h),b}]}function n(){this.$get=function(){return{}}}function r(e,i,n){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,a,o,s,l){function c(){h&&(n.cancel(h),h=null),p&&(p.$destroy(),p=null),u&&(h=n.leave(u),h.then(function(){h=null}),u=null)}function d(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var d=r.$new(),h=e.current,g=l(d,function(e){n.enter(e,null,u||a).then(function(){!t.isDefined(f)||f&&!r.$eval(f)||i()}),c()});u=g,p=h.scope=d,p.$emit("$viewContentLoaded"),p.$eval(m)}else c()}var p,u,h,f=o.autoscroll,m=o.onload||"";r.$on("$routeChangeSuccess",d),d()}}}function a(e,t,i){return{restrict:"ECA",priority:-400,link:function(n,r){var a=i.current,o=a.locals;r.html(o.$template);var s=e(r.contents());if(a.controller){o.$scope=n;var l=t(a.controller,o);a.controllerAs&&(n[a.controllerAs]=l),r.data("$ngControllerController",l),r.children().data("$ngControllerController",l)}s(n)}}}var o=t.module("ngRoute",["ng"]).provider("$route",i),s=t.$$minErr("ngRoute");o.provider("$routeParams",n),o.directive("ngView",r),o.directive("ngView",a),r.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,i){function n(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var r=function(n,a,o){o=o||{};var s=e.defer(),l=r[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(){i.$apply(function(){n.unbind(l,c),s.resolve(n)})};return l&&n.bind(l,c),t(function(){angular.isString(a)?n.addClass(a):angular.isFunction(a)?a(n):angular.isObject(a)&&n.css(a),l||s.resolve(n)}),s.promise.cancel=function(){l&&n.unbind(l,c),s.reject("Transition cancelled")},s.promise},a=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=n(o),r.animationEndEventName=n(s),r}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,i,n){function r(t){function n(){c===r&&(c=void 0)}var r=e(i,t);return c&&c.cancel(),c=r,r.then(n,n),r}function a(){d?(d=!1,o()):(i.removeClass("collapse").addClass("collapsing"),r({height:i[0].scrollHeight+"px"}).then(o))}function o(){i.removeClass("collapsing"),i.addClass("collapse in"),i.css({height:"auto"})}function s(){d?(d=!1,l(),i.css({height:0})):(i.css({height:i[0].scrollHeight+"px"}),i[0].offsetWidth,i.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(l))}function l(){i.removeClass("collapsing"),i.addClass("collapse")}var c,d=!0;t.$watch(n.collapse,function(e){e?s():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,i){this.groups=[],this.closeOthers=function(n){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):i.closeOthers;r&&angular.forEach(this.groups,function(e){e!==n&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,i,n){n.addGroup(e),e.$watch("isOpen",function(t){t&&n.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,i,n,r){n.setHeading(r(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,i,n){e.$watch(function(){return n[i.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,i,n,r){e(function(){r.close()},parseInt(n.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,i){t.addClass("ng-binding").data("$binding",i.bindHtmlUnsafe),e.$watch(i.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,i,n){var r=n[0],a=n[1];a.$render=function(){t.toggleClass(r.activeClass,angular.equals(a.$modelValue,e.$eval(i.btnRadio)))},t.bind(r.toggleEvent,function(){var n=t.hasClass(r.activeClass);(!n||angular.isDefined(i.uncheckable))&&e.$apply(function(){a.$setViewValue(n?null:e.$eval(i.btnRadio)),a.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,i,n){function r(){return o(i.btnCheckboxTrue,!0)}function a(){return o(i.btnCheckboxFalse,!1)}function o(t,i){var n=e.$eval(t);return angular.isDefined(n)?n:i}var s=n[0],l=n[1];l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,r()))},t.bind(s.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?a():r()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,i,n){function r(){a();var t=+e.interval;!isNaN(t)&&t>0&&(s=i(o,t))}function a(){s&&(i.cancel(s),s=null)}function o(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var s,l,c=this,d=c.slides=e.slides=[],p=-1;c.currentSlide=null;var u=!1;c.select=e.select=function(i,a){function o(){u||(c.currentSlide&&angular.isString(a)&&!e.noTransition&&i.$element?(i.$element.addClass(a),i.$element[0].offsetWidth,angular.forEach(d,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(i,{direction:a,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:a,leaving:!0}),e.$currentTransition=n(i.$element,{}),function(t,i){e.$currentTransition.then(function(){s(t,i)},function(){s(t,i)})}(i,c.currentSlide)):s(i,c.currentSlide),c.currentSlide=i,p=l,r())}function s(t,i){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(i||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null
}var l=d.indexOf(i);void 0===a&&(a=l>p?"next":"prev"),i&&i!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){u=!0}),c.indexOfSlide=function(e){return d.indexOf(e)},e.next=function(){var t=(p+1)%d.length;return e.$currentTransition?void 0:c.select(d[t],"next")},e.prev=function(){var t=0>p-1?d.length-1:p-1;return e.$currentTransition?void 0:c.select(d[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",r),e.$on("$destroy",a),e.play=function(){l||(l=!0,r())},e.pause=function(){e.noPause||(l=!1,a())},c.addSlide=function(t,i){t.$element=i,d.push(t),1===d.length||t.active?(c.select(d[d.length-1]),1==d.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=d.indexOf(e);d.splice(t,1),d.length>0&&e.active?c.select(t>=d.length?d[t-1]:d[t]):p>t&&p--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,i,n){n.addSlide(e,t),e.$on("$destroy",function(){n.removeSlide(e)}),e.$watch("active",function(t){t&&n.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function i(e){var i=[],n=e.split("");return angular.forEach(r,function(t,r){var a=e.indexOf(r);if(a>-1){e=e.split(""),n[a]="("+t.regex+")",e[a]="$";for(var o=a+1,s=a+r.length;s>o;o++)n[o]="",e[o]="$";e=e.join(""),i.push({index:a,apply:t.apply})}}),{regex:new RegExp("^"+n.join("")+"$"),map:t(i,"index")}}function n(e,t,i){return 1===t&&i>28?29===i&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>i:!0}this.parsers={};var r={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,r){if(!angular.isString(t)||!r)return t;r=e.DATETIME_FORMATS[r]||r,this.parsers[r]||(this.parsers[r]=i(r));var a=this.parsers[r],o=a.regex,s=a.map,l=t.match(o);if(l&&l.length){for(var c,d={year:1900,month:0,date:1,hours:0},p=1,u=l.length;u>p;p++){var h=s[p-1];h.apply&&h.apply.call(d,l[p])}return n(d.year,d.month,d.date)&&(c=new Date(d.year,d.month,d.date,d.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function i(e,i){return e.currentStyle?e.currentStyle[i]:t.getComputedStyle?t.getComputedStyle(e)[i]:e.style[i]}function n(e){return"static"===(i(e,"position")||"static")}var r=function(t){for(var i=e[0],r=t.offsetParent||i;r&&r!==i&&n(r);)r=r.offsetParent;return r||i};return{position:function(t){var i=this.offset(t),n={top:0,left:0},a=r(t[0]);a!=e[0]&&(n=this.offset(angular.element(a)),n.top+=a.clientTop-a.scrollTop,n.left+=a.clientLeft-a.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:i.top-n.top,left:i.left-n.left}},offset:function(i){var n=i[0].getBoundingClientRect();return{width:n.width||i.prop("offsetWidth"),height:n.height||i.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,i,n){var r,a,o,s,l=i.split("-"),c=l[0],d=l[1]||"center";r=n?this.offset(e):this.position(e),a=t.prop("offsetWidth"),o=t.prop("offsetHeight");var p={center:function(){return r.left+r.width/2-a/2},left:function(){return r.left},right:function(){return r.left+r.width}},u={center:function(){return r.top+r.height/2-o/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":s={top:u[d](),left:p[c]()};break;case"left":s={top:u[d](),left:r.left-a};break;case"bottom":s={top:u[c](),left:p[d]()};break;default:s={top:r.top-o,left:p[d]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,i,n,r,a,o,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(i,r){l[i]=angular.isDefined(t[i])?8>r?n(t[i])(e.$parent):e.$parent.$eval(t[i]):s[i]}),angular.forEach(["minDate","maxDate"],function(n){t[n]?e.$parent.$watch(i(t[n]),function(e){l[n]=e?new Date(e):null,l.refreshView()}):l[n]=s[n]?new Date(s[n]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:a.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var i=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:i&&0===this.compare(e,i),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(i){return this.minDate&&this.compare(i,this.minDate)<0||this.maxDate&&this.compare(i,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:i,mode:e.datepickerMode})},this.split=function(e,t){for(var i=[];e.length>0;)i.push(e.splice(0,t));return i},e.select=function(t){if(e.datepickerMode===l.minMode){var i=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(i),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),i=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,i,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var d=function(){r(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",d),e.keydown=function(t){var i=e.keys[t.which];if(i&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===i||"space"===i){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),d()}else!t.ctrlKey||"up"!==i&&"down"!==i?(l.handleKeyDown(i,t),l.refreshView()):(e.toggleMode("up"===i?1:-1),d())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,i,n){var r=n[0],a=n[1];a&&r.init(a)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,i,n,r){function a(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){var i=new Array(t),n=new Date(e),r=0;for(n.setHours(12);t>r;)i[r++]=new Date(n),n.setDate(n.getDate()+1);return i}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1}t.showWeeks=r.showWeeks,r.step={months:1},r.element=i;var l=[31,28,31,30,31,30,31,31,30,31,30,31];r._refreshView=function(){var i=r.activeDate.getFullYear(),n=r.activeDate.getMonth(),a=new Date(i,n,1),l=r.startingDay-a.getDay(),c=l>0?7-l:-l,d=new Date(a);c>0&&d.setDate(-c+1);for(var p=o(d,42),u=0;42>u;u++)p[u]=angular.extend(r.createDateObject(p[u],r.formatDay),{secondary:p[u].getMonth()!==n,uid:t.uniqueId+"-"+u});t.labels=new Array(7);for(var h=0;7>h;h++)t.labels[h]={abbr:e(p[h].date,r.formatDayHeader),full:e(p[h].date,"EEEE")};if(t.title=e(r.activeDate,r.formatDayTitle),t.rows=r.split(p,7),t.showWeeks){t.weekNumbers=[];for(var f=s(t.rows[0][0].date),m=t.rows.length;t.weekNumbers.push(f++)<m;);}},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.handleKeyDown=function(e){var t=r.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getMonth()+("pageup"===e?-1:1);r.activeDate.setMonth(i,1),t=Math.min(a(r.activeDate.getFullYear(),r.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=a(r.activeDate.getFullYear(),r.activeDate.getMonth()));r.activeDate.setDate(t)},r.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,i,n,r){r.step={years:1},r.element=i,r._refreshView=function(){for(var i=new Array(12),n=r.activeDate.getFullYear(),a=0;12>a;a++)i[a]=angular.extend(r.createDateObject(new Date(n,a,1),r.formatMonth),{uid:t.uniqueId+"-"+a});t.title=e(r.activeDate,r.formatMonthTitle),t.rows=r.split(i,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e){var t=r.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var i=r.activeDate.getFullYear()+("pageup"===e?-1:1);r.activeDate.setFullYear(i)}else"home"===e?t=0:"end"===e&&(t=11);r.activeDate.setMonth(t)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,i,n){function r(e){return parseInt((e-1)/a,10)*a+1}var a=n.yearRange;n.step={years:a},n.element=t,n._refreshView=function(){for(var t=new Array(a),i=0,o=r(n.activeDate.getFullYear());a>i;i++)t[i]=angular.extend(n.createDateObject(new Date(o+i,0,1),n.formatYear),{uid:e.uniqueId+"-"+i});e.title=[t[0].label,t[a-1].label].join(" - "),e.rows=n.split(t,5)},n.compare=function(e,t){return e.getFullYear()-t.getFullYear()},n.handleKeyDown=function(e){var t=n.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*n.step.years:"home"===e?t=r(n.activeDate.getFullYear()):"end"===e&&(t=r(n.activeDate.getFullYear())+a-1),n.activeDate.setFullYear(t)},n.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,i,n,r,a,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(s,l,c,d){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e){if(e){if(angular.isDate(e)&&!isNaN(e))return d.$setValidity("date",!0),e;if(angular.isString(e)){var t=a.parse(e,h)||new Date(e);return isNaN(t)?void d.$setValidity("date",!1):(d.$setValidity("date",!0),t)}return void d.$setValidity("date",!1)}return d.$setValidity("date",!0),null}var h,f=angular.isDefined(c.closeOnDateSelection)?s.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,m=angular.isDefined(c.datepickerAppendToBody)?s.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;s.showButtonBar=angular.isDefined(c.showButtonBar)?s.$parent.$eval(c.showButtonBar):o.showButtonBar,s.getText=function(e){return s[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){h=e||o.datepickerPopup,d.$render()});var g=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");g.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(g.children()[0]);c.datepickerOptions&&angular.forEach(s.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(p(t),e)}),s.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var i=t(c[e]);if(s.$parent.$watch(i,function(t){s.watchData[e]=t}),v.attr(p(e),"watchData."+e),"datepickerMode"===e){var n=i.assign;s.$watch("watchData."+e,function(e,t){e!==t&&n(s.$parent,e)})}}}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.$parsers.unshift(u),s.dateSelection=function(e){angular.isDefined(e)&&(s.date=e),d.$setViewValue(s.date),d.$render(),f&&(s.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){s.$apply(function(){s.date=d.$modelValue})}),d.$render=function(){var e=d.$viewValue?r(d.$viewValue,h):"";l.val(e),s.date=u(d.$modelValue)};var y=function(e){s.isOpen&&e.target!==l[0]&&s.$apply(function(){s.isOpen=!1})},b=function(e){s.keydown(e)};l.bind("keydown",b),s.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=m?n.offset(l):n.position(l),s.position.top=s.position.top+l.prop("offsetHeight"),i.bind("click",y)):i.unbind("click",y)}),s.select=function(e){if("today"===e){var t=new Date;angular.isDate(d.$modelValue)?(e=new Date(d.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,l[0].focus()};var w=e(g)(s);g.remove(),m?i.find("body").append(w):l.after(w),s.$on("$destroy",function(){w.remove(),l.unbind("keydown",b),i.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(r){t||(e.bind("click",i),e.bind("keydown",n)),t&&t!==r&&(t.isOpen=!1),t=r},this.close=function(r){t===r&&(t=null,e.unbind("click",i),e.unbind("keydown",n))};var i=function(e){if(t){var i=t.getToggleElement();e&&i&&i[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},n=function(e){27===e.which&&(t.focusToggleElement(),i())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,i,n,r,a){var o,s=this,l=e.$new(),c=n.openClass,d=angular.noop,p=t.onToggle?i(t.onToggle):angular.noop;this.init=function(n){s.$element=n,t.isOpen&&(o=i(t.isOpen),d=o.assign,e.$watch(o,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return s.toggleElement},l.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},l.$watch("isOpen",function(t,i){a[t?"addClass":"removeClass"](s.$element,c),t?(l.focusToggleElement(),r.open(l)):r.close(l),d(e,t),angular.isDefined(t)&&t!==i&&p(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,i,n){n.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,i,n){if(n){n.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||i.disabled||e.$apply(function(){n.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(n.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,i){e.push({key:t,value:i})},get:function(t){for(var i=0;i<e.length;i++)if(t==e[i].key)return e[i]},keys:function(){for(var t=[],i=0;i<e.length;i++)t.push(e[i].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var i=-1,n=0;n<e.length;n++)if(t==e[n].key){i=n;break}return e.splice(i,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,i,n){t.backdropClass=n.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(i,n,r){n.addClass(r.windowClass||""),i.size=r.size,t(function(){i.animate=!0,n[0].querySelectorAll("[autofocus]").length||n[0].focus()}),i.close=function(t){var i=e.getTop();i&&i.value.backdrop&&"static"!=i.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(i.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,i,n,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,i,n,r,a){function o(){for(var e=-1,t=h.keys(),i=0;i<t.length;i++)h.get(t[i]).value.backdrop&&(e=i);return e}function s(e){var t=i.find("body").eq(0),n=h.get(e).value;h.remove(e),c(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(u,h.length()>0),l()})}function l(){if(d&&-1==o()){var e=p;c(d,p,150,function(){e.$destroy(),e=null}),d=void 0,p=void 0}}function c(i,n,r,a){function o(){o.done||(o.done=!0,i.remove(),a&&a())}n.animate=!1;var s=e.transitionEndEventName;if(s){var l=t(o,r);i.bind(s,function(){t.cancel(l),o(),n.$apply()})}else t(o)}var d,p,u="modal-open",h=a.createNew(),f={};return r.$watch(o,function(e){p&&(p.index=e)}),i.bind("keydown",function(e){var t;27===e.which&&(t=h.top(),t&&t.value.keyboard&&(e.preventDefault(),r.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){h.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var a=i.find("body").eq(0),s=o();if(s>=0&&!d){p=r.$new(!0),p.index=s;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),d=n(l)(p),a.append(d)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:h.length()-1,animate:"animate"}).html(t.content);var f=n(c)(t.scope);h.top().value.modalDomEl=f,a.append(f),a.addClass(u)},f.close=function(e,t){var i=h.get(e);i&&(i.value.deferred.resolve(t),s(e))},f.dismiss=function(e,t){var i=h.get(e);i&&(i.value.deferred.reject(t),s(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return h.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,i,n,r,a,o,s){function l(e){return e.template?n.when(e.template):r.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:a}).then(function(e){return e.data})}function c(e){var i=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&i.push(n.when(t.invoke(e)))}),i}var d={};return d.open=function(t){var r=n.defer(),a=n.defer(),d={result:r.promise,opened:a.promise,close:function(e){s.close(d,e)},dismiss:function(e){s.dismiss(d,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=n.all([l(t)].concat(c(t.resolve)));return p.then(function(e){var n=(t.scope||i).$new();n.$close=d.close,n.$dismiss=d.dismiss;var a,l={},c=1;t.controller&&(l.$scope=n,l.$modalInstance=d,angular.forEach(t.resolve,function(t,i){l[i]=e[c++]}),a=o(t.controller,l),t.controllerAs&&(n[t.controllerAs]=a)),s.open(d,{scope:n,deferred:r,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){r.reject(e)}),p.then(function(){a.resolve(!0)},function(){a.reject(!1)}),d},d}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,i){var n=this,r={$setViewValue:angular.noop},a=t.numPages?i(t.numPages).assign:angular.noop;this.init=function(a,o){r=a,this.config=o,r.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(i(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(i,n,r,a){function o(e,t,i){return{number:e,text:t,active:i}}function s(e,t){var i=[],n=1,r=t,a=angular.isDefined(d)&&t>d;a&&(p?(n=Math.max(e-Math.floor(d/2),1),r=n+d-1,r>t&&(r=t,n=r-d+1)):(n=(Math.ceil(e/d)-1)*d+1,r=Math.min(n+d-1,t)));for(var s=n;r>=s;s++){var l=o(s,s,s===e);i.push(l)}if(a&&!p){if(n>1){var c=o(n-1,"...",!1);i.unshift(c)}if(t>r){var u=o(r+1,"...",!1);i.push(u)}}return i}var l=a[0],c=a[1];if(c){var d=angular.isDefined(r.maxSize)?i.$parent.$eval(r.maxSize):t.maxSize,p=angular.isDefined(r.rotate)?i.$parent.$eval(r.rotate):t.rotate;i.boundaryLinks=angular.isDefined(r.boundaryLinks)?i.$parent.$eval(r.boundaryLinks):t.boundaryLinks,i.directionLinks=angular.isDefined(r.directionLinks)?i.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&i.$parent.$watch(e(r.maxSize),function(e){d=parseInt(e,10),l.render()});var u=l.render;l.render=function(){u(),i.page>0&&i.page<=i.totalPages&&(i.pages=s(i.page,i.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,i,n,r){var a=r[0],o=r[1];o&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,a.init(o,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,i="-";return e.replace(t,function(e,t){return(t?i:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},i={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(i,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(r,a,o,s,l,c){return function(r,d,p){function u(e){var t=e||h.trigger||p,n=i[t]||t;return{show:t,hide:n}}var h=angular.extend({},t,n),f=e(r),m=c.startSymbol(),g=c.endSymbol(),v="<div "+f+'-popup title="'+m+"title"+g+'" content="'+m+"content"+g+'" placement="'+m+"placement"+g+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var e=a(v);return function(t,i,n){function a(){I.isOpen?p():c()}function c(){(!_||t.$eval(n[d+"Enable"]))&&(y(),I.popupDelay?C||(C=o(f,I.popupDelay,!1),C.then(function(e){e()})):f()())}function p(){t.$apply(function(){m()})}function f(){return C=null,E&&(o.cancel(E),E=null),I.content?(g(),$.css({top:0,left:0,display:"block"}),I.$digest(),M(),I.isOpen=!0,I.$digest(),M):angular.noop}function m(){I.isOpen=!1,o.cancel(C),C=null,I.animation?E||(E=o(v,500)):v()}function g(){$&&v(),k=I.$new(),$=e(k,function(e){T?s.find("body").append(e):i.after(e)})}function v(){E=null,$&&($.remove(),$=null),k&&(k.$destroy(),k=null)}function y(){b(),w()}function b(){var e=n[d+"Placement"];I.placement=angular.isDefined(e)?e:h.placement}function w(){var e=n[d+"PopupDelay"],t=parseInt(e,10);I.popupDelay=isNaN(t)?h.popupDelay:t}function x(){var e=n[d+"Trigger"];D(),S=u(e),S.show===S.hide?i.bind(S.show,a):(i.bind(S.show,c),i.bind(S.hide,p))}var $,k,E,C,T=angular.isDefined(h.appendToBody)?h.appendToBody:!1,S=u(void 0),_=angular.isDefined(n[d+"Enable"]),I=t.$new(!0),M=function(){var e=l.positionElements(i,$,I.placement,T);e.top+="px",e.left+="px",$.css(e)};I.isOpen=!1,n.$observe(r,function(e){I.content=e,!e&&I.isOpen&&m()}),n.$observe(d+"Title",function(e){I.title=e});var D=function(){i.unbind(S.show,c),i.unbind(S.hide,p)};x();var A=t.$eval(n[d+"Animation"]);I.animation=angular.isDefined(A)?!!A:h.animation;var O=t.$eval(n[d+"AppendToBody"]);T=angular.isDefined(O)?O:T,T&&t.$on("$locationChangeSuccess",function(){I.isOpen&&m()}),t.$on("$destroy",function(){o.cancel(E),o.cancel(C),D(),v(),I=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,i){var n=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):i.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):i.max,this.addBar=function(t,i){r||i.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(i){t.percent=+(100*i/e.max).toFixed(2)}),t.$on("$destroy",function(){i=null,n.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,i,n){n.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,i,n){n.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,i){var n={$setViewValue:angular.noop};this.init=function(r){n=r,n.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):i.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):i.stateOff;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):i.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,i=e.length;i>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(n.$setViewValue(t),n.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=n.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=n.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,i,n){var r=n[0],a=n[1];a&&r.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,i=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(i,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){i.push(e),1===i.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var r=i.indexOf(e);if(e.active&&i.length>1&&!n){var a=r==i.length-1?r-1:r+1;t.select(i[a])}i.splice(r,1)};var n;e.$on("$destroy",function(){n=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,i){e.vertical=angular.isDefined(i.vertical)?e.$parent.$eval(i.vertical):!1,e.justified=angular.isDefined(i.justified)?e.$parent.$eval(i.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,i,n){return function(t,i,r,a){t.$watch("active",function(e){e&&a.select(t)
}),t.disabled=!1,r.disabled&&t.$parent.$watch(e(r.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=n}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,i,n){var r=t.$eval(n.tabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:i.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,i,n,r,a){function o(){var t=parseInt(e.hours,10),i=e.showMeridian?t>0&&13>t:t>=0&&24>t;return i?(e.showMeridian&&(12===t&&(t=0),e.meridian===m[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){d(),f.$setViewValue(new Date(h)),p(e)}function d(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var i=h.getHours(),n=h.getMinutes();e.showMeridian&&(i=0===i||12===i?12:i%12),e.hours="h"===t?i:l(i),e.minutes="m"===t?n:l(n),e.meridian=h.getHours()<12?m[0]:m[1]}function u(e){var t=new Date(h.getTime()+6e4*e);h.setHours(t.getHours(),t.getMinutes()),c()}var h=new Date,f={$setViewValue:angular.noop},m=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):a.meridians||r.DATETIME_FORMATS.AMPMS;this.init=function(i,n){f=i,f.$render=this.render;var r=n.eq(0),o=n.eq(1),s=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):a.mousewheel;s&&this.setupMousewheelEvents(r,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):a.readonlyInput,this.setupInputEvents(r,o)};var g=a.hourStep;t.hourStep&&e.$parent.$watch(i(t.hourStep),function(e){g=parseInt(e,10)});var v=a.minuteStep;t.minuteStep&&e.$parent.$watch(i(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=a.showMeridian,t.showMeridian&&e.$parent.$watch(i(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var i=o(),n=s();angular.isDefined(i)&&angular.isDefined(n)&&(h.setHours(i),c())}else p()}),this.setupMousewheelEvents=function(t,i){var n=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),i.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,i){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var n=function(t,i){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(i)&&(e.invalidMinutes=i)};e.updateHours=function(){var e=o();angular.isDefined(e)?(h.setHours(e),c("h")):n(!0)},t.bind("blur",function(){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=s();angular.isDefined(e)?(h.setMinutes(e),c("m")):n(void 0,!0)},i.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(h=e),d(),p())},e.incrementHours=function(){u(60*g)},e.decrementHours=function(){u(60*-g)},e.incrementMinutes=function(){u(v)},e.decrementMinutes=function(){u(-v)},e.toggleMeridian=function(){u(720*(h.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,i,n){var r=n[0],a=n[1];a&&r.init(a,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(i){var n=i.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+i+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,i,n,r,a,o){var s=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,p){var u,h=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,m=l.$eval(d.typeaheadEditable)!==!1,g=t(d.typeaheadLoading).assign||angular.noop,v=t(d.typeaheadOnSelect),y=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,b=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,w=l.$eval(d.typeaheadFocusFirst)!==!1,x=t(d.ngModel).assign,$=o.parse(d.typeahead),k=l.$new();l.$on("$destroy",function(){k.$destroy()});var E="typeahead-"+k.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":E});var C=angular.element("<div typeahead-popup></div>");C.attr({id:E,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&C.attr("template-url",d.typeaheadTemplateUrl);var T=function(){k.matches=[],k.activeIdx=-1,c.attr("aria-expanded",!1)},S=function(e){return E+"-option-"+e};k.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",S(e))});var _=function(e){var t={$viewValue:e};g(l,!0),i.when($.source(l,t)).then(function(i){var n=e===p.$viewValue;if(n&&u)if(i.length>0){k.activeIdx=w?0:-1,k.matches.length=0;for(var r=0;r<i.length;r++)t[$.itemName]=i[r],k.matches.push({id:S(r),label:$.viewMapper(k,t),model:i[r]});k.query=e,k.position=b?a.offset(c):a.position(c),k.position.top=k.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else T();n&&g(l,!1)},function(){T(),g(l,!1)})};T(),k.query=void 0;var I,M=function(e){I=n(function(){_(e)},f)},D=function(){I&&n.cancel(I)};p.$parsers.unshift(function(e){return u=!0,e&&e.length>=h?f>0?(D(),M(e)):_(e):(g(l,!1),D(),T()),m?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,i,n={};return y?(n.$model=e,y(l,n)):(n[$.itemName]=e,t=$.viewMapper(l,n),n[$.itemName]=void 0,i=$.viewMapper(l,n),t!==i?t:e)}),k.select=function(e){var t,i,r={};r[$.itemName]=i=k.matches[e].model,t=$.modelMapper(l,r),x(l,t),p.$setValidity("editable",!0),v(l,{$item:i,$model:t,$label:$.viewMapper(l,r)}),T(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==k.matches.length&&-1!==s.indexOf(e.which)&&(-1!=k.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(k.activeIdx=(k.activeIdx+1)%k.matches.length,k.$digest()):38===e.which?(k.activeIdx=(k.activeIdx>0?k.activeIdx:k.matches.length)-1,k.$digest()):13===e.which||9===e.which?k.$apply(function(){k.select(k.activeIdx)}):27===e.which&&(e.stopPropagation(),T(),k.$digest()))}),c.bind("blur",function(){u=!1});var A=function(e){c[0]!==e.target&&(T(),k.$digest())};r.bind("click",A),l.$on("$destroy",function(){r.unbind("click",A),b&&O.remove()});var O=e(C)(k);b?r.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,i){e.templateUrl=i.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,i,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,a,o){var s=n(o.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";e.get(s,{cache:t}).success(function(e){a.replaceWith(i(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,i){return i?(""+t).replace(new RegExp(e(i),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),function(){var e;e=angular.module("ui.bootstrap.showErrors",[]),e.directive("showErrors",["$timeout","showErrorsConfig","$interpolate",function(e,t,i){var n,r,a;return r=function(e){var i;return i=t.trigger,e&&null!=e.trigger&&(i=e.trigger),i},n=function(e){var i;return i=t.showSuccess,e&&null!=e.showSuccess&&(i=e.showSuccess),i},a=function(t,a,o,s){var l,c,d,p,u,h,f,m;if(l=!1,u=t.$eval(o.showErrors),h=n(u),m=r(u),c=a[0].querySelector(".form-control[name]"),p=angular.element(c),d=i(p.attr("name")||"")(t),!d)throw"show-errors element has no child input elements with a 'name' attribute and a 'form-control' class";return p.bind(m,function(){return l=!0,f(s[d].$invalid)}),t.$watch(function(){return s[d]&&s[d].$invalid},function(e){return l?f(e):void 0}),t.$on("show-errors-check-validity",function(){return f(s[d].$invalid)}),t.$on("show-errors-reset",function(){return e(function(){return a.removeClass("has-error"),a.removeClass("has-success"),l=!1},0,!1)}),f=function(e){return a.toggleClass("has-error",e),h?a.toggleClass("has-success",!e):void 0}},{restrict:"A",require:"^form",compile:function(e,t){if(-1===t.showErrors.indexOf("skipFormGroupCheck")&&!e.hasClass("form-group")&&!e.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return a}}}]),e.provider("showErrorsConfig",function(){var e,t;e=!1,t="blur",this.showSuccess=function(t){return e=t},this.trigger=function(e){return t=e},this.$get=function(){return{showSuccess:e,trigger:t}}})}.call(this),function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(i,n){var r=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",i),t.retryAll(r)},loginCancelled:function(i,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",i)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,i){return{responseError:function(n){if(!n.config.ignoreAuthModule)switch(n.status){case 401:var r=t.defer();return i.append(n.config,r),e.$broadcast("event:auth-loginRequired",n),r.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function r(e){n.resolve(e)}function a(e){n.reject(e)}i=i||e.get("$http"),i(t).then(r,a)}var i,n=[];return{append:function(e,t){n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var i=0;i<n.length;++i)t(e(n[i].config),n[i].deferred);n=[]}}}])}(),angular.module("angular-toArrayFilter",[]).filter("toArray",function(){return function(e,t){return Object.keys(e).map(t===!1?function(t){return e[t]}:function(t){return Object.defineProperty(e[t],"$key",{enumerable:!1,value:t})})}}),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,i,n,r,a,o){function s(){n.cancel(c),o.complete(),p=0,d=0}function l(t){var n,r=i.get("$http"),a=e.defaults;!t.cache&&!a.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(n=angular.isObject(t.cache)?t.cache:angular.isObject(a.cache)?a.cache:r);var o=void 0!==n?void 0!==n.get(t.url):!1;return void 0!==t.cached&&o!==t.cached?t.cached:(t.cached=o,o)}var c,d=0,p=0,u=o.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||l(e)||(r.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===d&&(c=n(function(){o.start()},u)),d++,o.set(p/d)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(p++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),p>=d?s():o.set(p/d)),e):(a.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(p++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),p>=d?s():o.set(p/d)),t.reject(e)):(a.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,i,n){function r(){d||(d=e.get("$animate"));var r=t.find(h).eq(0);i.cancel(u),v||(n.$broadcast("cfpLoadingBar:started"),v=!0,w&&d.enter(f,r,angular.element(r[0].lastChild)),b&&d.enter(g,r,angular.element(r[0].lastChild)),a(x))}function a(e){if(v){var t=100*e+"%";m.css("width",t),y=e,i.cancel(p),p=i(function(){o()},250)}}function o(){if(!(s()>=1)){var e=0,t=s();e=t>=0&&.25>t?(3*Math.random()+3)/100:t>=.25&&.65>t?3*Math.random()/100:t>=.65&&.9>t?2*Math.random()/100:t>=.9&&.99>t?.005:0;var i=s()+e;a(i)}}function s(){return y}function l(){y=0,v=!1}function c(){d||(d=e.get("$animate")),n.$broadcast("cfpLoadingBar:completed"),a(1),i.cancel(u),u=i(function(){var e=d.leave(f,l);e&&e.then&&e.then(l),d.leave(g)},500)}var d,p,u,h=this.parentSelector,f=angular.element(this.loadingBarTemplate),m=f.find("div").eq(0),g=angular.element(this.spinnerTemplate),v=!1,y=0,b=this.includeSpinner,w=this.includeBar,x=this.startSize;return{start:r,set:a,status:s,inc:o,complete:c,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),!function(e,t){"use strict";e.module("smart-table",[]).run(["$templateCache",function(e){e.put("template/smart-table/pagination.html",'<nav ng-if="pages.length >= 2"><ul class="pagination"><li ng-repeat="page in pages" ng-class="{active: page==currentPage}"><a ng-click="selectPage(page)">{{page}}</a></li></ul></nav>')}]),e.module("smart-table").constant("stConfig",{pagination:{template:"template/smart-table/pagination.html",itemsByPage:10,displayedPages:5},search:{delay:400},select:{mode:"single",selectedClass:"st-selected"},sort:{ascentClass:"st-sort-ascent",descentClass:"st-sort-descent"}}),e.module("smart-table").controller("stTableController",["$scope","$parse","$filter","$attrs",function(i,n,r,a){function o(e){return e?[].concat(e):[]}function s(){g=o(l(i)),y===!0&&b.pipe()}var l,c,d,p=a.stTable,u=n(p),h=u.assign,f=r("orderBy"),m=r("filter"),g=o(u(i)),v={sort:{},search:{},pagination:{start:0}},y=!0,b=this;
a.stSafeSrc&&(l=n(a.stSafeSrc),i.$watch(function(){var e=l(i);return e?e.length:0},function(e){e!==g.length&&s()}),i.$watch(function(){return l(i)},function(e,t){e!==t&&s()})),this.sortBy=function(t,i){return v.sort.predicate=t,v.sort.reverse=i===!0,e.isFunction(t)?v.sort.functionName=t.name:delete v.sort.functionName,v.pagination.start=0,this.pipe()},this.search=function(t,i){var n=v.search.predicateObject||{},r=i?i:"$";return t=e.isString(t)?t.trim():t,n[r]=t,t||delete n[r],v.search.predicateObject=n,v.pagination.start=0,this.pipe()},this.pipe=function(){var e,n=v.pagination;c=v.search.predicateObject?m(g,v.search.predicateObject):g,v.sort.predicate&&(c=f(c,v.sort.predicate,v.sort.reverse)),n.number!==t&&(n.numberOfPages=c.length>0?Math.ceil(c.length/n.number):1,n.start=n.start>=c.length?(n.numberOfPages-1)*n.number:n.start,e=c.slice(n.start,n.start+parseInt(n.number))),h(i,e||c)},this.select=function(e,i){var n=g,r=n.indexOf(e);-1!==r&&("single"===i?(e.isSelected=e.isSelected!==!0,d&&(d.isSelected=!1),d=e.isSelected===!0?e:t):n[r].isSelected=!n[r].isSelected)},this.slice=function(e,t){return v.pagination.start=e,v.pagination.number=t,this.pipe()},this.tableState=function(){return v},this.getFilteredCollection=function(){return c||g},this.setFilterFunction=function(e){m=r(e)},this.setSortFunction=function(e){f=r(e)},this.preventPipeOnWatch=function(){y=!1}}]).directive("stTable",function(){return{restrict:"A",controller:"stTableController",link:function(e,t,i,n){i.stSetFilter&&n.setFilterFunction(i.stSetFilter),i.stSetSort&&n.setSortFunction(i.stSetSort)}}}),e.module("smart-table").directive("stSearch",["stConfig","$timeout",function(e,t){return{require:"^stTable",scope:{predicate:"=?stSearch"},link:function(i,n,r,a){var o=a,s=null,l=r.stDelay||e.search.delay;i.$watch("predicate",function(e,t){e!==t&&(a.tableState().search={},o.search(n[0].value||"",e))}),i.$watch(function(){return a.tableState().search},function(e){var t=i.predicate||"$";e.predicateObject&&e.predicateObject[t]!==n[0].value&&(n[0].value=e.predicateObject[t]||"")},!0),n.bind("input",function(e){e=e.originalEvent||e,null!==s&&t.cancel(s),s=t(function(){o.search(e.target.value,i.predicate||""),s=null},l)})}}}]),e.module("smart-table").directive("stSelectRow",["stConfig",function(e){return{restrict:"A",require:"^stTable",scope:{row:"=stSelectRow"},link:function(t,i,n,r){var a=n.stSelectMode||e.select.mode;i.bind("click",function(){t.$apply(function(){r.select(t.row,a)})}),t.$watch("row.isSelected",function(t){t===!0?i.addClass(e.select.selectedClass):i.removeClass(e.select.selectedClass)})}}}]),e.module("smart-table").directive("stSort",["stConfig","$parse",function(i,n){return{restrict:"A",require:"^stTable",link:function(r,a,o,s){function l(){u++,d=e.isFunction(p(r))?p(r):o.stSort,u%3===0&&o.stSkipNatural===t?(u=0,s.tableState().sort={},s.tableState().pagination.start=0,s.pipe()):s.sortBy(d,u%2===0)}var c,d=o.stSort,p=n(d),u=0,h=o.stClassAscent||i.sort.ascentClass,f=o.stClassDescent||i.sort.descentClass,m=[h,f];o.stSortDefault&&(c=r.$eval(o.stSortDefault)!==t?r.$eval(o.stSortDefault):o.stSortDefault),a.bind("click",function(){d&&r.$apply(l)}),c&&(u="reverse"===c?1:0,l()),r.$watch(function(){return s.tableState().sort},function(e){e.predicate!==d?(u=0,a.removeClass(h).removeClass(f)):(u=e.reverse===!0?2:1,a.removeClass(m[u%2]).addClass(m[u-1]))},!0)}}}]),e.module("smart-table").directive("stPagination",["stConfig",function(e){return{restrict:"EA",require:"^stTable",scope:{stItemsByPage:"=?",stDisplayedPages:"=?",stPageChange:"&"},templateUrl:function(t,i){return i.stTemplate?i.stTemplate:e.pagination.template},link:function(t,i,n,r){function a(){var e,i,n=r.tableState().pagination,a=1,o=t.currentPage;for(t.currentPage=Math.floor(n.start/n.number)+1,a=Math.max(a,t.currentPage-Math.abs(Math.floor(t.stDisplayedPages/2))),e=a+t.stDisplayedPages,e>n.numberOfPages&&(e=n.numberOfPages+1,a=Math.max(1,e-t.stDisplayedPages)),t.pages=[],t.numPages=n.numberOfPages,i=a;e>i;i++)t.pages.push(i);o!==t.currentPage&&t.stPageChange({newPage:t.currentPage})}t.stItemsByPage=t.stItemsByPage?+t.stItemsByPage:e.pagination.itemsByPage,t.stDisplayedPages=t.stDisplayedPages?+t.stDisplayedPages:e.pagination.displayedPages,t.currentPage=1,t.pages=[],t.$watch(function(){return r.tableState().pagination},a,!0),t.$watch("stItemsByPage",function(e,i){e!==i&&t.selectPage(1)}),t.$watch("stDisplayedPages",a),t.selectPage=function(e){e>0&&e<=t.numPages&&r.slice((e-1)*t.stItemsByPage,t.stItemsByPage)},r.tableState().pagination.number||r.slice(0,t.stItemsByPage)}}}]),e.module("smart-table").directive("stPipe",function(){return{require:"stTable",scope:{stPipe:"="},link:{pre:function(t,i,n,r){e.isFunction(t.stPipe)&&(r.preventPipeOnWatch(),r.pipe=function(){return t.stPipe(r.tableState(),r)})},post:function(e,t,i,n){n.pipe()}}}})}(angular),!function(){"use strict";angular.module("ui.sortable",[]).constant("sortableConfig",{itemClass:"sortable-item",handleClass:"sortable-handle",placeHolderClass:"sortable-placeholder",dragClass:"sortable-drag",hiddenClass:"sortable-hidden"})}(),function(){"use strict";var e=angular.module("ui.sortable");e.factory("$helper",["$document","$window",function(e,t){return{height:function(e){return e.prop("offsetHeight")},width:function(e){return e.prop("offsetWidth")},offset:function(i){var n=i[0].getBoundingClientRect();return{width:n.width||i.prop("offsetWidth"),height:n.height||i.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return void 0!==e.touches&&e.touches.length>1?t=!0:void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&e.originalEvent.touches.length>1&&(t=!0),t},positionStarted:function(e,t){var i={};return i.offsetX=e.pageX-this.offset(t).left,i.offsetY=e.pageY-this.offset(t).top,i.startX=i.lastX=e.pageX,i.startY=i.lastY=e.pageY,i.nowX=i.nowY=i.distX=i.distY=i.dirAx=0,i.dirX=i.dirY=i.lastDirX=i.lastDirY=i.distAxX=i.distAxY=0,i},calculatePosition:function(e,t){e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=t.pageX,e.nowY=t.pageY,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1;var i=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==i?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=i},movePosition:function(e,t,i,n){var r;t.x=e.pageX-i.offsetX,t.y=e.pageY-i.offsetY,n&&(r=this.offset(n),t.x<r.left?t.x=r.left:t.x>=r.width+r.left-this.offset(t).width&&(t.x=r.width+r.left-this.offset(t).width),t.y<r.top?t.y=r.top:t.y>=r.height+r.top-this.offset(t).height&&(t.y=r.height+r.top-this.offset(t).height)),t.css({left:t.x+"px",top:t.y+"px"}),this.calculatePosition(i,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},moveTo:function(e,t){this.parent=e,this.isSameParent()&&this.source.index()<t&&(t-=1),this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableController",["$scope",function(e){this.scope=e,e.modelValue=null,e.callbacks=null,e.type="sortable",e.options={},e.insertItem=function(t,i){e.safeApply(function(){e.modelValue.splice(t,0,i)})},e.removeItem=function(t){var i=null;return t>-1&&e.safeApply(function(){i=e.modelValue.splice(t,1)[0]}),i},e.isEmpty=function(){return e.modelValue&&0===e.modelValue.length},e.accept=function(t,i){return e.callbacks.accept(t,i)},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}}]),e.directive("sortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(e,t,i,n){var r,a;r=n,r&&(r.$render=function(){r.$modelValue&&angular.isArray(r.$modelValue)||r.$setViewValue([]),e.modelValue=r.$modelValue},e.element=t,a={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragCancel:null,dragEnd:null},a.accept=function(){return!0},a.orderChanged=function(){},a.itemMoved=function(){},a.dragStart=function(){},a.dragCancel=function(){},a.dragEnd=function(){},e.$watch(i.sortable,function(t){angular.forEach(t,function(t,i){a[i]?"function"==typeof t&&(a[i]=t):e.options[i]=t}),e.callbacks=a},!0))}}})}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemHandleController",["$scope",function(e){this.scope=e,e.itemScope=null,e.type="handle"}]),e.directive("sortableItemHandle",["sortableConfig","$helper","$window","$document",function(e,t,i,n){return{require:"^sortableItem",scope:!0,restrict:"A",controller:"ui.sortable.sortableItemHandleController",link:function(r,a,o,s){function l(e,t){e[0].parentNode.insertBefore(u[0],e[0]),m.moveTo(t.sortableScope,t.index())}function c(e,t){e.after(u),m.moveTo(t.sortableScope,t.index()+1)}function d(){h.replaceWith(r.itemScope.element),u.remove(),p.remove(),p=null,_=!1,g.css("cursor","")}var p,u,h,f,m,g,v,y,b,w,x,$,k,E,C,T,S,_;S=i.hasOwnProperty("ontouchstart"),e.handleClass&&a.addClass(e.handleClass),r.itemScope=s.scope,v=function(i){var a,o;(S||2!==i.button&&3!==i.which)&&(S&&t.isTouchInvalid(i)||!_&&x(i)&&(_=!0,i.preventDefault(),a=t.eventObj(i),g=angular.element(angular.element(n[0].querySelector(r.sortableScope.options.containment)).length>0?n[0].querySelector(r.sortableScope.options.containment):n[0].body),g.css("cursor","move"),m=t.dragItem(r),o=r.itemScope.element.prop("tagName"),p=angular.element(n[0].createElement(r.sortableScope.element.prop("tagName"))).addClass(r.sortableScope.element.attr("class")).addClass(e.dragClass),p.css("width",t.width(r.itemScope.element)+"px"),p.css("height",t.height(r.itemScope.element)+"px"),u=angular.element(n[0].createElement(o)).addClass(e.placeHolderClass),u.css("height",t.height(r.itemScope.element)+"px"),h=angular.element(n[0].createElement(o)),e.hiddenClass&&h.addClass(e.hiddenClass),f=t.positionStarted(a,r.itemScope.element),r.itemScope.element.after(u),r.itemScope.element.after(h),p.append(r.itemScope.element),angular.element(n[0].body).append(p),t.movePosition(a,p,f),r.sortableScope.$apply(function(){r.callbacks.dragStart(m.eventArgs())}),C()))},x=function(e){var i,n,r;if(i=angular.element(e.target),n=i.scope(),r=!0,!n||!n.type||"handle"!==n.type)return!1;for(;r&&i[0]!==a[0];)t.noDrag(i)&&(r=!1),i=i.parent();return r},y=function(a){var o,s,d,h,v;if((!S||!t.isTouchInvalid(a))&&_&&p){if(a.preventDefault(),o=t.eventObj(a),t.movePosition(o,p,f,g),s=o.pageX-n[0].documentElement.scrollLeft,d=o.pageY-(i.pageYOffset||n[0].documentElement.scrollTop),p.addClass(e.hiddenClass),n[0].elementFromPoint(s,d),v=angular.element(n[0].elementFromPoint(s,d)),p.removeClass(e.hiddenClass),h=v.scope(),!h||!h.type)return;if("handle"===h.type&&(h=h.itemScope),"item"!==h.type&&"sortable"!==h.type)return;"item"===h.type&&(v=h.element,h.sortableScope.accept(r,h.sortableScope)&&(f.dirAx&&r.itemScope.sortableScope.$id===h.sortableScope.$id?(f.distAxX=0,f.distX<0?l(v,h):f.distX>0&&c(v,h)):$(o,v)?l(v,h):c(v,h))),"sortable"===h.type&&h.accept(r,h)&&v[0].parentNode!==h.element[0]&&(k(v)||(v[0].appendChild(u[0]),m.moveTo(h,h.modelValue.length)))}},k=function(t){var i,n,r;for(i=t.children(),r=0;r<i.length;r+=1)if(angular.element(i[r]).hasClass(e.placeHolderClass)){n=!0;break}return n},$=function(e,i){var n,r;return n=!1,r=t.offset(i),n=t.offset(u).top>r.top?t.offset(p).top<r.top+t.height(i)/2:e.pageY<r.top},b=function(e){_&&(e.preventDefault(),p&&(d(),m.apply(),r.sortableScope.$apply(function(){m.isSameParent()?m.isOrderChanged()&&r.callbacks.orderChanged(m.eventArgs()):r.callbacks.itemMoved(m.eventArgs())}),r.sortableScope.$apply(function(){r.callbacks.dragEnd(m.eventArgs())}),m=null),T())},w=function(e){_&&(e.preventDefault(),p&&(d(),r.sortableScope.$apply(function(){r.callbacks.dragCancel(m.eventArgs())}),m=null),T())},E=function(){a.bind("touchstart",v),a.bind("mousedown",v)},E(),angular.element(n[0].body).bind("keydown",function(e){27===e.keyCode&&w(e)}),C=function(){angular.element(n).bind("touchmove",y),angular.element(n).bind("touchend",b),angular.element(n).bind("touchcancel",w),angular.element(n).bind("mousemove",y),angular.element(n).bind("mouseup",b)},T=function(){angular.element(n).unbind("touchend",b),angular.element(n).unbind("touchcancel",w),angular.element(n).unbind("touchmove",y),angular.element(n).unbind("mouseup",b),angular.element(n).unbind("mousemove",y)}}}}])}(),function(){"use strict";var e=angular.module("ui.sortable");e.controller("ui.sortable.sortableItemController",["$scope",function(e){this.scope=e,e.sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){return e.sortableScope.modelValue.indexOf(e.modelValue)},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]),e.directive("sortableItem",["sortableConfig",function(e){return{require:"^sortable",restrict:"A",controller:"ui.sortable.sortableItemController",link:function(t,i,n,r){e.itemClass&&i.addClass(e.itemClass),t.sortableScope=r.scope,t.modelValue=r.scope.modelValue[t.$index],t.element=i}}}])}(),function(e,t){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(e){return t(e)}):t(e)}("undefined"==typeof angular?null:angular,function(e){var t=e.module("angularFileUpload",[]);return t.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(t,i,n,r,a){function o(i){var n=e.copy(t);e.extend(this,n,i,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function s(t){var i=e.isElement(t),n=i?t.value:t,r=e.isString(n)?"FakePath":"Object",a="_createFrom"+r;this[a](n)}function l(t,i,n){var r=e.isElement(i),a=r?e.element(i):null,s=r?null:i;e.extend(this,{url:t.url,alias:t.alias,headers:e.copy(t.headers),formData:e.copy(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,method:t.method},n,{uploader:t,file:new o.FileLikeObject(i),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:s,_input:a}),a&&this._replaceNode(a)}function c(t){e.extend(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function d(){d.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function p(){p.super_.apply(this,arguments)}function u(){u.super_.apply(this,arguments)}return o.prototype.isHTML5=!(!r.File||!r.FormData),o.prototype.addToQueue=function(t,i,n){var r=this.isArrayLikeObject(t)?t:[t],a=this._getFilters(n),s=this.queue.length,l=[];e.forEach(r,function(e){var t=new o.FileLikeObject(e);if(this._isValidFile(t,a,i)){var n=new o.FileItem(this,e,i);l.push(n),this.queue.push(n),this._onAfterAddingFile(n)}else{var r=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(t,r,i)}},this),this.queue.length!==s&&(this._onAfterAddingAll(l),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},o.prototype.removeFromQueue=function(e){var t=this.getIndexOfItem(e),i=this.queue[t];i.isUploading&&i.cancel(),this.queue.splice(t,1),i._destroy(),this.progress=this._getTotalProgress()},o.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},o.prototype.uploadItem=function(e){var t=this.getIndexOfItem(e),i=this.queue[t],n=this.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[n](i))},o.prototype.cancelItem=function(e){var t=this.getIndexOfItem(e),i=this.queue[t],n=this.isHTML5?"_xhr":"_form";i&&i.isUploading&&i[n].abort()},o.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(e){return!e.isUploading});t.length&&(e.forEach(t,function(e){e._prepareToUploading()}),t[0].upload())},o.prototype.cancelAll=function(){var t=this.getNotUploadedItems();e.forEach(t,function(e){e.cancel()})},o.prototype.isFile=function(e){var t=r.File;return t&&e instanceof t},o.prototype.isFileLikeObject=function(e){return e instanceof o.FileLikeObject},o.prototype.isArrayLikeObject=function(t){return e.isObject(t)&&"length"in t},o.prototype.getIndexOfItem=function(t){return e.isNumber(t)?t:this.queue.indexOf(t)},o.prototype.getNotUploadedItems=function(){return this.queue.filter(function(e){return!e.isUploaded})},o.prototype.getReadyItems=function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})},o.prototype.destroy=function(){e.forEach(this._directives,function(t){e.forEach(this._directives[t],function(e){e.destroy()},this)},this)},o.prototype.onAfterAddingAll=function(){},o.prototype.onAfterAddingFile=function(){},o.prototype.onWhenAddingFileFailed=function(){},o.prototype.onBeforeUploadItem=function(){},o.prototype.onProgressItem=function(){},o.prototype.onProgressAll=function(){},o.prototype.onSuccessItem=function(){},o.prototype.onErrorItem=function(){},o.prototype.onCancelItem=function(){},o.prototype.onCompleteItem=function(){},o.prototype.onCompleteAll=function(){},o.prototype._getTotalProgress=function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,i=t?this.queue.length-t:this.queue.length,n=100/this.queue.length,r=(e||0)*n/100;return Math.round(i*n+r)},o.prototype._getFilters=function(t){if(e.isUndefined(t))return this.filters;if(e.isArray(t))return t;var i=t.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==i.indexOf(e.name)},this)},o.prototype._render=function(){i.$$phase||i.$apply()},o.prototype._folderFilter=function(e){return!(!e.size&&!e.type)},o.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},o.prototype._isValidFile=function(e,t,i){return this._failFilterIndex=-1,t.length?t.every(function(t){return this._failFilterIndex++,t.fn.call(this,e,i)},this):!0},o.prototype._isSuccessCode=function(e){return e>=200&&300>e||304===e},o.prototype._transformResponse=function(t,i){var r=this._headersGetter(i);return e.forEach(n.defaults.transformResponse,function(e){t=e(t,r)}),t},o.prototype._parseHeaders=function(t){var i,n,r,a={};return t?(e.forEach(t.split("\n"),function(e){r=e.indexOf(":"),i=e.slice(0,r).trim().toLowerCase(),n=e.slice(r+1).trim(),i&&(a[i]=a[i]?a[i]+", "+n:n)}),a):a},o.prototype._headersGetter=function(e){return function(t){return t?e[t.toLowerCase()]||null:e}},o.prototype._xhrTransport=function(t){var i=t._xhr=new XMLHttpRequest,n=new FormData,r=this;r._onBeforeUploadItem(t),e.forEach(t.formData,function(t){e.forEach(t,function(e,t){n.append(t,e)})}),n.append(t.alias,t._file,t.file.name),i.upload.onprogress=function(e){var i=Math.round(e.lengthComputable?100*e.loaded/e.total:0);r._onProgressItem(t,i)},i.onload=function(){var e=r._parseHeaders(i.getAllResponseHeaders()),n=r._transformResponse(i.response,e),a=r._isSuccessCode(i.status)?"Success":"Error",o="_on"+a+"Item";r[o](t,n,i.status,e),r._onCompleteItem(t,n,i.status,e)},i.onerror=function(){var e=r._parseHeaders(i.getAllResponseHeaders()),n=r._transformResponse(i.response,e);r._onErrorItem(t,n,i.status,e),r._onCompleteItem(t,n,i.status,e)},i.onabort=function(){var e=r._parseHeaders(i.getAllResponseHeaders()),n=r._transformResponse(i.response,e);r._onCancelItem(t,n,i.status,e),r._onCompleteItem(t,n,i.status,e)},i.open(t.method,t.url,!0),i.withCredentials=t.withCredentials,e.forEach(t.headers,function(e,t){i.setRequestHeader(t,e)}),i.send(n),this._render()},o.prototype._iframeTransport=function(t){var i=e.element('<form style="display: none;" />'),n=e.element('<iframe name="iframeTransport'+Date.now()+'">'),r=t._input,a=this;t._form&&t._form.replaceWith(r),t._form=i,a._onBeforeUploadItem(t),r.prop("name",t.alias),e.forEach(t.formData,function(t){e.forEach(t,function(t,n){var r=e.element('<input type="hidden" name="'+n+'" />');r.val(t),i.append(r)})}),i.prop({action:t.url,method:"POST",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.bind("load",function(){try{var e=n[0].contentDocument.body.innerHTML}catch(i){}var r={response:e,status:200,dummy:!0},o={},s=a._transformResponse(r.response,o);a._onSuccessItem(t,s,r.status,o),a._onCompleteItem(t,s,r.status,o)}),i.abort=function(){var e,o={status:0,dummy:!0},s={};n.unbind("load").prop("src","javascript:false;"),i.replaceWith(r),a._onCancelItem(t,e,o.status,s),a._onCompleteItem(t,e,o.status,s)},r.after(i),i.append(r).append(n),i[0].submit(),this._render()},o.prototype._onWhenAddingFileFailed=function(e,t,i){this.onWhenAddingFileFailed(e,t,i)},o.prototype._onAfterAddingFile=function(e){this.onAfterAddingFile(e)},o.prototype._onAfterAddingAll=function(e){this.onAfterAddingAll(e)},o.prototype._onBeforeUploadItem=function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)},o.prototype._onProgressItem=function(e,t){var i=this._getTotalProgress(t);this.progress=i,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(i),this._render()},o.prototype._onSuccessItem=function(e,t,i,n){e._onSuccess(t,i,n),this.onSuccessItem(e,t,i,n)},o.prototype._onErrorItem=function(e,t,i,n){e._onError(t,i,n),this.onErrorItem(e,t,i,n)},o.prototype._onCancelItem=function(e,t,i,n){e._onCancel(t,i,n),this.onCancelItem(e,t,i,n)},o.prototype._onCompleteItem=function(t,i,n,r){t._onComplete(i,n,r),this.onCompleteItem(t,i,n,r);var a=this.getReadyItems()[0];return this.isUploading=!1,e.isDefined(a)?void a.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},o.isFile=o.prototype.isFile,o.isFileLikeObject=o.prototype.isFileLikeObject,o.isArrayLikeObject=o.prototype.isArrayLikeObject,o.isHTML5=o.prototype.isHTML5,o.inherit=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t},o.FileLikeObject=s,o.FileItem=l,o.FileDirective=c,o.FileSelect=d,o.FileDrop=p,o.FileOver=u,s.prototype._createFromFakePath=function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)},s.prototype._createFromObject=function(t){this.lastModifiedDate=e.copy(t.lastModifiedDate),this.size=t.size,this.type=t.type,this.name=t.name},l.prototype.upload=function(){this.uploader.uploadItem(this)},l.prototype.cancel=function(){this.uploader.cancelItem(this)},l.prototype.remove=function(){this.uploader.removeFromQueue(this)},l.prototype.onBeforeUpload=function(){},l.prototype.onProgress=function(){},l.prototype.onSuccess=function(){},l.prototype.onError=function(){},l.prototype.onCancel=function(){},l.prototype.onComplete=function(){},l.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},l.prototype._onProgress=function(e){this.progress=e,this.onProgress(e)},l.prototype._onSuccess=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,i)},l.prototype._onError=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,i)},l.prototype._onCancel=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,i)},l.prototype._onComplete=function(e,t,i){this.onComplete(e,t,i),this.removeAfterUpload&&this.remove()},l.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},l.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},l.prototype._replaceNode=function(e){var t=a(e.clone())(e.scope());t.prop("value",null),e.css("display","none"),e.after(t)},c.prototype.events={},c.prototype.bind=function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}},c.prototype.unbind=function(){for(var e in this.events)this.element.unbind(e,this.events[e])},c.prototype.destroy=function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()},c.prototype._saveLinks=function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}},o.inherit(d,c),d.prototype.events={$destroy:"destroy",change:"onChange"},d.prototype.prop="select",d.prototype.getOptions=function(){},d.prototype.getFilters=function(){},d.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},d.prototype.onChange=function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),i=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,i),this.isEmptyAfterSelection()&&this.element.prop("value",null)},o.inherit(p,c),p.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},p.prototype.prop="drop",p.prototype.getOptions=function(){},p.prototype.getFilters=function(){},p.prototype.onDrop=function(t){var i=this._getTransfer(t);if(i){var n=this.getOptions(),r=this.getFilters();this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(i.files,n,r)}},p.prototype.onDragOver=function(t){var i=this._getTransfer(t);this._haveFiles(i.types)&&(i.dropEffect="copy",this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._addOverClass,this))},p.prototype.onDragLeave=function(t){t.currentTarget===this.element[0]&&(this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this))},p.prototype._getTransfer=function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer},p.prototype._preventAndStop=function(e){e.preventDefault(),e.stopPropagation()},p.prototype._haveFiles=function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1},p.prototype._addOverClass=function(e){e.addOverClass()},p.prototype._removeOverClass=function(e){e.removeOverClass()},o.inherit(u,c),u.prototype.events={$destroy:"destroy"},u.prototype.prop="over",u.prototype.overClass="nv-file-over",u.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},u.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},u.prototype.getOverClass=function(){return this.overClass},o}]).directive("nvFileSelect",["$parse","FileUploader",function(e,t){return{link:function(i,n,r){var a=i.$eval(r.uploader);if(!(a instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var o=new t.FileSelect({uploader:a,element:n});o.getOptions=e(r.options).bind(o,i),o.getFilters=function(){return r.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(e,t){return{link:function(i,n,r){var a=i.$eval(r.uploader);if(!(a instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(a.isHTML5){var o=new t.FileDrop({uploader:a,element:n});o.getOptions=e(r.options).bind(o,i),o.getFilters=function(){return r.filters}}}}}]).directive("nvFileOver",["FileUploader",function(e){return{link:function(t,i,n){var r=t.$eval(n.uploader);if(!(r instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new e.FileOver({uploader:r,element:i});a.getOverClass=function(){return n.overClass||this.overClass}}}}]),t}),function(e,t,i){"use strict";function n(e){var i=[];return l(i,t.noop).chars(e),i.join("")}function r(e){var t={};e=e.split(",");var i;for(i=0;i<e.length;i++)t[e[i]]=!0;return t}function a(e,i){function n(e,n,a,s){if(n=t.lowercase(n),$[n])for(;y.last()&&k[y.last()];)r("",y.last());x[n]&&y.last()==n&&r("",n),(s=w[n]||!!s)||y.push(n);var l={};a.replace(u,function(e,t,i,n,r){l[t]=o(i||n||r||"")}),i.start&&i.start(n,l,s)}function r(e,n){var r,a=0;if(n=t.lowercase(n))for(a=y.length-1;a>=0&&y[a]!=n;a--);if(a>=0){for(r=y.length-1;r>=a;r--)i.end&&i.end(y[r]);y.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,s,l,y=[],b=e;for(y.last=function(){return y[y.length-1]};e;){if(l="",s=!0,y.last()&&E[y.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(v,"$1"),i.chars&&i.chars(o(t)),""}),r("",y.last())):(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(i.comment&&i.comment(e.substring(4,a)),e=e.substring(a+3),s=!1)):g.test(e)?(a=e.match(g))&&(e=e.replace(a[0],""),s=!1):f.test(e)?(a=e.match(p))&&(e=e.substring(a[0].length),a[0].replace(p,r),s=!1):h.test(e)&&((a=e.match(d))?(a[4]&&(e=e.substring(a[0].length),a[0].replace(d,n)),s=!1):(l+="<",e=e.substring(1))),s&&(a=e.indexOf("<"),l+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),i.chars&&i.chars(o(l)))),e==b)throw c("badparse",e);b=e}r()}function o(e){return e?(_.innerHTML=e.replace(/</g,"&lt;"),_.textContent):""}function s(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,i){var n=!1,r=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!n&&E[e]&&(n=e),n||!0!==C[e]||(r("<"),r(e),t.forEach(a,function(n,a){var o=t.lowercase(a),l="img"===e&&"src"===o||"background"===o;!0!==S[o]||!0===T[o]&&!i(n,l)||(r(" "),r(a),r('="'),r(s(n)),r('"'))}),r(o?"/>":">"))},end:function(e){e=t.lowercase(e),n||!0!==C[e]||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(s(e))}}}var c=t.$$minErr("$sanitize"),d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,u=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,f=/^<\//,m=/\x3c!--(.*?)--\x3e/g,g=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]\x3e/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,w=r("area,br,col,hr,img,wbr");e=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),i=r("rp,rt");var x=t.extend({},i,e),$=t.extend({},e,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),k=t.extend({},i,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=r("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");
var E=r("script,style"),C=t.extend({},w,$,k,x,e),T=r("background,cite,href,longdesc,src,usemap,xlink:href");e=r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),i=r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var S=t.extend({},T,i,e),_=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var i=[];return a(t,l(i,function(t,i){return!/^unsafe/.test(e(t,i))})),i.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var i=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,r=/^mailto:/;return function(a,o){function s(e){e&&h.push(n(e))}function l(e,i){h.push("<a "),t.isDefined(o)&&h.push('target="',o,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),s(i),h.push("</a>")}if(!a)return a;for(var c,d,p,u=a,h=[];c=u.match(i);)d=c[0],c[2]||c[4]||(d=(c[3]?"http://":"mailto:")+d),p=c.index,s(u.substr(0,p)),l(d,c[0].replace(r,"")),u=u.substring(p+c[0].length);return s(u),e(h.join(""))}}])}(window,window.angular),function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var i="";p[t.charAt(0)]&&(i=t.charAt(0),t=t.substring(1));var n="",r="",a=!0,o=!1,s=!1;"+"===i?a=!1:"."===i?(r=".",n="."):"/"===i?(r="/",n="/"):"#"===i?(r="#",a=!1):";"===i?(r=";",n=";",o=!0,s=!0):"?"===i?(r="?",n="&",o=!0):"&"===i&&(r="&",n="&",o=!0);for(var l=[],c=t.split(","),d=[],h={},f=0;f<c.length;f++){var m=c[f],g=null;if(-1!==m.indexOf(":")){var v=m.split(":");m=v[0],g=parseInt(v[1],10)}for(var y={};u[m.charAt(m.length-1)];)y[m.charAt(m.length-1)]=!0,m=m.substring(0,m.length-1);var b={truncate:g,name:m,suffices:y};d.push(b),h[m]=b,l.push(m)}var w=function(t){for(var i="",l=0,c=0;c<d.length;c++){var p=d[c],u=t(p.name);if(null===u||void 0===u||Array.isArray(u)&&0===u.length||"object"==typeof u&&0===Object.keys(u).length)l++;else if(i+=c===l?r:n||",",Array.isArray(u)){o&&(i+=p.name+"=");for(var h=0;h<u.length;h++)h>0&&(i+=p.suffices["*"]?n||",":",",p.suffices["*"]&&o&&(i+=p.name+"=")),i+=a?encodeURIComponent(u[h]).replace(/!/g,"%21"):e(u[h])}else if("object"==typeof u){o&&!p.suffices["*"]&&(i+=p.name+"=");var f=!0;for(var m in u)f||(i+=p.suffices["*"]?n||",":","),f=!1,i+=a?encodeURIComponent(m).replace(/!/g,"%21"):e(m),i+=p.suffices["*"]?"=":",",i+=a?encodeURIComponent(u[m]).replace(/!/g,"%21"):e(u[m])}else o&&(i+=p.name,s&&""===u||(i+="=")),null!=p.truncate&&(u=u.substring(0,p.truncate)),i+=a?encodeURIComponent(u).replace(/!/g,"%21"):e(u)}return i};return w.varNames=l,{prefix:r,substitution:w}}function i(e){if(!(this instanceof i))return new i(e);for(var n=e.split("{"),r=[n.shift()],a=[],o=[],s=[];n.length>0;){var l=n.shift(),c=l.split("}")[0],d=l.substring(c.length+1),p=t(c);o.push(p.substitution),a.push(p.prefix),r.push(d),s=s.concat(p.substitution.varNames)}this.fill=function(e){for(var t=r[0],i=0;i<o.length;i++){var n=o[i];t+=n(e),t+=r[i+1]}return t},this.varNames=s,this.template=e}function n(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else{var r;for(r in e)if(void 0===t[r]&&void 0!==e[r])return!1;for(r in t)if(void 0===e[r]&&void 0!==t[r])return!1;for(r in e)if(!n(e[r],t[r]))return!1}return!0}return!1}function r(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function a(e,t){function i(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=r(t||""),e=r(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+i(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function o(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=a(t,e.id),e.id=t),Array.isArray(e))for(var i=0;i<e.length;i++)s(e[i],t);else{"string"==typeof e.$ref&&(e.$ref=a(t,e.$ref));for(var n in e)"enum"!==n&&s(e[n],t)}}function l(e,t,i,n,r,a){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.params=i,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=a||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}function c(e,t){if(t.substring(0,e.length)===e){var i=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===i.charAt(0)||"?"===i.charAt(0))return!0}return!1}function d(e){var t=new h,i=e||"en",n={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(w[e]||(e=e.split("-")[0]),w[e]?(i=e,e):!1):i},addLanguage:function(e,t){var i;for(i in g)t[i]&&!t[g[i]]&&(t[g[i]]=t[i]);var n=e.split("-")[0];if(w[n]){w[e]=Object.create(w[n]);for(i in t)"undefined"==typeof w[n][i]&&(w[n][i]=t[i]),w[e][i]=t[i]}else w[e]=t,w[n]=t;return this},freshApi:function(e){var t=d();return e&&t.language(e),t},validate:function(e,n,r,a){var o=new h(t,!1,w[i],r,a);"string"==typeof n&&(n={$ref:n}),o.addSchema("",n);var s=o.validateAll(e,n,null,null,"");return!s&&a&&(s=o.banUnknownProperties()),this.error=s,this.missing=o.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,n,r,a){var o=new h(t,!0,w[i],r,a);"string"==typeof n&&(n={$ref:n}),o.addSchema("",n),o.validateAll(e,n,null,null,""),a&&o.banUnknownProperties();var s={};return s.errors=o.errors,s.missing=o.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,i){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof g[e])throw new Error("Error already defined: "+e+" as "+g[e]);if("undefined"!=typeof v[t])throw new Error("Error code already used: "+v[t]+" as "+t);g[e]=t,v[t]=e,b[e]=b[t]=i;for(var n in w){var r=w[n];r[e]&&(r[t]=r[t]||r[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:a,getDocumentUri:o,errorCodes:g};return n}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var a=[];for(var o in r)e.call(r,o)&&a.push(o);if(t)for(var s=0;n>s;s++)e.call(r,i[s])&&a.push(i[s]);return a}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);i>r;r++)if(r in t&&t[r]===e)return r;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(i){return!0}});var p={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},u={"*":!0};i.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var h=function(e,t,i,n,r){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),r&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=i,this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};h.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},h.prototype.createError=function(e,t,i,n,r){var a=this.errorMessages[e]||b[e];if("string"!=typeof a)return new l(e,"Unknown error code "+e+": "+JSON.stringify(t),t,i,n,r);var o=a.replace(/\{([^{}]*)\}/g,function(e,i){var n=t[i];return"string"==typeof n||"number"==typeof n?n:e});return new l(e,o,t,i,n,r)},h.prototype.returnError=function(e){return e},h.prototype.collectError=function(e){return e&&this.errors.push(e),null},h.prototype.prefixErrors=function(e,t,i){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,i);return this},h.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(g.UNKNOWN_PROPERTY,{path:e},e,""),i=this.handleError(t);if(i)return i}return null},h.prototype.addFormat=function(e,t){if("object"==typeof e){for(var i in e)this.addFormat(i,e[i]);return this}this.formatValidators[e]=t},h.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(g.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},h.prototype.getSchema=function(e,t){var i;if(void 0!==this.schemas[e])return i=this.schemas[e],this.resolveRefs(i,t);var n=e,r="";if(-1!==e.indexOf("#")&&(r=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){i=this.schemas[n];var a=decodeURIComponent(r);if(""===a)return this.resolveRefs(i,t);if("/"!==a.charAt(0))return void 0;for(var o=a.split("/").slice(1),s=0;s<o.length;s++){var l=o[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===i[l]){i=void 0;break}i=i[l]}if(void 0!==i)return this.resolveRefs(i,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},h.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.searchSchemas(e[i],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&c(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var n in e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var r=o(e[n]);r&&void 0===this.schemas[r]&&void 0===this.missingMap[r]&&(this.missingMap[r]=r)}}},h.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===o(e)+"#"&&(e=o(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},h.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},h.prototype.getSchemaUris=function(e){var t=[];for(var i in this.schemas)(!e||e.test(i))&&t.push(i);return t},h.prototype.getMissingUris=function(e){var t=[];for(var i in this.missingMap)(!e||e.test(i))&&t.push(i);return t},h.prototype.dropSchemas=function(){this.schemas={},this.reset()},h.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},h.prototype.validateAll=function(e,t,i,n,r){var a;if(t=this.resolveRefs(t),!t)return null;if(t instanceof l)return this.errors.push(t),t;var o,s=this.errors.length,c=null,d=null;if(this.checkRecursive&&e&&"object"==typeof e){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&(o=this.scannedFrozen.indexOf(e),-1!==o)){var u=this.scannedFrozenSchemas[o].indexOf(t);if(-1!==u)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[o][u]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===o&&(o=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[o].length,this.scannedFrozenSchemas[o][c]=t,this.scannedFrozenValidationErrors[o][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(h){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}d=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][d]=t,e[this.validationErrorsKey][d]=[]}}var f=this.errors.length,m=this.validateBasic(e,t,r)||this.validateNumeric(e,t,r)||this.validateString(e,t,r)||this.validateArray(e,t,r)||this.validateObject(e,t,r)||this.validateCombinations(e,t,r)||this.validateHypermedia(e,t,r)||this.validateFormat(e,t,r)||this.validateDefinedKeywords(e,t,r)||null;if(a){for(;this.scanned.length;){var g=this.scanned.pop();delete g[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(m||f!==this.errors.length)for(;i&&i.length||n&&n.length;){var v=i&&i.length?""+i.pop():null,y=n&&n.length?""+n.pop():null;m&&(m=m.prefixWith(v,y)),this.prefixErrors(f,v,y)}return null!==c?this.scannedFrozenValidationErrors[o][c]=this.errors.slice(s):null!==d&&(e[this.validationErrorsKey][d]=this.errors.slice(s)),this.handleError(m)},h.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var i=this.formatValidators[t.format].call(null,e,t);return"string"==typeof i||"number"==typeof i?this.createError(g.FORMAT_CUSTOM,{message:i}).prefixWith(null,"format"):i&&"object"==typeof i?this.createError(g.FORMAT_CUSTOM,{message:i.message||"?"},i.dataPath||null,i.schemaPath||"/format"):null},h.prototype.validateDefinedKeywords=function(e,t,i){for(var n in this.definedKeywords)if("undefined"!=typeof t[n])for(var r=this.definedKeywords[n],a=0;a<r.length;a++){var o=r[a],s=o(e,t[n],t,i);if("string"==typeof s||"number"==typeof s)return this.createError(g.KEYWORD_CUSTOM,{key:n,message:s}).prefixWith(null,"format");if(s&&"object"==typeof s){var l=s.code;if("string"==typeof l){if(!g[l])throw new Error("Undefined error code (use defineError): "+l);l=g[l]}else"number"!=typeof l&&(l=g.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},d=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(l,c,s.dataPath||null,d)}}return null},h.prototype.validateBasic=function(e,t,i){var n;return(n=this.validateType(e,t,i))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,i))?n.prefixWith(null,"type"):null},h.prototype.validateType=function(e,t){if(void 0===t.type)return null;var i=typeof e;null===e?i="null":Array.isArray(e)&&(i="array");var n=t.type;"object"!=typeof n&&(n=[n]);for(var r=0;r<n.length;r++){var a=n[r];if(a===i||"integer"===a&&"number"===i&&e%1===0)return null}return this.createError(g.INVALID_TYPE,{type:i,expected:n.join("/")})},h.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var i=0;i<t["enum"].length;i++){var r=t["enum"][i];if(n(e,r))return null}return this.createError(g.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})},h.prototype.validateNumeric=function(e,t,i){return this.validateMultipleOf(e,t,i)||this.validateMinMax(e,t,i)||this.validateNaN(e,t,i)||null};var f=Math.pow(2,-51),m=1-f;h.prototype.validateMultipleOf=function(e,t){var i=t.multipleOf||t.divisibleBy;if(void 0===i)return null;if("number"==typeof e){var n=e/i%1;if(n>=f&&m>n)return this.createError(g.NUMBER_MULTIPLE_OF,{value:e,multipleOf:i})}return null},h.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(g.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(g.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(g.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(g.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},h.prototype.validateNaN=function(e){return"number"!=typeof e?null:isNaN(e)===!0||1/0===e||e===-1/0?this.createError(g.NUMBER_NOT_A_NUMBER,{value:e}).prefixWith(null,"type"):null},h.prototype.validateString=function(e,t,i){return this.validateStringLength(e,t,i)||this.validateStringPattern(e,t,i)||null},h.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(g.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(g.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},h.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var i=new RegExp(t.pattern);return i.test(e)?null:this.createError(g.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},h.prototype.validateArray=function(e,t,i){return Array.isArray(e)?this.validateArrayLength(e,t,i)||this.validateArrayUniqueItems(e,t,i)||this.validateArrayItems(e,t,i)||null:null},h.prototype.validateArrayLength=function(e,t){var i;return void 0!==t.minItems&&e.length<t.minItems&&(i=this.createError(g.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(i))?i:void 0!==t.maxItems&&e.length>t.maxItems&&(i=this.createError(g.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(i))?i:null},h.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var i=0;i<e.length;i++)for(var r=i+1;r<e.length;r++)if(n(e[i],e[r])){var a=this.createError(g.ARRAY_UNIQUE,{match1:i,match2:r}).prefixWith(null,"uniqueItems");if(this.handleError(a))return a}return null},h.prototype.validateArrayItems=function(e,t,i){if(void 0===t.items)return null;var n,r;if(Array.isArray(t.items)){for(r=0;r<e.length;r++)if(r<t.items.length){if(n=this.validateAll(e[r],t.items[r],[r],["items",r],i+"/"+r))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(g.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+r,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[r],t.additionalItems,[r],["additionalItems"],i+"/"+r))return n}else for(r=0;r<e.length;r++)if(n=this.validateAll(e[r],t.items,[r],["items"],i+"/"+r))return n;return null},h.prototype.validateObject=function(e,t,i){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,i)||this.validateObjectRequiredProperties(e,t,i)||this.validateObjectProperties(e,t,i)||this.validateObjectDependencies(e,t,i)||null},h.prototype.validateObjectMinMaxProperties=function(e,t){var i,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(i=this.createError(g.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(i))?i:void 0!==t.maxProperties&&n.length>t.maxProperties&&(i=this.createError(g.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(i))?i:null},h.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var i=0;i<t.required.length;i++){var n=t.required[i];if(void 0===e[n]){var r=this.createError(g.OBJECT_REQUIRED,{key:n}).prefixWith(null,""+i).prefixWith(null,"required");if(this.handleError(r))return r}}return null},h.prototype.validateObjectProperties=function(e,t,i){var n;for(var r in e){var a=i+"/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==t.properties&&void 0!==t.properties[r]&&(o=!0,n=this.validateAll(e[r],t.properties[r],[r],["properties",r],a)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var l=new RegExp(s);if(l.test(r)&&(o=!0,n=this.validateAll(e[r],t.patternProperties[s],[r],["patternProperties",s],a)))return n}if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(g.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(r,"additionalProperties"),this.handleError(n)))return n}else if(n=this.validateAll(e[r],t.additionalProperties,[r],["additionalProperties"],a))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},h.prototype.validateObjectDependencies=function(e,t,i){var n;if(void 0!==t.dependencies)for(var r in t.dependencies)if(void 0!==e[r]){var a=t.dependencies[r];if("string"==typeof a){if(void 0===e[a]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:r,missing:a}).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=a[o];if(void 0===e[s]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:r,missing:s}).prefixWith(null,""+o).prefixWith(null,r).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,a,[],["dependencies",r],i))return n}return null},h.prototype.validateCombinations=function(e,t,i){return this.validateAllOf(e,t,i)||this.validateAnyOf(e,t,i)||this.validateOneOf(e,t,i)||this.validateNot(e,t,i)||null},h.prototype.validateAllOf=function(e,t,i){if(void 0===t.allOf)return null;for(var n,r=0;r<t.allOf.length;r++){var a=t.allOf[r];if(n=this.validateAll(e,a,[],["allOf",r],i))return n}return null},h.prototype.validateAnyOf=function(e,t,i){if(void 0===t.anyOf)return null;var n,r,a=[],o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var s=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[l],d=this.errors.length,p=this.validateAll(e,c,[],["anyOf",l],i);if(null===p&&d===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var u in this.knownPropertyPaths)r[u]=!0,delete n[u];for(var h in this.unknownPropertyPaths)r[h]||(n[h]=!0);s=!1;continue}return null}p&&a.push(p.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),s?(a=a.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(g.ANY_OF_MISSING,{},"","/anyOf",a)):void 0},h.prototype.validateOneOf=function(e,t,i){if(void 0===t.oneOf)return null;var n,r,a=null,o=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[l],d=this.errors.length,p=this.validateAll(e,c,[],["oneOf",l],i);if(null===p&&d===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MULTIPLE,{index1:a,index2:l},"","/oneOf");if(a=l,this.trackUnknownProperties){for(var u in this.knownPropertyPaths)r[u]=!0,delete n[u];for(var h in this.unknownPropertyPaths)r[h]||(n[h]=!0)}}else p&&o.push(p)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),null===a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MISSING,{},"","/oneOf",o)):(this.errors=this.errors.slice(0,s),null)},h.prototype.validateNot=function(e,t,i){if(void 0===t.not)return null;var n,r,a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,r=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,t.not,null,null,i),s=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=r),null===o&&0===s.length?this.createError(g.NOT_PASSED,{},"","/not"):null},h.prototype.validateHypermedia=function(e,t,n){if(!t.links)return null;for(var r,a=0;a<t.links.length;a++){var o=t.links[a];if("describedby"===o.rel){for(var s=new i(o.href),l=!0,c=0;c<s.varNames.length;c++)if(!(s.varNames[c]in e)){l=!1;break}if(l){var d=s.fillFromObject(e),p={$ref:d};if(r=this.validateAll(e,p,[],["links",a],n))return r}}}};var g={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},v={};for(var y in g)v[g[y]]=y;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="ValidationError",l.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var i=0;i<this.subErrors.length;i++)this.subErrors[i].prefixWith(e,t);return this};var w={},x=d();return x.addLanguage("en-gb",b),x.tv4=x,x}),!function(){var e={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,i,n,r,a=0,o=[];a<e.length;)if(t=e.indexOf(".",a),i=e.indexOf("[",a),-1===t&&-1===i)o.push(e.slice(a,e.length)),a=e.length;else if(-1===i||-1!==t&&i>t)o.push(e.slice(a,t)),a=t+1;else if(i>a&&(o.push(e.slice(a,i)),a=i),n=e.slice(i+1,i+2),'"'!==n&&"'"!==n)r=e.indexOf("]",i),-1===r&&(r=e.length),o.push(e.slice(a+1,r)),a="."===e.slice(r+1,r+2)?r+2:r+1;else{for(r=e.indexOf(n+"]",i),-1===r&&(r=e.length);"\\"===e.slice(r-1,r)&&i<e.length;)i++,r=e.indexOf(n+"]",i);o.push(e.slice(a+2,r).replace(new RegExp("\\"+n,"g"),n)),a="."===e.slice(r+2,r+3)?r+3:r+2}return o},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(t,i){return e.stringify(Array.isArray(t)?t:e.parse(t),i)},registerModule:function(t){t.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=e.parse,this.stringify=e.stringify,this.normalize=e.normalize,this.$get=function(){return e}})}};"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.ObjectPath=e:window.ObjectPath=e}();var deps=[];try{angular.module("ngSanitize"),deps.push("ngSanitize")}catch(e){}try{angular.module("ui.sortable"),deps.push("ui.sortable")
}catch(e){}try{angular.module("angularSpectrumColorpicker"),deps.push("angularSpectrumColorpicker")}catch(e){}if(angular.module("schemaForm",deps),angular.module("schemaForm").provider("sfPath",[function(){var e={parse:ObjectPath.parse};e.stringify=1===angular.version.major&&angular.version.minor<3?function(e){return Array.isArray(e)?e.join("."):e.toString()}:ObjectPath.stringify,e.normalize=function(t,i){return e.stringify(Array.isArray(t)?t:e.parse(t),i)},this.parse=e.parse,this.stringify=e.stringify,this.normalize=e.normalize,this.$get=function(){return e}}]),angular.module("schemaForm").factory("sfSelect",["sfPath",function(e){var t=/^\d+$/;return function(i,n,r){n||(n=this);var a="string"==typeof i?e.parse(i):i;if("undefined"!=typeof r&&1===a.length)return n[a[0]]=r,n;"undefined"!=typeof r&&"undefined"==typeof n[a[0]]&&(n[a[0]]=a.length>2&&t.test(a[1])?[]:{});for(var o=n[a[0]],s=1;s<a.length;s++){if(""===a[s])return void 0;if("undefined"!=typeof r){if(s===a.length-1)return o[a[s]]=r,r;var l=o[a[s]];("undefined"==typeof l||null===l)&&(l=t.test(a[s+1])?[]:{},o[a[s]]=l),o=l}else o&&(o=o[a[s]])}return o}}]),angular.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(e,t){var i="",n={},r=function(e,t){"sfDecorator"===e&&(e=i);for(var r=n[e],a=r.rules,o=0;o<a.length;o++){var s=a[o](t);if(s)return s}return r.mappings[t.type]?r.mappings[t.type]:r.mappings["default"]},a=function(i){e.directive(i,["$parse","$compile","$http","$templateCache",function(e,n,a,o){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(e,s,l,c){e.showTitle=function(){return e.form&&e.form.notitle!==!0&&e.form.title},e.listToCheckboxValues=function(e){var t={};return angular.forEach(e,function(e){t[e]=!0}),t},e.checkboxValuesToList=function(e){var t=[];return angular.forEach(e,function(e,i){e&&t.push(i)}),t},e.buttonClick=function(t,i){angular.isFunction(i.onClick)?i.onClick(t,i):angular.isString(i.onClick)&&(c?c.evalInParentScope(i.onClick,{$event:t,form:i}):e.$eval(i.onClick,{$event:t,form:i}))},e.evalExpr=function(t,i){return c?c.evalInParentScope(t,i):e.$eval(t,i)},e.evalInScope=function(t,i){return t?e.$eval(t,i):void 0},e.errorMessage=function(t){return e.form.validationMessage?t?angular.isString(e.form.validationMessage)?e.form.validationMessage:e.form.validationMessage[t.code]||e.form.validationMessage["default"]:e.form.validationMessage.number||e.form.validationMessage["default"]||e.form.validationMessage:t?t.message:"Not a number"};var d=e.$watch(l.form,function(l){if(l){l.ngModelOptions=l.ngModelOptions||{},e.form=l;var c=r(i,l);a.get(c,{cache:o}).then(function(i){var r=l.key?t.stringify(l.key).replace(/"/g,"&quot;"):"",a=i.data.replace(/\$\$value\$\$/g,"model"+("["!==r[0]?".":"")+r);s.html(a),l.condition&&angular.forEach(s.children(),function(e){var t=e.getAttribute("ng-if");e.setAttribute("ng-if",t?"("+t+') || (evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex }))':'evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex })')}),n(s.contents())(e)}),d()}})}}}])},o=function(t,i,n){n=angular.isDefined(n)?n:!1,e.directive("sf"+angular.uppercase(t[0])+t.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:n,template:'<sf-decorator form="form"></sf-decorator>',link:function(e,i,n){var r={items:"c",titleMap:"c",schema:"c"},a={type:t},o=!0;angular.forEach(n,function(t,i){if("$"!==i[0]&&0!==i.indexOf("ng")&&"sfField"!==i){var s=function(t){angular.isDefined(t)&&t!==a[i]&&(a[i]=t,o&&a.type&&(a.key||angular.isUndefined(n.key))&&(e.form=a,o=!1))};"model"===i?e.$watch(t,function(t){t&&e.model!==t&&(e.model=t)}):"c"===r[i]?e.$watchCollection(t,s):n.$observe(i,s)}})}}})};this.createDecorator=function(e,t,r){n[e]={mappings:t||{},rules:r||[]},n[i]||(i=e),a(e)},this.createDirective=o,this.createDirectives=function(e){angular.forEach(e,function(e,t){o(t,e)})},this.directive=function(e){return e=e||i,n[e]},this.addMapping=function(e,t,i){n[e]&&(n[e].mappings[t]=i)},this.$get=function(){return{directive:function(e){return n[e]},defaultDecorator:i}},a("sfDecorator")}]),angular.module("schemaForm").provider("schemaForm",["sfPathProvider",function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e,value:e})}),t},i=function(e,t){if(!angular.isArray(e)){var i=[];return t?angular.forEach(t,function(t){i.push({name:e[t],value:t})}):angular.forEach(e,function(e,t){i.push({name:e,value:t})}),i}return e},n=function(e,t,i){var n=h[t.type];if(n)for(var r,a=0;a<n.length;a++)if(r=n[a](e,t,i))return r.schema["x-schema-form"]&&angular.isObject(r.schema["x-schema-form"])&&(r=angular.extend(r,r.schema["x-schema-form"])),r},r=function(e,t,n){n=n||{};var r=n.global&&n.global.formDefaults?angular.copy(n.global.formDefaults):{};return r.title=n.global&&n.global.supressPropertyTitles===!0?t.title:t.title||e,t.description&&(r.description=t.description),(n.required===!0||t.required===!0)&&(r.required=!0),t.maxLength&&(r.maxlength=t.maxLength),t.minLength&&(r.minlength=t.maxLength),(t.readOnly||t.readonly)&&(r.readonly=!0),t.minimum&&(r.minimum=t.minimum+(t.exclusiveMinimum?1:0)),t.maximum&&(r.maximum=t.maximum-(t.exclusiveMaximum?1:0)),t.validationMessage&&(r.validationMessage=t.validationMessage),t.enumNames&&(r.titleMap=i(t.enumNames,t["enum"])),r.schema=t,r.ngModelOptions=r.ngModelOptions||{},r},a=function(t,i,n){if("string"===i.type&&!i["enum"]){var a=r(t,i,n);return a.key=n.path,a.type="text",n.lookup[e.stringify(n.path)]=a,a}},o=function(t,i,n){if("number"===i.type){var a=r(t,i,n);return a.key=n.path,a.type="number",n.lookup[e.stringify(n.path)]=a,a}},s=function(t,i,n){if("integer"===i.type){var a=r(t,i,n);return a.key=n.path,a.type="number",n.lookup[e.stringify(n.path)]=a,a}},l=function(t,i,n){if("boolean"===i.type){var a=r(t,i,n);return a.key=n.path,a.type="checkbox",n.lookup[e.stringify(n.path)]=a,a}},c=function(i,n,a){if("string"===n.type&&n["enum"]){var o=r(i,n,a);return o.key=a.path,o.type="select",o.titleMap||(o.titleMap=t(n["enum"])),a.lookup[e.stringify(a.path)]=o,o}},d=function(i,n,a){if("array"===n.type&&n.items&&n.items["enum"]){var o=r(i,n,a);return o.key=a.path,o.type="checkboxes",o.titleMap||(o.titleMap=t(n.items["enum"])),a.lookup[e.stringify(a.path)]=o,o}},p=function(t,i,a){if("object"===i.type){var o=r(t,i,a);return o.type="fieldset",o.items=[],a.lookup[e.stringify(a.path)]=o,angular.forEach(i.properties,function(t,r){var s=a.path.slice();if(s.push(r),a.ignore[e.stringify(s)]!==!0){var l=i.required&&-1!==i.required.indexOf(r),c=n(r,t,{path:s,required:l||!1,lookup:a.lookup,ignore:a.ignore});c&&o.items.push(c)}}),o}},u=function(t,i,a){if("array"===i.type){var o=r(t,i,a);o.type="array",o.key=a.path,a.lookup[e.stringify(a.path)]=o;var s=i.required&&-1!==i.required.indexOf(a.path[a.path.length-1]),l=a.path.slice();return l.push(""),o.items=[n(t,i.items,{path:l,required:s||!1,lookup:a.lookup,ignore:a.ignore,global:a.global})],o}},h={string:[c,a],object:[p],number:[o],integer:[s],"boolean":[l],array:[d,u]},f=function(e){return e};this.defaults=h,this.stdFormObj=r,this.defaultFormDefinition=n,this.postProcess=function(e){f=e},this.appendRule=function(e,t){h[e]||(h[e]=[]),h[e].push(t)},this.prependRule=function(e,t){h[e]||(h[e]=[]),h[e].unshift(t)},this.createStandardForm=r,this.$get=function(){var t={};return t.merge=function(n,r,a,o,s){r=r||["*"],o=o||{},s=s||n.readonly||n.readOnly;var l=t.defaults(n,a,o),c=r.indexOf("*");-1!==c&&(r=r.slice(0,c).concat(l.form).concat(r.slice(c+1)));var d=l.lookup;return f(r.map(function(r){if("string"==typeof r&&(r={key:r}),r.key&&"string"==typeof r.key&&(r.key=e.parse(r.key)),r.titleMap&&(r.titleMap=i(r.titleMap)),r.itemForm){r.items=[];var l=e.stringify(r.key),c=d[l];angular.forEach(c.items,function(e){var t=angular.copy(r.itemForm);t.key=e.key,r.items.push(t)})}if(r.key){var p=e.stringify(r.key);d[p]&&(r=angular.extend(d[p],r))}return s===!0&&(r.readonly=!0),r.items&&(r.items=t.merge(n,r.items,a,o,r.readonly)),r.tabs&&angular.forEach(r.tabs,function(e){e.items=t.merge(n,e.items,a,o,r.readonly)}),"checkbox"===r.type&&angular.isUndefined(r.schema["default"])&&(r.schema["default"]=!1),r}))},t.defaults=function(e,t,i){var r=[],a={};if(t=t||{},i=i||{},"object"!==e.type)throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return angular.forEach(e.properties,function(o,s){if(t[s]!==!0){var l=e.required&&-1!==e.required.indexOf(s),c=n(s,o,{path:[s],lookup:a,ignore:t,required:l,global:i});c&&r.push(c)}}),{form:r,lookup:a}},t.traverseSchema=function(e,t,i,n){n=angular.isDefined(n)?n:!0,i=i||[];var r=function(e,t,i){if(t(e,i),angular.forEach(e.properties,function(e,n){var a=i.slice();a.push(n),r(e,t,a)}),!n&&e.items){var a=i.slice();a.push(""),r(e.items,t,a)}};r(e,t,i||[])},t.traverseForm=function(e,i){i(e),angular.forEach(e.items,function(e){t.traverseForm(e,i)}),e.tabs&&angular.forEach(e.tabs,function(e){angular.forEach(e.items,function(e){t.traverseForm(e,i)})})},t}}]),angular.module("schemaForm").factory("sfValidator",[function(){var e={};return e.validate=function(e,t){if(!e)return{valid:!0};var i=e.schema;if(!i)return{valid:!0};""===t&&(t=void 0),"number"===e.type&&null===t&&(t=void 0);var n={type:"object",properties:{}},r=e.key[e.key.length-1];n.properties[r]=i,e.required&&(n.required=[r]);var a={};return angular.isDefined(t)&&(a[r]=t),tv4.validateResult(a,n)},e}]),angular.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(e,t,i,n){var r=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(a,o,s,l){var c={},d=a.$watch(s.sfArray,function(o){var s=e(o.key,a.model);if(a.$watch("model"+n.normalize(o.key),function(){s=e(o.key,a.model),a.modelArray=s}),angular.isUndefined(s)&&(s=[],e(o.key,a.model,s)),a.modelArray=s,o.items){var p=o.items[0];o.items.length>1&&(p={type:"section",items:o.items.map(function(e){return e.ngModelOptions=o.ngModelOptions,angular.isUndefined(e.readonly)&&(e.readonly=o.readonly),e})})}if(a.copyWithIndex=function(e){if(!c[e]&&p){var i=angular.copy(p);i.arrayIndex=e,t.traverseForm(i,r(e)),c[e]=i}return c[e]},a.appendToArray=function(){var i=s.length,n=a.copyWithIndex(i);if(t.traverseForm(n,function(t){if(t.key){var i;angular.isDefined(t["default"])&&(i=t["default"]),angular.isDefined(t.schema)&&angular.isDefined(t.schema["default"])&&(i=t.schema["default"]),angular.isDefined(i)&&e(t.key,a.model,i)}}),i===s.length){var r,l=e("schema.items.type",o);"object"===l?r={}:"array"===l&&(r=[]),s.push(r)}return a.validateArray&&a.validateArray(),s},a.deleteFromArray=function(e){return s.splice(e,1),a.validateArray&&a.validateArray(),l&&l.$setDirty&&l.$setDirty(),s},o.titleMap||o.startEmpty===!0||0!==s.length||a.appendToArray(),o.titleMap&&o.titleMap.length>0){a.titleMapValues=[];var u=function(e){a.titleMapValues=[],e=e||[],o.titleMap.forEach(function(t){a.titleMapValues.push(-1!==e.indexOf(t.value))})};u(a.modelArray),a.$watchCollection("modelArray",u),a.$watchCollection("titleMapValues",function(e){if(e){for(var t=a.modelArray;t.length>0;)t.pop();o.titleMap.forEach(function(i,n){e[n]&&t.push(i.value)})}})}if(l){var h;a.validateArray=function(){var e=i.validate(o,a.modelArray.length>0?a.modelArray:void 0);e.valid!==!1||!e.error||""!==e.error.dataPath&&e.error.dataPath!=="/"+o.key[o.key.length-1]?l.$setValidity("schema",!0):(l.$setViewValue(a.modelArray),h=e.error,l.$setValidity("schema",!1))},a.$on("schemaFormValidate",a.validateArray),a.hasSuccess=function(){return l.$valid&&!l.$pristine},a.hasError=function(){return l.$invalid},a.schemaError=function(){return h}}d()})}}}]),angular.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(e,t,i,n){var r=e.$eval(i.sfChanged);r&&r.onChange&&n.$viewChangeListeners.push(function(){angular.isFunction(r.onChange)?r.onChange(n.$modelValue,r):e.evalExpr(r.onChange,{modelValue:n.$modelValue,form:r})})}}}),angular.module("schemaForm").directive("sfSchema",["$compile","schemaForm","schemaFormDecorators","sfSelect","sfPath",function(e,t,i,n,r){var a=/[A-Z]/g,o=function(e,t){return t=t||"_",e.replace(a,function(e,i){return(i?t:"")+e.toLowerCase()})};return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(e){this.evalInParentScope=function(t,i){return e.$parent.$eval(t,i)}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(a,s,l,c,d){a.formCtrl=c;var p={};d(a,function(e){if(e.addClass("schema-form-ignore"),s.prepend(e),s[0].querySelectorAll){var t=s[0].querySelectorAll("[ng-model]");if(t)for(var i=0;i<t.length;i++){var n=t[i].getAttribute("ng-model");p[n.substring(n.indexOf(".")+1)]=!0}}});var u,h={},f=function(c,d){var h=t.merge(c,d,p,a.options),f=document.createDocumentFragment();u&&u.$destroy(),u=a.$new(),u.schemaForm={form:h,schema:c},s.children(":not(.schema-form-ignore)").remove();for(var m={},g=s[0].querySelectorAll("*[sf-insert-field]"),v=0;v<g.length;v++)m[g[v].getAttribute("sf-insert-field")]=g[v];angular.forEach(h,function(e,t){var n=document.createElement(l.sfDecorator||o(i.defaultDecorator,"-"));if(n.setAttribute("form","schemaForm.form["+t+"]"),e.key){var a=m[r.stringify(e.key)];if(a){for(;a.firstChild;)a.removeChild(a.firstChild);return void a.appendChild(n)}}f.appendChild(n)}),s[0].appendChild(f),e(s.children())(u),t.traverseSchema(c,function(e,t){if(angular.isDefined(e["default"])){var i=n(t,a.model);angular.isUndefined(i)&&n(t,a.model,e["default"])}}),a.$emit("sf-render-finished",s)};a.$watch(function(){var e=a.schema,t=a.initialForm||["*"];t&&e&&e.type&&(h.form!==t||h.schema!==e)&&Object.keys(e.properties).length>0&&(h.schema=e,h.form=t,f(e,t))}),a.$on("schemaFormRedraw",function(){var e=a.schema,t=a.initialForm||["*"];e&&f(e,t)})}}}]),angular.module("schemaForm").directive("schemaValidate",["sfValidator","sfSelect",function(e,t){return{restrict:"A",scope:!1,priority:1e3,require:"ngModel",link:function(i,n,r,a){i.ngModel=a;var o=null,s=function(){return l||(l=i.$eval(r.schemaValidate)),l},l=s();l.copyValueTo&&a.$viewChangeListeners.push(function(){var e=l.copyValueTo;angular.forEach(e,function(e){t(e,i.model,a.$modelValue)})}),a.$validators?a.$validators.schema=function(t){var i=e.validate(s(),t);return o=i.error,i.valid}:a.$parsers.push(function(t){if(l=s(),!l)return t;var i=e.validate(l,t);return i.valid?(a.$setValidity("schema",!0),t):(a.$setValidity("schema",!1),void(o=i.error))}),i.$on("schemaFormValidate",function(){a.$validate?(a.$validate(),a.$invalid&&(a.$dirty=!0,a.$pristine=!1)):a.$setViewValue(a.$viewValue)}),i.hasSuccess=function(){return a.$valid&&(!a.$pristine||!a.$isEmpty(a.$modelValue))},i.hasError=function(){return a.$invalid&&!a.$pristine},i.schemaError=function(){return o}}}}]),angular.module("schemaForm").run(["$templateCache",function(e){e.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude=""></div>'),e.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)">{{item.title}}</button></div>'),e.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" class="schema-form-array {{form.htmlClass}}" ng-model="$$value$$" ng-model-options="form.ngModelOptions"><h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3><ol class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden="true"></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class="sr-only">{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-show="form.title">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><div ng-transclude=""></div></fieldset>'),e.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-show="form.title">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></fieldset>'),e.put("directives/decorators/bootstrap/help.html",'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>'),e.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="form-group schema-form-radiobuttons {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><div><label class="control-label" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" style="display: none;" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-value="item.value" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-value="item.value" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/readonly.html",'<div class="form-group"><label ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-if="form.type !== \'textarea\'" type="text" disabled="" class="form-control" id="{{form.key.slice(-1)[0]}}" value="{{$$value$$}}"> <textarea ng-if="form.type === \'textarea\'" disabled="" class="form-control">{{$$value$$}}</textarea><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/section.html",'<div class="schema-form-section {{form.htmlClass}}"><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),e.put("directives/decorators/bootstrap/select.html",'<div class="form-group {{form.htmlClass}} schema-form-select" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name for item in form.titleMap" name="{{form.key.slice(-1)[0]}}"></select><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><input type="submit" class="btn {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'">{{form.title}}</button></div>'),e.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),e.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane" ng-disabled="form.readonly" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),e.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"><label ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <textarea class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea> <span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(e){var t="directives/decorators/bootstrap/";e.createDecorator("bootstrapDecorator",{textarea:t+"textarea.html",fieldset:t+"fieldset.html",array:t+"array.html",tabarray:t+"tabarray.html",tabs:t+"tabs.html",section:t+"section.html",conditional:t+"section.html",actions:t+"actions.html",select:t+"select.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",password:t+"default.html",submit:t+"submit.html",button:t+"submit.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html",help:t+"help.html","default":t+"default.html"},[]),e.createDirectives({textarea:t+"textarea.html",select:t+"select.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",submit:t+"submit.html",button:t+"submit.html",text:t+"default.html",date:t+"default.html",password:t+"default.html",datepicker:t+"datepicker.html",input:t+"default.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html"})}]).directive("sfFieldset",function(){return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(e,t,i){e.title=e.$eval(i.title)}}}),angular.module("schemaForm-froala",["schemaForm","froala"]).config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(e,t,i){var n=function(t,n,r){if("string"===n.type&&"html"==n.format){var a=e.stdFormObj(t,n,r);return a.key=r.path,a.type="wysiwyg",r.lookup[i.stringify(r.path)]=a,a}};e.defaults.string.unshift(n),t.addMapping("bootstrapDecorator","wysiwyg","directives/decorators/bootstrap/froala/froala.html"),t.createDirective("wysiwyg","directives/decorators/bootstrap/froala/froala.html")}]),"undefined"==typeof jQuery)throw new Error("Froala requires jQuery");!function(e){"use strict";var t=function(i,n){return this.options=e.extend({},t.DEFAULTS,e(i).data(),"object"==typeof n&&n),this.options.unsupportedAgents.test(navigator.userAgent)?!1:(this.valid_nodes=e.merge([],t.VALID_NODES),this.valid_nodes=e.merge(this.valid_nodes,e.map(Object.keys(this.options.blockTags),function(e){return e.toUpperCase()})),this.browser=t.browser(),this.disabledList=[],this._id=++t.count,this._events={},this.blurred=!0,this.$original_element=e(i),this.document=i.ownerDocument,this.window="defaultView"in this.document?this.document.defaultView:this.document.parentWindow,this.$document=e(this.document),this.$window=e(this.window),this.br=this.browser.msie&&e.Editable.getIEversion()<=10?"":"<br/>",this.init(i),void e(i).on("editable.focus",e.proxy(function(){for(var t=1;t<=e.Editable.count;t++)t!=this._id&&this.$window.trigger("blur."+t)},this)))};t.initializers=[],t.count=0,t.VALID_NODES=["P","DIV","LI","TD","TH"],t.LANGS=[],t.INVISIBLE_SPACE="&#x200b;",t.DEFAULTS={allowComments:!0,allowScript:!1,allowStyle:!1,allowedAttrs:["accept","accept-charset","accesskey","action","align","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","width","wrap"],allowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],alwaysBlank:!1,alwaysVisible:!1,autosave:!1,autosaveInterval:1e4,beautifyCode:!0,blockTags:{n:"Normal",blockquote:"Quote",pre:"Code",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},buttons:["bold","italic","underline","strikeThrough","fontSize","fontFamily","color","sep","formatBlock","blockStyle","align","insertOrderedList","insertUnorderedList","outdent","indent","sep","createLink","insertImage","insertVideo","insertHorizontalRule","undo","redo","html"],crossDomain:!0,convertMailAddresses:!0,customButtons:{},customDropdowns:{},customText:!1,defaultTag:"P",direction:"ltr",disableRightClick:!1,editInPopup:!1,editorClass:"",formatTags:["p","pre","blockquote","h1","h2","h3","h4","h5","h6","div","ul","ol","li","table","tbody","thead","tfoot","tr","th","td","body","head","html","title","meta","link","base","script","style"],headers:{},height:"auto",icons:{},inlineMode:!0,initOnClick:!1,fullPage:!1,language:"en_us",linkList:[],linkText:!1,linkClasses:{},linkAutoPrefix:"",maxHeight:"auto",minHeight:"auto",multiLine:!0,noFollow:!0,paragraphy:!0,placeholder:"Type something",plainPaste:!1,preloaderSrc:"",saveURL:null,saveParams:{},saveRequestType:"POST",scrollableContainer:"body",simpleAmpersand:!1,shortcuts:!0,shortcutsAvailable:["show","bold","italic","underline","createLink","insertImage","indent","outdent","html","formatBlock n","formatBlock h1","formatBlock h2","formatBlock h3","formatBlock h4","formatBlock h5","formatBlock h6","formatBlock blockquote","formatBlock pre","strikeThrough"],showNextToCursor:!1,spellcheck:!1,theme:null,toolbarFixed:!0,trackScroll:!1,unlinkButton:!0,useClasses:!0,tabSpaces:!0,typingTimer:500,pastedImagesUploadRequestType:"POST",pastedImagesUploadURL:"http://i.froala.com/upload_base64",unsupportedAgents:/Opera Mini/i,useFrTag:!1,width:"auto",withCredentials:!1,zIndex:2e3},t.prototype.destroy=function(){this.sync(),this.options.useFrTag&&this.addFrTag(),this.hide(),this.isHTML&&this.html(),this.$bttn_wrapper&&this.$bttn_wrapper.html("").removeData().remove(),this.$editor&&this.$editor.html("").removeData().remove(),this.raiseEvent("destroy"),this.$popup_editor&&this.$popup_editor.html("").removeData().remove(),this.$placeholder&&this.$placeholder.html("").removeData().remove(),clearTimeout(this.ajaxInterval),clearTimeout(this.typingTimer),this.$element.off("mousedown mouseup click keydown keyup cut copy paste focus keypress touchstart touchend touch drop"),this.$element.off("mousedown mouseup click keydown keyup cut copy paste focus keypress touchstart touchend touch drop","**"),this.$window.off("mouseup."+this._id),this.$window.off("keydown."+this._id),this.$window.off("keyup."+this._id),this.$window.off("blur."+this._id),this.$window.off("hide."+this._id),this.$window.off("scroll."+this._id),this.$window.off("resize."+this._id),this.$window.off("orientationchange."+this._id),this.$document.off("selectionchange."+this._id),this.$original_element.off("editable"),void 0!==this.$upload_frame&&this.$upload_frame.remove(),this.$textarea&&(this.$box.remove(),this.$textarea.removeData("fa.editable"),this.$textarea.show());
for(var e in this._events)delete this._events[e];this.$placeholder&&this.$placeholder.remove(),this.isLink?this.$element.removeData("fa.editable"):(this.$wrapper?this.$wrapper.replaceWith(this.getHTML(!1,!1)):this.$element.replaceWith(this.getHTML(!1,!1)),this.$box&&!this.editableDisabled&&(this.$box.removeClass("froala-box f-rtl"),this.$box.find(".html-switch").remove(),this.$box.removeData("fa.editable"),clearTimeout(this.typingTimer))),this.$lb&&this.$lb.remove()},t.prototype.triggerEvent=function(t,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1),n===!0&&(this.isResizing()||this.editableDisabled||this.imageMode||!r||this.cleanify(),this.sync());var a=!0;return i||(i=[]),a=this.$original_element.triggerHandler("editable."+t,e.merge([this],i)),void 0===a?!0:a},t.prototype.syncStyle=function(){if(this.options.fullPage){var e=this.$element.html().match(/\[style[^\]]*\].*\[\/style\]/gi);if(this.$document.find("head style[data-id]").remove(),e)for(var t=0;t<e.length;t++)this.$document.find("head").append(e[t].replace(/\[/gi,"<").replace(/\]/gi,">"))}},t.prototype.sync=function(){if(!this.isHTML){this.raiseEvent("sync"),this.disableImageResize(),this.isLink||this.isImage||this.checkPlaceholder();var e=this.getHTML(!1,!1);this.trackHTML!==e&&null!=this.trackHTML?(this.refreshImageList(),this.refreshButtons(),this.trackHTML=e,this.$textarea&&this.$textarea.val(e),this.doingRedo||this.saveUndoStep(),this.triggerEvent("contentChanged",[],!1)):null==this.trackHTML&&(this.trackHTML=e),this.syncStyle()}},t.prototype.emptyElement=function(t){if("IMG"==t.tagName||e(t).find("img").length>0)return!1;if(e(t).find("input, iframe").length>0)return!1;for(var i=e(t).text(),n=0;n<i.length;n++)if("\n"!==i[n]&&"\r"!==i[n]&&"	"!==i[n]&&8203!=i[n].charCodeAt(0))return!1;return!0},t.prototype.initEvents=function(){this.mobile()?(this.mousedown="touchstart",this.mouseup="touchend",this.move="touchmove"):(this.mousedown="mousedown",this.mouseup="mouseup",this.move="")},t.prototype.initDisable=function(){this.$element.on("keypress keydown keyup",e.proxy(function(e){return this.isDisabled?(e.stopPropagation(),e.preventDefault(),!1):void 0},this))},t.prototype.continueInit=function(){this.initDisable(),this.initEvents(),this.browserFixes(),this.handleEnter(),this.editableDisabled||(this.initUndoRedo(),this.enableTyping(),this.initShortcuts()),this.initTabs(),this.initEditor();for(var t=0;t<e.Editable.initializers.length;t++)e.Editable.initializers[t].call(this);this.initOptions(),this.initEditorSelection(),this.initAjaxSaver(),this.setLanguage(),this.setCustomText(),this.editableDisabled||this.registerPaste(),this.refreshDisabledState(),this.refreshUndo(),this.refreshRedo(),this.initPopupSubmit(),this.initialized=!0,this.triggerEvent("initialized",[],!1,!1)},t.prototype.initPopupSubmit=function(){this.$popup_editor.find(".froala-popup input").keydown(function(t){var i=t.which;13==i&&(t.preventDefault(),t.stopPropagation(),e(this).blur(),e(this).parents(".froala-popup").find("button.f-submit").click())})},t.prototype.lateInit=function(){this.saveSelectionByMarkers(),this.continueInit(),this.restoreSelectionByMarkers(),this.$element.focus(),this.hideOtherEditors()},t.prototype.init=function(t){this.options.paragraphy||(this.options.defaultTag="DIV"),this.initElement(t),this.initElementStyle(),(!this.isLink||this.isImage)&&(this.initImageEvents(),this.buildImageMove()),this.options.initOnClick?(this.editableDisabled||(this.$element.attr("contenteditable",!0),this.$element.attr("spellcheck",!1)),this.$element.bind("mousedown.element focus.element",e.proxy(function(e){return this.isLink||e.stopPropagation(),this.isDisabled?!1:(this.$element.unbind("mousedown.element focus.element"),void this.lateInit())},this))):this.continueInit()},t.prototype.phone=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},t.prototype.mobile=function(){return this.phone()||this.android()||this.iOS()||this.blackberry()},t.prototype.iOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},t.prototype.iOSVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)];if(t&&t[0])return t[0]}return 0},t.prototype.iPad=function(){return/(iPad)/g.test(navigator.userAgent)},t.prototype.iPhone=function(){return/(iPhone)/g.test(navigator.userAgent)},t.prototype.iPod=function(){return/(iPod)/g.test(navigator.userAgent)},t.prototype.android=function(){return/(Android)/g.test(navigator.userAgent)},t.prototype.blackberry=function(){return/(Blackberry)/g.test(navigator.userAgent)},t.prototype.initOnTextarea=function(t){this.$textarea=e(t),void 0!==this.$textarea.attr("placeholder")&&"Type something"==this.options.placeholder&&(this.options.placeholder=this.$textarea.attr("placeholder")),this.$element=e("<div>").html(this.$textarea.val()),this.$textarea.before(this.$element).hide(),this.$textarea.parents("form").bind("submit",e.proxy(function(){this.isHTML?this.html():this.sync()},this)),this.addListener("destroy",e.proxy(function(){this.$textarea.parents("form").unbind("submit")},this))},t.prototype.initOnLink=function(t){this.isLink=!0,this.options.linkText=!0,this.selectionDisabled=!0,this.editableDisabled=!0,this.options.buttons=[],this.$element=e(t),this.options.paragraphy=!1,this.options.countCharacters=!1,this.$box=this.$element},t.prototype.initOnImage=function(t){var i=e(t).css("float");"A"==e(t).parent().get(0).tagName&&(t=e(t).parent()),this.isImage=!0,this.editableDisabled=!0,this.imageList=[],this.options.buttons=[],this.options.paragraphy=!1,this.options.imageMargin="auto",e(t).wrap("<div>"),this.$element=e(t).parent(),this.$element.css("display","inline-block"),this.$element.css("max-width","100%"),this.$element.css("margin-left","auto"),this.$element.css("margin-right","auto"),this.$element.css("float",i),this.$element.addClass("f-image"),this.$box=e(t)},t.prototype.initForPopup=function(t){this.$element=e(t),this.$box=this.$element,this.editableDisabled=!0,this.options.countCharacters=!1,this.options.buttons=[],this.$element.on("click",e.proxy(function(e){e.preventDefault()},this))},t.prototype.initOnDefault=function(t){"DIV"!=t.tagName&&this.options.buttons.indexOf("formatBlock")>=0&&this.disabledList.push("formatBlock"),this.$element=e(t)},t.prototype.initElement=function(t){if("TEXTAREA"==t.tagName?this.initOnTextarea(t):"A"==t.tagName?this.initOnLink(t):"IMG"==t.tagName?this.initOnImage(t):this.options.editInPopup?this.initForPopup(t):this.initOnDefault(t),!this.editableDisabled){this.$box=this.$element.addClass("froala-box"),this.$wrapper=e('<div class="froala-wrapper">'),this.$element=e("<div>");var i=this.$box.html();this.$box.html(this.$wrapper.html(this.$element)),this.$element.on("keyup",e.proxy(function(){this.$element.find("ul, ol").length>1&&this.cleanupLists()},this)),this.setHTML(i,!0)}this.$element.on("drop",e.proxy(function(){setTimeout(e.proxy(function(){e("html").click(),this.$element.find(".f-img-wrap").each(function(t,i){0===e(i).find("img").length&&e(i).remove()}),this.$element.find(this.options.defaultTag+":empty").remove()},this),1)},this))},t.prototype.trim=function(e){return e=String(e).replace(/^\s+|\s+$/g,""),e=e.replace(/\u200B/gi,"")},t.prototype.unwrapText=function(){this.options.paragraphy||this.$element.find(this.options.defaultTag).each(e.proxy(function(t,i){if(0===i.attributes.length){var n=e(i).find("br:last");e(i).replaceWith(n.length&&this.isLastSibling(n.get(0))?e(i).html():e(i).html()+"<br/>")}},this))},t.prototype.wrapTextInElement=function(t,i){void 0===i&&(i=!1);var n=[],r=["SPAN","A","B","I","EM","U","S","STRONG","STRIKE","FONT","IMG","SUB","SUP"],a=this;this.no_verify=!0;var o=function(){if(0===n.length)return!1;var t=e("<"+a.options.defaultTag+">"),i=e(n[0]);if(1==n.length&&"f-marker"==i.attr("class"))return void(n=[]);for(var r=0;r<n.length;r++){var o=e(n[r]);t.append(o.clone()),r==n.length-1?o.replaceWith(t):o.remove()}n=[]},s=!1,l=!1,c=!1;t.contents().filter(function(){var t=e(this);if(t.hasClass("f-marker")||t.find(".f-marker").length){var d=t;if(1==t.find(".f-marker").length||t.hasClass("f-marker")){d=t.find(".f-marker").length?e(t.find(".f-marker")[0]):t;var p=d.prev();"true"===d.attr("data-type")?p.length&&e(p[0]).hasClass("f-marker")?c=!0:(s=!0,l=!1):l=!0}else c=!0}this.nodeType==Node.TEXT_NODE&&t.text().length>0||r.indexOf(this.tagName)>=0?n.push(this):this.nodeType==Node.TEXT_NODE&&0===t.text().length&&a.options.beautifyCode?t.remove():s||i||c?("BR"===this.tagName&&(n.length>0?t.remove():n.push(this)),o(),l&&(s=!1),c=!1):n=[]}),(s||i||c)&&o(),t.find("> "+this.options.defaultTag).each(function(t,i){0===e(i).text().trim().length&&0===e(i).find("img").length&&0===e(i).find("br").length&&e(i).append(this.br)}),t.find("div:empty:not([class])").remove(),t.is(":empty")&&t.append(a.options.paragraphy===!0?"<"+this.options.defaultTag+">"+this.br+"</"+this.options.defaultTag+">":this.br),this.no_verify=!1},t.prototype.wrapText=function(t){if(this.isImage||this.isLink)return!1;this.allow_div=!0,this.removeBlankSpans();for(var i=this.getSelectionElements(),n=0;n<i.length;n++){var r=e(i[n]);["LI","TH","TD"].indexOf(r.get(0).tagName)>=0?this.wrapTextInElement(r,!0):this.parents(r,"li").length?this.wrapTextInElement(e(this.parents(r,"li")[0]),t):this.wrapTextInElement(this.$element,t)}this.allow_div=!1},t.prototype.setHTML=function(t,i){this.no_verify=!0,this.allow_div=!0,void 0===i&&(i=!0),t=this.clean(t,!0,!1),t=t.replace(/>\s+</g,"><"),this.$element.html(t),this.$element.find("pre").each(function(t,i){var n=e(i),r=e(i).html();r.indexOf("\n")>=0&&n.html(r.replace(/\n/g,"<br>"))}),this.imageList=[],this.refreshImageList(),this.options.paragraphy&&this.wrapText(!0),this.$element.find("li:empty").append(e.Editable.INVISIBLE_SPACE),this.cleanupLists(),this.cleanify(!1,!0,!1),i&&(this.restoreSelectionByMarkers(),this.sync()),this.$element.find("span").attr("data-fr-verified",!0),this.initialized&&(this.hide(),this.closeImageMode(),this.imageMode=!1),this.no_verify=!1,this.allow_div=!1},t.prototype.beforePaste=function(){this.saveSelectionByMarkers(),this.clipboardHTML=null,this.scrollPosition=this.$window.scrollTop(),this.$pasteDiv=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; z-index: 99999; line-height: 140%;"></div>').appendTo("body"),this.$pasteDiv.focus(),this.window.setTimeout(e.proxy(this.processPaste,this),1)},t.prototype.processPaste=function(){var i=this.clipboardHTML;null===this.clipboardHTML&&(i=this.$pasteDiv.html(),this.restoreSelectionByMarkers(),this.$window.scrollTop(this.scrollPosition));var n,r=this.triggerEvent("onPaste",[i],!1);"string"==typeof r&&(i=r),i=i.replace(/<img /gi,'<img data-fr-image-pasted="true" '),i.match(/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/gi)?(n=this.wordClean(i),n=this.clean(e("<div>").append(n).html(),!1,!0),n=this.removeEmptyTags(n)):(n=this.clean(i,!1,!0),n=this.removeEmptyTags(n),t.copiedText&&e("<div>").html(n).text().replace(/\u00A0/gi," ")==t.copiedText.replace(/(\u00A0|\r|\n)/gi," ")&&(n=t.copiedHTML)),this.options.plainPaste&&(n=this.plainPasteClean(n)),""!==n&&(this.insertHTML(n,!0,!0),this.saveSelectionByMarkers(),this.removeBlankSpans(),this.$element.find(this.valid_nodes.join(":empty, ")+":empty").remove(),this.restoreSelectionByMarkers(),this.$element.find("li[data-indent]").each(e.proxy(function(t,i){this.indentLi?(e(i).removeAttr("data-indent"),this.indentLi(e(i))):e(i).removeAttr("data-indent")},this)),this.$element.find("li").each(e.proxy(function(t,i){this.wrapTextInElement(e(i),!0)},this)),this.options.paragraphy&&this.wrapText(!0),this.cleanupLists()),this.afterPaste()},t.prototype.afterPaste=function(){this.uploadPastedImages(),this.checkPlaceholder(),this.pasting=!1,this.triggerEvent("afterPaste",[],!0,!1)},t.prototype.getSelectedHTML=function(){function t(t,n){for(;3==n.nodeType||i.valid_nodes.indexOf(n.tagName)<0;)3!=n.nodeType&&e(t).wrapInner("<"+n.tagName+i.attrs(n)+"></"+n.tagName+">"),n=n.parentNode}var i=this,n="";if("undefined"!=typeof window.getSelection)for(var r=this.getRanges(),a=0;a<r.length;a++){var o=document.createElement("div");o.appendChild(r[a].cloneContents()),t(o,this.getSelectionParent()),n+=o.innerHTML}else"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(n=document.selection.createRange().htmlText);return n},t.prototype.registerPaste=function(){this.$element.on("copy cut",e.proxy(function(){this.isHTML||(t.copiedHTML=this.getSelectedHTML(),t.copiedText=e("<div>").html(t.copiedHTML).text())},this)),this.$element.on("paste",e.proxy(function(t){if(!this.isHTML){if(t.originalEvent&&(t=t.originalEvent),!this.triggerEvent("beforePaste",[],!1))return!1;if(this.clipboardPaste(t))return!1;this.clipboardHTML="",this.pasting=!0,this.scrollPosition=this.$window.scrollTop();var i=!1;if(t&&t.clipboardData&&t.clipboardData.getData){var n="",r=t.clipboardData.types;if(e.Editable.isArray(r))for(var a=0;a<r.length;a++)n+=r[a]+";";else n=r;if(/text\/html/.test(n)?this.clipboardHTML=t.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&this.browser.safari?this.clipboardHTML=t.clipboardData.getData("text/rtf"):/text\/plain/.test(n)&&!this.browser.mozilla&&(this.clipboardHTML=t.clipboardData.getData("text/plain").replace(/\n/g,"<br/>")),""!==this.clipboardHTML?i=!0:this.clipboardHTML=null,i)return this.processPaste(),t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!1}this.beforePaste()}},this))},t.prototype.clipboardPaste=function(t){if(t&&t.clipboardData&&t.clipboardData.items&&t.clipboardData.items[0]){var i=t.clipboardData.items[0].getAsFile();if(i){var n=new FileReader;return n.onload=e.proxy(function(e){var t=e.target.result;this.insertHTML('<img data-fr-image-pasted="true" src="'+t+'" />'),this.afterPaste()},this),n.readAsDataURL(i),!0}}return!1},t.prototype.uploadPastedImages=function(){this.$element.find("img[data-fr-image-pasted]").each(e.proxy(function(t,i){this.options.pasteImage?(0===i.src.indexOf("data:")?(this.options.defaultImageWidth&&e(i).attr("width",this.options.defaultImageWidth),this.options.pastedImagesUploadURL&&(setTimeout(e.proxy(function(){this.showImageLoader(),this.$progress_bar.find("span").css("width","100%").text("Please wait!"),this.showByCoordinates(e(i).offset().left+e(i).width()/2,e(i).offset().top+e(i).height()+10),this.isDisabled=!0},this),10),e.ajax({type:this.options.pastedImagesUploadRequestType,url:this.options.pastedImagesUploadURL,data:e.extend({image:decodeURIComponent(i.src)},this.options.imageUploadParams),crossDomain:this.options.crossDomain,xhrFields:{withCredentials:this.options.withCredentials},headers:this.options.headers,dataType:"json"}).done(e.proxy(function(t){try{if(t.link){var n=new Image;n.onerror=e.proxy(function(){e(i).remove(),this.hide(),this.throwImageError(1)},this),n.onload=e.proxy(function(){i.src=t.link,this.hideImageLoader(),this.hide(),this.enable(),setTimeout(function(){e(i).trigger("touchend")},50),this.triggerEvent("afterUploadPastedImage",[e(i)])},this),n.src=t.link}else t.error?(e(i).remove(),this.hide(),this.throwImageErrorWithMessage(t.error)):(e(i).remove(),this.hide(),this.throwImageError(2))}catch(r){e(i).remove(),this.hide(),this.throwImageError(4)}},this)).fail(e.proxy(function(){e(i).remove(),this.hide(),this.throwImageError(3)},this)))):0!==i.src.indexOf("http")&&e(i).remove(),e(i).removeAttr("data-fr-image-pasted")):e(i).remove()},this))},t.prototype.disable=function(){this.isDisabled=!0,this.$element.blur(),this.$box.addClass("fr-disabled"),this.$element.attr("contenteditable",!1)},t.prototype.enable=function(){this.isDisabled=!1,this.$box.removeClass("fr-disabled"),this.$element.attr("contenteditable",!0)},t.prototype.wordClean=function(e){e.indexOf("<body")>=0&&(e=e.replace(/[.\s\S\w\W<>]*<body[^>]*>([.\s\S\w\W<>]*)<\/body>[.\s\S\w\W<>]*/g,"$1")),e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),e=e.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),e=e.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),e=e.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),e=e.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var t=["style","script","applet","embed","noframes","noscript"],i=0;i<t.length;i++){var n=new RegExp("<"+t[i]+".*?"+t[i]+"(.*?)>","gi");e=e.replace(n,"")}e=e.replace(/([\w\-]*)=("[^<>"]*"|'[^<>']*'|\w+)/gi,""),e=e.replace(/&nbsp;/gi," ");var r;do r=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(e!=r);return e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),e=e.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=this.clean(e),e=e.replace(/<a>(.[^<]+)<\/a>/gi,"$1")},t.prototype.tabs=function(e){for(var t="",i=0;e>i;i++)t+="  ";return t},t.prototype.cleanTags=function(e,t){void 0===t&&(t=!1);var i,n,r,a,o=[],s=[],l=!1,c=!1,d=this.options.formatTags;for(n=0;n<e.length;n++)if(i=e.charAt(n),"<"==i){var p=e.indexOf(">",n+1);if(-1!==p){var u=e.substring(n,p+1),h=this.tagName(u);if("head"==h&&this.options.fullPage&&(c=!0),c){s.push(u),n=p,"head"==h&&this.isClosingTag(u)&&(c=!1);continue}if(this.options.allowedTags.indexOf(h)<0&&(!this.options.fullPage||["html","head","body","!doctype"].indexOf(h)<0)){n=p;continue}if(0===h.indexOf("!")){s.push(u),n=p;continue}var f=this.isClosingTag(u);if("pre"===h&&(l=f?!1:!0),this.isSelfClosingTag(u))s.push("br"===h&&l?"\n":u);else if(f)for(r=!1,a=!0;r===!1&&void 0!==a;)a=o.pop(),void 0!==a&&a.tag_name!==h?s.splice(a.i,1):(r=!0,void 0!==a&&s.push(u));else s.push(u),o.push({tag_name:h,i:s.length-1});n=p}}else"\n"===i&&this.options.beautifyCode?t&&l?s.push("<br/>"):l?s.push(i):o.length>0&&s.push(" "):9!=i.charCodeAt(0)&&s.push(i);for(;o.length>0;)a=o.pop(),s.splice(a.i,1);var m="\n";this.options.beautifyCode||(m=""),e="",o=0;var g=!0;for(n=0;n<s.length;n++)1==s[n].length?g&&" "===s[n]||(e+=s[n],g=!1):d.indexOf(this.tagName(s[n]).toLowerCase())<0?(e+=s[n],"br"==this.tagName(s[n])&&(e+=m)):this.isSelfClosingTag(s[n])?d.indexOf(this.tagName(s[n]).toLowerCase())>=0?(e+=this.tabs(o)+s[n]+m,g=!1):e+=s[n]:this.isClosingTag(s[n])?(o-=1,0===o&&(g=!0),e.length>0&&e[e.length-1]==m&&(e+=this.tabs(o)),e+=s[n]+m):(e+=m+this.tabs(o)+s[n],o+=1,g=!1);return e[0]==m&&(e=e.substring(1,e.length)),e[e.length-1]==m&&(e=e.substring(0,e.length-1)),e},t.prototype.cleanupLists=function(){this.$element.find("ul, ol").each(function(t,i){var n=e(i);if(n.find(".close-ul, .open-ul, .close-ol, .open-ol, .open-li, .close-li").length>0){var r="<"+i.tagName.toLowerCase()+">"+n.html()+"</"+i.tagName.toLowerCase()+">";r=r.replace(new RegExp('<span class="close-ul" data-fr-verified="true"></span>',"g"),"</ul>"),r=r.replace(new RegExp('<span class="open-ul" data-fr-verified="true"></span>',"g"),"<ul>"),r=r.replace(new RegExp('<span class="close-ol" data-fr-verified="true"></span>',"g"),"</ol>"),r=r.replace(new RegExp('<span class="open-ol" data-fr-verified="true"></span>',"g"),"<ol>"),r=r.replace(new RegExp('<span class="close-li" data-fr-verified="true"></span>',"g"),"</li>"),r=r.replace(new RegExp('<span class="open-li" data-fr-verified="true"></span>',"g"),"<li>"),n.replaceWith(r)}}),this.$element.find("li > td").remove(),this.$element.find("li td:empty").append(e.Editable.INVISIBLE_SPACE),this.$element.find("ul, ol").each(e.proxy(function(t,i){var n=e(i);0===n.find(this.valid_nodes.join(",")).length&&n.remove()},this)),this.$element.find("li > ul, li > ol").each(e.proxy(function(t,i){this.isFirstSibling(i)&&e(i).before("<br/>")},this)),this.$element.find("li:empty").remove();for(var t=this.$element.find("ol + ol, ul + ul"),i=0;i<t.length;i++){var n=e(t[i]);n.prev().append(n.html()),n.remove()}this.$element.find("li > td").remove(),this.$element.find("li td:empty").append(e.Editable.INVISIBLE_SPACE),this.$element.find("li > "+this.options.defaultTag).each(function(t,i){0===i.attributes.length&&e(i).replaceWith(e(i).html())})},t.prototype.clean=function(i,n,r,a,o){o||(o=e.merge([],this.options.allowedAttrs)),a||(a=e.merge([],this.options.allowedTags)),n||o.indexOf("id")>-1&&o.splice(o.indexOf("id"),1),this.options.fullPage&&(i=i.replace(/<!DOCTYPE([^>]*?)>/i,"<!-- DOCTYPE$1 -->"),i=i.replace(/<html([^>]*?)>/i,"<!-- html$1 -->"),i=i.replace(/<\/html([^>]*?)>/i,"<!-- /html$1 -->"),i=i.replace(/<body([^>]*?)>/i,"<!-- body$1 -->"),i=i.replace(/<\/body([^>]*?)>/i,"<!-- /body$1 -->"),i=i.replace(/<head>([\w\W]*)<\/head>/i,function(e,t){var i=1;return t=t.replace(/(<style)/gi,function(e,t){return t+" data-id="+i++}),"<!-- head "+t.replace(/(>)([\s|\t]*)(<)/gi,"$1$3").replace(/</gi,"[").replace(/>/gi,"]")+" -->"})),this.options.allowComments?(this.options.allowedTags.push("!--"),this.options.allowedTags.push("!")):i=i.replace(/<!--.*?-->/gi,""),this.options.allowScript?a.push("script"):i=i.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),this.options.allowStyle?a.push("style"):i=i.replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"");var s=new RegExp("<\\/?((?!(?:"+a.join(" |")+" |"+a.join(">|")+">|"+a.join("/>|")+"/>))\\w+)[^>]*?>","gi");i=i.replace(s,"");var l=new RegExp("( (?!(?:"+o.join("|")+"))[a-zA-Z0-9-_]+)=((?:.(?!\\s+(?:\\S+)=|[>]|(\\/>)))+.)","gi");if(i=i.replace(/<\/?[^>]*?>/gi,function(e){return e.replace(l,"")}),this.pasting&&t.copiedText===e("<div>").html(i).text()&&(r=!1,n=!0),r){var c=new RegExp("style=(\"[a-zA-Z0-9:;\\.\\s\\(\\)\\-\\,!\\/'%]*\"|'[a-zA-Z0-9:;\\.\\s\\(\\)\\-\\,!\\/\"%]*')","gi");i=i.replace(c,""),i=i.replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"")}i=this.cleanTags(i,!0),i=i.replace(/(\r|\n)/gi,"");var d=new RegExp("<([^>]*)( src| href)=('[^']*'|\"[^\"]*\"|[^\\s>]+)([^>]*)>","gi");if(i=i.replace(d,e.proxy(function(e,t,i,n,r){return"<"+t+i+'="'+this.sanitizeURL(n.replace(/^["'](.*)["']\/?$/gi,"$1"))+'"'+r+">"},this)),!n){var p=e("<div>").append(i);p.find('[class]:not([class^="fr-"])').each(function(t,i){e(i).removeAttr("class")}),i=p.html()}return i},t.prototype.removeBlankSpans=function(){this.no_verify=!0,this.$element.find("span").removeAttr("data-fr-verified"),this.$element.find("span").each(e.proxy(function(t,i){0===this.attrs(i).length&&e(i).replaceWith(e(i).html())},this)),this.$element.find("span").attr("data-fr-verified",!0),this.no_verify=!1},t.prototype.plainPasteClean=function(t){var i=e("<div>").html(t);i.find("h1, h2, h3, h4, h5, h6, pre, blockquote, li").each(e.proxy(function(t,i){e(i).replaceWith("<"+this.options.defaultTag+">"+e(i).html()+"</"+this.options.defaultTag+">")},this));for(var n=function(t,i){e(i).replaceWith(e(i).html())};i.find("strong, em, strike, b, u, i, sup, sub, span, a").length;)i.find("strong, em, strike, b, u, i, sup, sub, span, a").each(n);return i.html()},t.prototype.removeEmptyTags=function(t){for(var i,n=e("<div>").html(t),r=n.find("*:empty:not(br, img, td, th)");r.length;){for(i=0;i<r.length;i++)e(r[i]).remove();r=n.find("*:empty:not(br, img, td, th)")}n.find("> div").each(function(t,i){e(i).replaceWith(e(i).html()+"<br/>")});for(var a=n.find("div");a.length;){for(i=0;i<a.length;i++){var o=e(a[i]),s=o.html().replace(/\u0009/gi,"").trim();o.replaceWith(s)}a=n.find("div")}return n.html()},t.prototype.initElementStyle=function(){this.editableDisabled||this.$element.attr("contenteditable",!0);var e="froala-view froala-element "+this.options.editorClass;this.browser.msie&&t.getIEversion()<9&&(e+=" ie8"),this.$element.css("outline",0),this.browser.msie||(e+=" not-msie"),this.$element.addClass(e)},t.prototype.CJKclean=function(e){var t=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return e.replace(t,"")},t.prototype.enableTyping=function(){this.typingTimer=null,this.$element.on("keydown","textarea, input",function(e){e.stopPropagation()}),this.$element.on("keydown cut",e.proxy(function(t){if(!this.isHTML){if(!this.options.multiLine&&13==t.which)return t.preventDefault(),t.stopPropagation(),!1;if("keydown"===t.type&&!this.triggerEvent("keydown",[t],!1))return!1;clearTimeout(this.typingTimer),this.ajaxSave=!1,this.oldHTML=this.getHTML(!0,!1),this.typingTimer=setTimeout(e.proxy(function(){var e=this.getHTML(!0,!1);this.ime||this.CJKclean(e)===this.CJKclean(this.oldHTML)||this.CJKclean(e)!==e||this.sync()},this),Math.max(this.options.typingTimer,500))}},this))},t.prototype.removeMarkersByRegex=function(e){return e.replace(/<span[^>]*? class\s*=\s*["']?f-marker["']?[^>]+>([\S\s][^\/])*<\/span>/gi,"")},t.prototype.getImageHTML=function(){return JSON.stringify({src:this.$element.find("img").attr("src"),style:this.$element.find("img").attr("style"),alt:this.$element.find("img").attr("alt"),width:this.$element.find("img").attr("width"),link:this.$element.find("a").attr("href"),link_title:this.$element.find("a").attr("title"),link_target:this.$element.find("a").attr("target")})},t.prototype.getLinkHTML=function(){return JSON.stringify({body:this.$element.html(),href:this.$element.attr("href"),title:this.$element.attr("title"),popout:this.$element.hasClass("popout"),nofollow:"nofollow"==this.$element.attr("ref"),blank:"_blank"==this.$element.attr("target"),cls:this.$element.attr("class")?this.$element.attr("class").replace(/froala-element ?|not-msie ?|froala-view ?/gi,"").trim():""})},t.prototype.addFrTag=function(){this.$element.find(this.valid_nodes.join(",")+", table, ul, ol, img").addClass("fr-tag")},t.prototype.removeFrTag=function(){this.$element.find(this.valid_nodes.join(",")+", table, ul, ol, img").removeClass("fr-tag")},t.prototype.getHTML=function(t,i,n){if(void 0===t&&(t=!1),void 0===i&&(i=this.options.useFrTag),void 0===n&&(n=!0),this.$element.hasClass("f-placeholder")&&!t)return"";if(this.isHTML)return this.$html_area.val();if(this.isImage)return this.getImageHTML();if(this.isLink)return this.getLinkHTML();this.$element.find("a").data("fr-link",!0),i&&this.addFrTag(),this.$element.find(".f-img-editor > img").each(e.proxy(function(t,i){e(i).removeClass("fr-fin fr-fil fr-fir fr-dib fr-dii").addClass(this.getImageClass(e(i).parent().attr("class")))},this)),this.options.useClasses||this.$element.find("img").each(e.proxy(function(t,i){var n=e(i);n.attr("data-style",this.getImageStyle(n))},this)),this.$element.find("pre").each(e.proxy(function(t,i){var n=e(i),r=n.html(),a=r.replace(/\&nbsp;/gi," ");r!=a&&(this.saveSelectionByMarkers(),n.html(a),this.restoreSelectionByMarkers())},this)),this.$element.find("pre br").addClass("fr-br"),this.$element.find('[class=""]').removeAttr("class");var r=this.$element.html();if(this.removeFrTag(),this.$element.find("pre br").removeAttr("class"),r=r.replace(/<a[^>]*?><\/a>/g,""),t||(r=this.removeMarkersByRegex(r)),r=r.replace(/<span[^>]*? class\s*=\s*["']?f-img-handle[^>]+><\/span>/gi,""),r=r.replace(/^([\S\s]*)<span[^>]*? class\s*=\s*["']?f-img-editor[^>]+>([\S\s]*)<\/span>([\S\s]*)$/gi,"$1$2$3"),r=r.replace(/^([\S\s]*)<span[^>]*? class\s*=\s*["']?f-img-wrap[^>]+>([\S\s]*)<\/span>([\S\s]*)$/gi,"$1$2$3"),this.options.useClasses||(r=r.replace(/data-style/gi,"style"),r=r.replace(/(<img[^>]*)( class\s*=['"]?[a-zA-Z0-9- ]+['"]?)([^>]*\/?>)/gi,"$1$3")),this.options.simpleAmpersand&&(r=r.replace(/\&amp;/gi,"&")),n&&(r=r.replace(/ data-fr-verified="true"/gi,"")),this.options.beautifyCode&&(r=r.replace(/\n/gi,"")),r=r.replace(/<br class="fr-br">/gi,"\n"),r=r.replace(/\u200B/gi,""),this.options.fullPage&&(r=r.replace(/<!-- DOCTYPE([^>]*?) -->/i,"<!DOCTYPE$1>"),r=r.replace(/<!-- html([^>]*?) -->/i,"<html$1>"),r=r.replace(/<!-- \/html([^>]*?) -->/i,"</html$1>"),r=r.replace(/<!-- body([^>]*?) -->/i,"<body$1>"),r=r.replace(/<!-- \/body([^>]*?) -->/i,"</body$1>"),r=r.replace(/<!-- head ([\w\W]*?) -->/i,function(e,t){return"<head>"+t.replace(/\[/gi,"<").replace(/\]/gi,">")+"</head>"})),i){var a=this.triggerEvent("getHTML",[r],!1);if("string"==typeof a)return a}return r},t.prototype.getText=function(){return this.$element.text()},t.prototype.setDirty=function(e){this.dirty=e,e||(clearTimeout(this.ajaxInterval),this.ajaxHTML=this.getHTML(!1,!1))},t.prototype.initAjaxSaver=function(){this.ajaxHTML=this.getHTML(!1,!1),this.ajaxSave=!0,this.ajaxInterval=setInterval(e.proxy(function(){var e=this.getHTML(!1,!1);(this.ajaxHTML!=e||this.dirty)&&this.ajaxSave&&(this.options.autosave&&this.save(),this.dirty=!1,this.ajaxHTML=e),this.ajaxSave=!0},this),Math.max(this.options.autosaveInterval,100))},t.prototype.disableBrowserUndo=function(){this.$element.keydown(e.proxy(function(e){var t=e.which,i=(e.ctrlKey||e.metaKey)&&!e.altKey;if(!this.isHTML&&i){if(90==t&&e.shiftKey)return e.preventDefault(),!1;if(90==t)return e.preventDefault(),!1}},this))},t.prototype.shortcutEnabled=function(e){return this.options.shortcutsAvailable.indexOf(e)>=0},t.prototype.shortcuts_map={69:{cmd:"show",params:[null],id:"show"},66:{cmd:"exec",params:["bold"],id:"bold"},73:{cmd:"exec",params:["italic"],id:"italic"},85:{cmd:"exec",params:["underline"],id:"underline"},83:{cmd:"exec",params:["strikeThrough"],id:"strikeThrough"},75:{cmd:"exec",params:["createLink"],id:"createLink"},80:{cmd:"exec",params:["insertImage"],id:"insertImage"},221:{cmd:"exec",params:["indent"],id:"indent"},219:{cmd:"exec",params:["outdent"],id:"outdent"},72:{cmd:"exec",params:["html"],id:"html"},48:{cmd:"exec",params:["formatBlock","n"],id:"formatBlock n"},49:{cmd:"exec",params:["formatBlock","h1"],id:"formatBlock h1"},50:{cmd:"exec",params:["formatBlock","h2"],id:"formatBlock h2"},51:{cmd:"exec",params:["formatBlock","h3"],id:"formatBlock h3"},52:{cmd:"exec",params:["formatBlock","h4"],id:"formatBlock h4"},53:{cmd:"exec",params:["formatBlock","h5"],id:"formatBlock h5"},54:{cmd:"exec",params:["formatBlock","h6"],id:"formatBlock h6"},222:{cmd:"exec",params:["formatBlock","blockquote"],id:"formatBlock blockquote"},220:{cmd:"exec",params:["formatBlock","pre"],id:"formatBlock pre"}},t.prototype.ctrlKey=function(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0
}else if(e.ctrlKey&&!e.altKey)return!0;return!1},t.prototype.initShortcuts=function(){this.options.shortcuts&&this.$element.on("keydown",e.proxy(function(e){var t=e.which,i=this.ctrlKey(e);if(!this.isHTML&&i){if(this.shortcuts_map[t]&&this.shortcutEnabled(this.shortcuts_map[t].id))return this.execDefaultShortcut(this.shortcuts_map[t].cmd,this.shortcuts_map[t].params);if(90==t&&e.shiftKey)return e.preventDefault(),e.stopPropagation(),this.redo(),!1;if(90==t)return e.preventDefault(),e.stopPropagation(),this.undo(),!1}},this))},t.prototype.initTabs=function(){this.$element.on("keydown",e.proxy(function(e){var t=e.which;if(9!=t||e.shiftKey)9==t&&e.shiftKey&&(this.raiseEvent("shift+tab")?this.options.tabSpaces?e.preventDefault():this.blur():e.preventDefault());else if(this.raiseEvent("tab"))if(this.options.tabSpaces){e.preventDefault();var i="&nbsp;&nbsp;&nbsp;&nbsp;",n=this.getSelectionElements()[0];"PRE"===n.tagName&&(i="    "),this.insertHTML(i,!1)}else this.blur();else e.preventDefault()},this))},t.prototype.textEmpty=function(t){var i=e(t).text().replace(/(\r\n|\n|\r|\t)/gm,"");return(""===i||t===this.$element.get(0))&&0===e(t).find("br").length},t.prototype.inEditor=function(e){for(;e&&"BODY"!==e.tagName;){if(e===this.$element.get(0))return!0;e=e.parentNode}return!1},t.prototype.focus=function(t){if(this.isDisabled)return!1;if(void 0===t&&(t=!0),""!==this.text()&&!this.$element.is(":focus"))return void(this.browser.msie||this.$element.focus());if(!this.isHTML){if(t&&!this.pasting&&this.$element.focus(),this.pasting&&!this.$element.is(":focus")&&this.$element.focus(),this.$element.hasClass("f-placeholder"))return void this.setSelection(this.$element.find(this.options.defaultTag).length>0?this.$element.find(this.options.defaultTag)[0]:this.$element.get(0));var i=this.getRange();if(""===this.text()&&i&&(0===i.startOffset||i.startContainer===this.$element.get(0)||!this.inEditor(i.startContainer))){var n,r,a=this.getSelectionElements();if(e.merge(["IMG","BR"],this.valid_nodes).indexOf(this.getSelectionElement().tagName)<0)return!1;if(i.startOffset>0&&this.valid_nodes.indexOf(this.getSelectionElement().tagName)>=0&&"BODY"!=i.startContainer.tagName||i.startContainer&&3===i.startContainer.nodeType)return;if(!this.options.paragraphy&&a.length>=1&&a[0]===this.$element.get(0)){var o=function(t){if(!t)return null;if(3==t.nodeType&&t.textContent.length>0)return t;if(1==t.nodeType&&"BR"==t.tagName)return t;for(var i=e(t).contents(),n=0;n<i.length;n++){var r=o(i[n]);if(null!=r)return r}return null};if(0===i.startOffset&&this.$element.contents().length>0&&3!=this.$element.contents()[0].nodeType){var s=o(this.$element.get(0));null!=s&&("BR"==s.tagName?this.$element.is(":focus")&&(e(s).before(this.markers_html),this.restoreSelectionByMarkers()):this.setSelection(s))}return!1}if(a.length>=1&&a[0]!==this.$element.get(0))for(n=0;n<a.length;n++){if(r=a[n],!this.textEmpty(r)||this.browser.msie)return void this.setSelection(r);if(this.textEmpty(r)&&["LI","TD"].indexOf(r.tagName)>=0)return}if(i.startContainer===this.$element.get(0)&&i.startOffset>0&&!this.options.paragraphy)return void this.setSelection(this.$element.get(0),i.startOffset);for(a=this.$element.find(this.valid_nodes.join(",")),n=0;n<a.length;n++)if(r=a[n],!this.textEmpty(r)&&0===e(r).find(this.valid_nodes.join(",")).length)return void this.setSelection(r);this.setSelection(this.$element.get(0))}}},t.prototype.addMarkersAtEnd=function(t){var i=t.find(this.valid_nodes.join(", "));0===i.length&&i.push(t.get(0));var n=i[i.length-1];e(n).append(this.markers_html)},t.prototype.setFocusAtEnd=function(e){void 0===e&&(e=this.$element),this.addMarkersAtEnd(e),this.restoreSelectionByMarkers()},t.prototype.breakHTML=function(t){this.removeMarkers(),0===this.$element.find("break").length&&this.insertSimpleHTML("<break></break>");var i=this.parents(this.$element.find("break"),e.merge(["UL","OL"],this.valid_nodes).join(","))[0];if(this.parents(e(i),"ul, ol").length&&(i=this.parents(e(i),"ul, ol")[0]),void 0===i&&(i=this.$element.get(0)),["UL","OL"].indexOf(i.tagName)>=0){var n=e("<div>").html(t);n.find("> li").wrap("<"+i.tagName+">"),t=n.html()}if(i==this.$element.get(0)){if(this.$element.find("break").next().length){this.insertSimpleHTML('<div id="inserted-div">'+t+"</div>");var r=this.$element.find("div#inserted-div");this.setFocusAtEnd(r),this.saveSelectionByMarkers(),r.replaceWith(r.contents()),this.restoreSelectionByMarkers()}else this.insertSimpleHTML(t),this.setFocusAtEnd();return this.$element.find("break").remove(),this.checkPlaceholder(),!0}if("TD"===i.tagName)return this.$element.find("break").remove(),this.insertSimpleHTML(t),!0;var a=e("<div>").html(t);if(this.addMarkersAtEnd(a),t=a.html(),this.emptyElement(e(i)))return e(i).replaceWith(t),this.restoreSelectionByMarkers(),this.checkPlaceholder(),!0;this.$element.find("li").each(e.proxy(function(t,i){this.emptyElement(i)&&e(i).addClass("empty-li")},this));for(var o,s,l=e("<div></div>").append(e(i).clone()).html(),c=[],d={},p=[],u=0,h=0;h<l.length;h++)if(s=l.charAt(h),"<"==s){var f=l.indexOf(">",h+1);if(-1!==f){o=l.substring(h,f+1);var m=this.tagName(o);if(h=f,"break"==m){if(!this.isClosingTag(o)){for(var g=c.length-1;g>=0;g--){var v=this.tagName(c[g]);p.push("</"+v+">")}p.push(t);for(var y=0;y<c.length;y++)p.push(c[y])}}else if(p.push(o),!this.isSelfClosingTag(o))if(this.isClosingTag(o)){var b=d[m].pop();c.splice(b,1)}else c.push(o),void 0===d[m]&&(d[m]=[]),d[m].push(c.length-1)}}else u++,p.push(s);e(i).replaceWith(p.join("")),this.$element.find("li").each(e.proxy(function(t,i){var n=e(i);n.hasClass("empty-li")?n.removeClass("empty-li"):this.emptyElement(i)&&n.remove()},this)),this.cleanupLists(),this.restoreSelectionByMarkers()},t.prototype.insertSimpleHTML=function(e){var t,i;if(this.no_verify=!0,this.window.getSelection){if(t=this.window.getSelection(),t.getRangeAt&&t.rangeCount){i=t.getRangeAt(0),i.deleteContents();var n=this.document.createElement("div");n.innerHTML=e;for(var r,a,o=this.document.createDocumentFragment();r=n.firstChild;)a=o.appendChild(r);i.insertNode(o),a&&(i=i.cloneRange(),i.setStartAfter(a),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else if((t=this.document.selection)&&"Control"!=t.type){var s=t.createRange();s.collapse(!0),t.createRange().pasteHTML(e)}this.no_verify=!1},t.prototype.insertHTML=function(t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=!1),!this.isHTML&&i&&this.focus(),this.removeMarkers(),this.insertSimpleHTML("<break></break>"),this.checkPlaceholder(!0),this.$element.hasClass("f-placeholder"))return this.$element.html(t),this.options.paragraphy&&this.wrapText(!0),this.$element.find("break").remove(),this.setFocusAtEnd(),this.checkPlaceholder(),!1;for(var r=e("<div>").append(t).find("*"),a=0;a<r.length;a++)if(this.valid_nodes.indexOf(r[a].tagName)>=0)return this.breakHTML(t),this.$element.find("break").remove(),!1;this.$element.find("break").remove(),this.insertSimpleHTML(t)},t.prototype.execDefaultShortcut=function(e,t){return this[e].apply(this,t),!1},t.prototype.initEditor=function(){var i="froala-editor";this.mobile()&&(i+=" touch"),this.browser.msie&&t.getIEversion()<9&&(i+=" ie8"),this.$editor=e('<div class="'+i+'" style="display: none;">');var n=this.$document.find(this.options.scrollableContainer);n.append(this.$editor),this.options.inlineMode?this.initInlineEditor():this.initBasicEditor()},t.prototype.refreshToolbarPosition=function(){this.$window.scrollTop()>this.$box.offset().top&&this.$window.scrollTop()<this.$box.offset().top+this.$box.outerHeight()-this.$editor.outerHeight()?(this.$element.css("padding-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$placeholder.css("margin-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$editor.addClass("f-scroll").removeClass("f-scroll-abs").css("bottom","").css("left",this.$box.offset().left+parseFloat(this.$box.css("padding-left"),10)-this.$window.scrollLeft()).width(this.$box.width()-parseFloat(this.$editor.css("border-left-width"),10)-parseFloat(this.$editor.css("border-right-width"),10)),this.iOS()&&(this.$element.is(":focus")?this.$editor.css("top",this.$window.scrollTop()):this.$editor.css("top",""))):this.$window.scrollTop()<this.$box.offset().top?this.iOS()&&this.$element.is(":focus")?(this.$element.css("padding-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$placeholder.css("margin-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$editor.addClass("f-scroll").removeClass("f-scroll-abs").css("bottom","").css("left",this.$box.offset().left+parseFloat(this.$box.css("padding-left"),10)-this.$window.scrollLeft()).width(this.$box.width()-parseFloat(this.$editor.css("border-left-width"),10)-parseFloat(this.$editor.css("border-right-width"),10)),this.$editor.css("top",this.$box.offset().top)):(this.$editor.removeClass("f-scroll f-scroll-abs").css("bottom","").css("top","").width(""),this.$element.css("padding-top",""),this.$placeholder.css("margin-top","")):this.$window.scrollTop()>this.$box.offset().top+this.$box.outerHeight()-this.$editor.outerHeight()&&!this.$editor.hasClass("f-scroll-abs")&&(this.$element.css("padding-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$placeholder.css("margin-top",this.$editor.outerHeight()+this.$element.data("padding-top")),this.$editor.removeClass("f-scroll").addClass("f-scroll-abs"),this.$editor.css("bottom",0).css("top","").css("left",""))},t.prototype.toolbarTop=function(){this.options.toolbarFixed||this.options.inlineMode||(this.$element.data("padding-top",parseInt(this.$element.css("padding-top"),10)),this.$window.on("scroll resize load",e.proxy(function(){this.refreshToolbarPosition()},this)),this.iOS()&&this.$element.on("focus blur",e.proxy(function(){this.refreshToolbarPosition()},this)))},t.prototype.initBasicEditor=function(){this.$element.addClass("f-basic"),this.$wrapper.addClass("f-basic"),this.$popup_editor=this.$editor.clone();var e=this.$document.find(this.options.scrollableContainer);this.$popup_editor.appendTo(e).addClass("f-inline"),this.$editor.addClass("f-basic").show(),this.$editor.insertBefore(this.$wrapper),this.toolbarTop()},t.prototype.initInlineEditor=function(){this.$editor.addClass("f-inline"),this.$element.addClass("f-inline"),this.$popup_editor=this.$editor},t.prototype.initDrag=function(){this.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!this.window.FormData,progress:"upload"in new XMLHttpRequest}},t.prototype.initOptions=function(){this.setDimensions(),this.setSpellcheck(),this.setImageUploadURL(),this.setButtons(),this.setDirection(),this.setZIndex(),this.setTheme(),this.options.editInPopup&&this.buildEditPopup(),this.editableDisabled||(this.setPlaceholder(),this.setPlaceholderEvents())},t.prototype.isTouch=function(){return WYSIWYGModernizr.touch&&void 0!==this.window.Touch},t.prototype.initEditorSelection=function(){this.$element.on("keyup",e.proxy(function(e){return this.triggerEvent("keyup",[e],!1)},this)),this.$element.on("focus",e.proxy(function(){this.blurred&&(this.blurred=!1,this.pasting||""!==this.text()||this.focus(!1),this.triggerEvent("focus",[],!1))},this)),this.$element.on("mousedown touchstart",e.proxy(function(){return this.isDisabled?!1:void(this.isResizing()||(this.closeImageMode(),this.hide()))},this)),this.options.disableRightClick&&this.$element.contextmenu(e.proxy(function(e){return e.preventDefault(),this.options.inlineMode&&this.$element.focus(),!1},this)),this.$element.on(this.mouseup,e.proxy(function(t){if(this.isDisabled)return!1;if(!this.isResizing()){var i=this.text();t.stopPropagation(),this.imageMode=!1,!(""!==i||this.options.alwaysVisible||this.options.editInPopup||(3==t.which||2==t.button)&&this.options.inlineMode&&!this.isImage&&this.options.disableRightClick)||this.link||this.imageMode?this.options.inlineMode||this.refreshButtons():setTimeout(e.proxy(function(){i=this.text(),!(""!==i||this.options.alwaysVisible||this.options.editInPopup||(3==t.which||2==t.button)&&this.options.inlineMode&&!this.isImage&&this.options.disableRightClick)||this.link||this.imageMode||(this.show(t),this.options.editInPopup&&this.showEditPopup())},this),0)}this.hideDropdowns(),this.hideOtherEditors()},this)),this.$editor.on(this.mouseup,e.proxy(function(e){return this.isDisabled?!1:void(this.isResizing()||(e.stopPropagation(),this.options.inlineMode===!1&&this.hide()))},this)),this.$editor.on("mousedown",".fr-dropdown-menu",e.proxy(function(e){return this.isDisabled?!1:(e.stopPropagation(),void(this.noHide=!0))},this)),this.$popup_editor.on("mousedown",".fr-dropdown-menu",e.proxy(function(e){return this.isDisabled?!1:(e.stopPropagation(),void(this.noHide=!0))},this)),this.$popup_editor.on("mouseup",e.proxy(function(e){return this.isDisabled?!1:void(this.isResizing()||e.stopPropagation())},this)),this.$edit_popup_wrapper&&this.$edit_popup_wrapper.on("mouseup",e.proxy(function(e){return this.isDisabled?!1:void(this.isResizing()||e.stopPropagation())},this)),this.setDocumentSelectionChangeEvent(),this.setWindowMouseUpEvent(),this.setWindowKeyDownEvent(),this.setWindowKeyUpEvent(),this.setWindowOrientationChangeEvent(),this.setWindowHideEvent(),this.setWindowBlurEvent(),this.options.trackScroll&&this.setWindowScrollEvent(),this.setWindowResize()},t.prototype.setWindowResize=function(){this.$window.on("resize."+this._id,e.proxy(function(){this.hide(),this.closeImageMode(),this.imageMode=!1},this))},t.prototype.blur=function(t){this.blurred||this.pasting||(this.selectionDisabled=!0,this.triggerEvent("blur",[]),t&&0===e("*:focus").length&&this.clearSelection(),this.isLink||this.isImage||(this.selectionDisabled=!1),this.blurred=!0)},t.prototype.setWindowBlurEvent=function(){this.$window.on("blur."+this._id,e.proxy(function(e,t){this.blur(t)},this))},t.prototype.setWindowHideEvent=function(){this.$window.on("hide."+this._id,e.proxy(function(){this.isResizing()?this.$element.find(".f-img-handle").trigger("moveend"):this.hide(!1)},this))},t.prototype.setWindowOrientationChangeEvent=function(){this.$window.on("orientationchange."+this._id,e.proxy(function(){setTimeout(e.proxy(function(){this.hide()},this),10)},this))},t.prototype.setDocumentSelectionChangeEvent=function(){this.$document.on("selectionchange."+this._id,e.proxy(function(t){return this.isDisabled?!1:void(this.isResizing()||this.isScrolling||(clearTimeout(this.selectionChangedTimeout),this.selectionChangedTimeout=setTimeout(e.proxy(function(){if(this.options.inlineMode&&this.selectionInEditor()&&this.link!==!0&&this.isTouch()){var e=this.text();""!==e?(this.iPod()?this.options.alwaysVisible&&this.hide():this.show(null),t.stopPropagation()):this.options.alwaysVisible?this.show(null):(this.hide(),this.closeImageMode(),this.imageMode=!1)}},this),75)))},this))},t.prototype.setWindowMouseUpEvent=function(){this.$window.on(this.mouseup+"."+this._id,e.proxy(function(){this.isResizing()||this.isScrolling||this.isDisabled||(this.$bttn_wrapper.find("button.fr-trigger").removeClass("active"),this.selectionInEditor()&&""!==this.text()&&!this.isTouch()?this.show(null):this.$popup_editor.is(":visible")&&(this.hide(),this.closeImageMode(),this.imageMode=!1),this.blur(!0)),e("[data-down]").removeAttr("data-down")},this))},t.prototype.setWindowKeyDownEvent=function(){this.$window.on("keydown."+this._id,e.proxy(function(t){var i=t.which;if(27==i&&(this.focus(),this.restoreSelection(),this.hide(),this.closeImageMode(),this.imageMode=!1),this.imageMode){if(13==i)return this.$element.find(".f-img-editor").parents(".f-img-wrap").before("<br/>"),this.sync(),this.$element.find(".f-img-editor img").click(),!1;if(46==i||8==i)return t.stopPropagation(),t.preventDefault(),setTimeout(e.proxy(function(){this.removeImage(this.$element.find(".f-img-editor img"))},this),0),!1}else if(this.selectionInEditor()){if(this.isDisabled)return!0;var n=(t.ctrlKey||t.metaKey)&&!t.altKey;!n&&this.$popup_editor.is(":visible")&&this.$bttn_wrapper.is(":visible")&&this.options.inlineMode&&(this.hide(),this.closeImageMode(),this.imageMode=!1)}},this))},t.prototype.setWindowKeyUpEvent=function(){this.$window.on("keyup."+this._id,e.proxy(function(){return this.isDisabled?!1:void(this.selectionInEditor()&&""!==this.text()&&!this.$popup_editor.is(":visible")&&this.repositionEditor())},this))},t.prototype.setWindowScrollEvent=function(){e.merge(this.$window,e(this.options.scrollableContainer)).on("scroll."+this._id,e.proxy(function(){return this.isDisabled?!1:(clearTimeout(this.scrollTimer),this.isScrolling=!0,void(this.scrollTimer=setTimeout(e.proxy(function(){this.isScrolling=!1},this),2500)))},this))},t.prototype.setPlaceholder=function(t){t&&(this.options.placeholder=t),this.$textarea&&this.$textarea.attr("placeholder",this.options.placeholder),this.$placeholder||(this.$placeholder=e('<span class="fr-placeholder" unselectable="on"></span>').bind("click",e.proxy(function(){this.focus()},this)),this.$element.after(this.$placeholder)),this.$placeholder.text(this.options.placeholder)},t.prototype.isEmpty=function(){var t=this.$element.text().replace(/(\r\n|\n|\r|\t|\u200B|\u0020)/gm,"");return""===t&&0===this.$element.find("img, table, iframe, input, textarea, hr, li").length&&0===this.$element.find(this.options.defaultTag+" > br, br").length&&0===this.$element.find(e.map(this.valid_nodes,e.proxy(function(e){return this.options.defaultTag==e?null:e},this)).join(", ")).length},t.prototype.checkPlaceholder=function(i){if(this.isDisabled&&!i)return!1;if(this.pasting&&!i)return!1;if(this.$element.find("td:empty, th:empty").append(e.Editable.INVISIBLE_SPACE),this.$element.find(this.valid_nodes.join(":empty, ")+":empty").append(this.br),!this.isHTML)if(this.isEmpty()&&!this.fakeEmpty()){var n,r=this.selectionInEditor()||this.$element.is(":focus");this.options.paragraphy?(n=e("<"+this.options.defaultTag+">"+this.br+"</"+this.options.defaultTag+">"),this.$element.html(n),r&&this.setSelection(n.get(0)),this.$element.addClass("f-placeholder")):(0!==this.$element.find("br").length||this.browser.msie&&t.getIEversion()<=10||(this.$element.append(this.br),r&&this.browser.msie&&this.focus()),this.$element.addClass("f-placeholder"))}else!this.$element.find(this.options.defaultTag+", li").length&&this.options.paragraphy?(this.wrapText(!0),this.$element.find(this.options.defaultTag).length&&""===this.text()?this.setSelection(this.$element.find(this.options.defaultTag)[0],this.$element.find(this.options.defaultTag).text().length,null,this.$element.find(this.options.defaultTag).text().length):this.$element.removeClass("f-placeholder")):this.fakeEmpty()===!1&&(!this.options.paragraphy||this.$element.find(this.valid_nodes.join(",")).length>=1)?this.$element.removeClass("f-placeholder"):!this.options.paragraphy&&this.$element.find(this.valid_nodes.join(",")).length>=1?this.$element.removeClass("f-placeholder"):this.$element.addClass("f-placeholder");return!0},t.prototype.fakeEmpty=function(e){void 0===e&&(e=this.$element);var t=!0;this.options.paragraphy&&(t=1==e.find(this.options.defaultTag).length?!0:!1);var i=e.text().replace(/(\r\n|\n|\r|\t|\u200B)/gm,"");return""===i&&t&&1==e.find("br, li").length&&0===e.find("img, table, iframe, input, textarea, hr, li").length},t.prototype.setPlaceholderEvents=function(){this.browser.msie&&t.getIEversion()<9||(this.$element.on("focus click",e.proxy(function(e){return this.isDisabled?!1:void(""!==this.$element.text()||this.pasting||(this.$element.data("focused")||"click"!==e.type?"focus"==e.type&&this.focus(!1):this.$element.focus(),this.$element.data("focused",!0)))},this)),this.$element.on("keyup keydown input focus placeholderCheck",e.proxy(function(){return this.checkPlaceholder()},this)),this.$element.trigger("placeholderCheck"))},t.prototype.setDimensions=function(e,t,i,n){e&&(this.options.height=e),t&&(this.options.width=t),i&&(this.options.minHeight=i),n&&(this.options.maxHeight=n),"auto"!=this.options.height&&(this.$wrapper.css("height",this.options.height),this.$element.css("minHeight",this.options.height-parseInt(this.$element.css("padding-top"),10)-parseInt(this.$element.css("padding-bottom"),10))),"auto"!=this.options.minHeight&&(this.$wrapper.css("minHeight",this.options.minHeight),this.$element.css("minHeight",this.options.minHeight)),"auto"!=this.options.maxHeight&&this.$wrapper.css("maxHeight",this.options.maxHeight),"auto"!=this.options.width&&this.$box.css("width",this.options.width)},t.prototype.setDirection=function(e){e&&(this.options.direction=e),"ltr"!=this.options.direction&&"rtl"!=this.options.direction&&(this.options.direction="ltr"),"rtl"==this.options.direction?(this.$box.addClass("f-rtl"),this.$element.addClass("f-rtl"),this.$editor.addClass("f-rtl"),this.$popup_editor.addClass("f-rtl"),this.$image_modal&&this.$image_modal.addClass("f-rtl")):(this.$box.removeClass("f-rtl"),this.$element.removeClass("f-rtl"),this.$editor.removeClass("f-rtl"),this.$popup_editor.removeClass("f-rtl"),this.$image_modal&&this.$image_modal.removeClass("f-rtl"))},t.prototype.setZIndex=function(e){e&&(this.options.zIndex=e),this.$editor.css("z-index",this.options.zIndex),this.$popup_editor.css("z-index",this.options.zIndex+1),this.$overlay&&this.$overlay.css("z-index",this.options.zIndex+2),this.$image_modal&&this.$image_modal.css("z-index",this.options.zIndex+3)},t.prototype.setTheme=function(e){e&&(this.options.theme=e),null!=this.options.theme&&(this.$editor.addClass(this.options.theme+"-theme"),this.$popup_editor.addClass(this.options.theme+"-theme"),this.$box&&this.$box.addClass(this.options.theme+"-theme"),this.$image_modal&&this.$image_modal.addClass(this.options.theme+"-theme"))},t.prototype.setSpellcheck=function(e){void 0!==e&&(this.options.spellcheck=e),this.$element.attr("spellcheck",this.options.spellcheck)},t.prototype.customizeText=function(t){if(t){var i=this.$editor.find("[title]").add(this.$popup_editor.find("[title]"));this.$image_modal&&(i=i.add(this.$image_modal.find("[title]"))),i.each(e.proxy(function(i,n){for(var r in t)e(n).attr("title").toLowerCase()==r.toLowerCase()&&e(n).attr("title",t[r])},this)),i=this.$editor.find('[data-text="true"]').add(this.$popup_editor.find('[data-text="true"]')),this.$image_modal&&(i=i.add(this.$image_modal.find('[data-text="true"]'))),i.each(e.proxy(function(i,n){for(var r in t)e(n).text().toLowerCase()==r.toLowerCase()&&e(n).text(t[r])},this))}},t.prototype.setLanguage=function(t){void 0!==t&&(this.options.language=t),e.Editable.LANGS[this.options.language]&&(this.customizeText(e.Editable.LANGS[this.options.language].translation),e.Editable.LANGS[this.options.language].direction&&e.Editable.LANGS[this.options.language].direction!=e.Editable.DEFAULTS.direction&&this.setDirection(e.Editable.LANGS[this.options.language].direction),e.Editable.LANGS[this.options.language].translation[this.options.placeholder]&&this.setPlaceholder(e.Editable.LANGS[this.options.language].translation[this.options.placeholder]))},t.prototype.setCustomText=function(e){e&&(this.options.customText=e),this.options.customText&&this.customizeText(this.options.customText)},t.prototype.execHTML=function(){this.html()},t.prototype.initHTMLArea=function(){this.$html_area=e('<textarea wrap="hard">').keydown(function(t){var i=t.keyCode||t.which;if(9==i){t.preventDefault();var n=e(this).get(0).selectionStart,r=e(this).get(0).selectionEnd;e(this).val(e(this).val().substring(0,n)+"	"+e(this).val().substring(r)),e(this).get(0).selectionStart=e(this).get(0).selectionEnd=n+1}}).focus(e.proxy(function(){this.blurred&&(this.blurred=!1,this.triggerEvent("focus",[],!1))},this)).mouseup(e.proxy(function(){this.blurred&&(this.blurred=!1,this.triggerEvent("focus",[],!1))},this))},t.prototype.command_dispatcher={align:function(e){var t=this.buildDropdownAlign(e),i=this.buildDropdownButton(e,t);return i},formatBlock:function(e){var t=this.buildDropdownFormatBlock(e),i=this.buildDropdownButton(e,t);return i},html:function(t){var i=this.buildDefaultButton(t);return this.options.inlineMode&&this.$box.append(e(i).clone(!0).addClass("html-switch").attr("title","Hide HTML").click(e.proxy(this.execHTML,this))),this.initHTMLArea(),i}},t.prototype.setButtons=function(e){e&&(this.options.buttons=e),this.$editor.append('<div class="bttn-wrapper" id="bttn-wrapper-'+this._id+'">'),this.$bttn_wrapper=this.$editor.find("#bttn-wrapper-"+this._id),this.mobile()&&this.$bttn_wrapper.addClass("touch");for(var i,n,r="",a=0;a<this.options.buttons.length;a++){var o=this.options.buttons[a];if("sep"!=o){var s=t.commands[o];if(void 0!==s){s.cmd=o;var l=this.command_dispatcher[s.cmd];l?r+=l.apply(this,[s]):s.seed?(i=this.buildDefaultDropdown(s),n=this.buildDropdownButton(s,i),r+=n):(n=this.buildDefaultButton(s),r+=n,this.bindRefreshListener(s))}else{if(s=this.options.customButtons[o],void 0===s){if(s=this.options.customDropdowns[o],void 0===s)continue;n=this.buildCustomDropdown(s,o),r+=n,this.bindRefreshListener(s);continue}n=this.buildCustomButton(s,o),r+=n,this.bindRefreshListener(s)}}else r+=this.options.inlineMode?'<div class="f-clear"></div><hr/>':'<span class="f-sep"></span>'}this.$bttn_wrapper.html(r),this.$bttn_wrapper.find('button[data-cmd="undo"], button[data-cmd="redo"]').prop("disabled",!0),this.bindButtonEvents()},t.prototype.bindRefreshListener=function(t){t.refresh&&this.addListener("refresh",e.proxy(function(){t.refresh.apply(this,[t.cmd])},this))},t.prototype.buildDefaultButton=function(e){var t='<button tabIndex="-1" type="button" class="fr-bttn" title="'+e.title+'" data-cmd="'+e.cmd+'">';return t+=void 0===this.options.icons[e.cmd]?this.addButtonIcon(e):this.prepareIcon(this.options.icons[e.cmd],e.title),t+="</button>"},t.prototype.prepareIcon=function(e,t){switch(e.type){case"font":return this.addButtonIcon({icon:e.value});case"img":return this.addButtonIcon({icon_img:e.value,title:t});case"txt":return this.addButtonIcon({icon_txt:e.value})}},t.prototype.addButtonIcon=function(e){return e.icon?'<i class="'+e.icon+'"></i>':e.icon_alt?'<i class="for-text">'+e.icon_alt+"</i>":e.icon_img?'<img src="'+e.icon_img+'" alt="'+e.title+'"/>':e.icon_txt?"<i>"+e.icon_txt+"</i>":e.title},t.prototype.buildCustomButton=function(e,t){this["call_"+t]=e.callback;var i='<button tabIndex="-1" type="button" class="fr-bttn" data-callback="call_'+t+'" data-cmd="button_name" data-name="'+t+'" title="'+e.title+'">'+this.prepareIcon(e.icon,e.title)+"</button>";return i},t.prototype.callDropdown=function(t,i){this.$bttn_wrapper.on("click touch",'[data-name="'+t+'"]',e.proxy(function(e){e.preventDefault(),e.stopPropagation(),i.apply(this)},this))},t.prototype.buildCustomDropdown=function(e,t){var i='<div class="fr-bttn fr-dropdown">';i+='<button tabIndex="-1" type="button" class="fr-trigger" title="'+e.title+'" data-name="'+t+'">'+this.prepareIcon(e.icon,e.title)+"</button>",i+='<ul class="fr-dropdown-menu">';var n=0;for(var r in e.options){this["call_"+t+n]=e.options[r];var a='<li data-callback="call_'+t+n+'" data-cmd="'+t+n+'" data-name="'+t+n+'"><a href="#">'+r+"</a></li>";i+=a,n++}return i+="</ul></div>"},t.prototype.buildDropdownButton=function(e,t,i){i=i||"";var n='<div class="fr-bttn fr-dropdown '+i+'">',r="";r+=void 0===this.options.icons[e.cmd]?this.addButtonIcon(e):this.prepareIcon(this.options.icons[e.cmd],e.title);var a='<button tabIndex="-1" type="button" data-name="'+e.cmd+'" class="fr-trigger" title="'+e.title+'">'+r+"</button>";return n+=a,n+=t,n+="</div>"},t.prototype.buildDropdownAlign=function(e){this.bindRefreshListener(e);for(var t='<ul class="fr-dropdown-menu f-align">',i=0;i<e.seed.length;i++){var n=e.seed[i];t+='<li data-cmd="align" data-val="'+n.cmd+'" title="'+n.title+'"><a href="#"><i class="'+n.icon+'"></i></a></li>'}return t+="</ul>"},t.prototype.buildDropdownFormatBlock=function(e){var t='<ul class="fr-dropdown-menu">';for(var i in this.options.blockTags){var n='<li data-cmd="'+e.cmd+'" data-val="'+i+'">';n+='<a href="#" data-text="true" class="format-'+i+'" title="'+this.options.blockTags[i]+'">'+this.options.blockTags[i]+"</a></li>",t+=n}return t+="</ul>"},t.prototype.buildDefaultDropdown=function(e){for(var t='<ul class="fr-dropdown-menu">',i=0;i<e.seed.length;i++){var n=e.seed[i],r='<li data-namespace="'+e.namespace+'" data-cmd="'+(n.cmd||e.cmd)+'" data-val="'+n.value+'" data-param="'+(n.param||e.param)+'">';r+='<a href="#" data-text="true" class="'+n.value+'" title="'+n.title+'">'+n.title+"</a></li>",t+=r}return t+="</ul>"},t.prototype.createEditPopupHTML=function(){var e='<div class="froala-popup froala-text-popup" style="display:none;">';return e+='<h4><span data-text="true">Edit text</span><i title="Cancel" class="fa fa-times" id="f-text-close-'+this._id+'"></i></h4></h4>',e+='<div class="f-popup-line"><input type="text" placeholder="http://www.example.com" class="f-lu" id="f-ti-'+this._id+'">',e+='<button data-text="true" type="button" class="f-ok" id="f-edit-popup-ok-'+this._id+'">OK</button>',e+="</div>",e+="</div>"},t.prototype.buildEditPopup=function(){this.$edit_popup_wrapper=e(this.createEditPopupHTML()),this.$popup_editor.append(this.$edit_popup_wrapper),this.$edit_popup_wrapper.find("#f-ti-"+this._id).on("mouseup keydown",function(e){e.stopPropagation()}),this.addListener("hidePopups",e.proxy(function(){this.$edit_popup_wrapper.hide()},this)),this.$edit_popup_wrapper.on("click","#f-edit-popup-ok-"+this._id,e.proxy(function(){this.$element.text(this.$edit_popup_wrapper.find("#f-ti-"+this._id).val()),this.sync(),this.hide()},this)),this.$edit_popup_wrapper.on("click","i#f-text-close-"+this._id,e.proxy(function(){this.hide()},this))},t.prototype.createCORSRequest=function(e,t){var i=new XMLHttpRequest;if("withCredentials"in i){i.open(e,t,!0),this.options.withCredentials&&(i.withCredentials=!0);for(var n in this.options.headers)i.setRequestHeader(n,this.options.headers[n])}else"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null;return i},t.prototype.isEnabled=function(t){return e.inArray(t,this.options.buttons)>=0},t.prototype.bindButtonEvents=function(){this.bindDropdownEvents(this.$bttn_wrapper),this.bindCommandEvents(this.$bttn_wrapper)},t.prototype.bindDropdownEvents=function(i){var n=this;i.on(this.mousedown,".fr-dropdown .fr-trigger:not([disabled])",function(t){return"mousedown"===t.type&&1!==t.which?!0:("LI"===this.tagName&&"touchstart"===t.type&&n.android()||n.iOS()||t.preventDefault(),void e(this).attr("data-down",!0))}),i.on(this.mouseup,".fr-dropdown .fr-trigger:not([disabled])",function(r){if(n.isDisabled)return!1;if(r.stopPropagation(),r.preventDefault(),!e(this).attr("data-down"))return e("[data-down]").removeAttr("data-down"),!1;e("[data-down]").removeAttr("data-down"),n.options.inlineMode===!1&&0===e(this).parents(".froala-popup").length&&(n.hide(),n.closeImageMode(),n.imageMode=!1),e(this).toggleClass("active").trigger("blur");var a,o=e(this).attr("data-name");return t.commands[o]?a=t.commands[o].refreshOnShow:n.options.customDropdowns[o]?a=n.options.customDropdowns[o].refreshOnShow:t.image_commands[o]&&(a=t.image_commands[o].refreshOnShow),a&&a.call(n),i.find("button.fr-trigger").not(this).removeClass("active"),!1}),i.on(this.mouseup,".fr-dropdown",function(e){e.stopPropagation(),e.preventDefault()}),this.$element.on("mouseup","img, a",e.proxy(function(){return this.isDisabled?!1:void i.find(".fr-dropdown .fr-trigger").removeClass("active")},this)),i.on("click","li[data-cmd] > a",function(e){e.preventDefault()})},t.prototype.bindCommandEvents=function(t){var i=this;t.on(this.mousedown,"button[data-cmd], li[data-cmd], span[data-cmd], a[data-cmd]",function(t){return"mousedown"===t.type&&1!==t.which?!0:("LI"===this.tagName&&"touchstart"===t.type&&i.android()||i.iOS()||t.preventDefault(),void e(this).attr("data-down",!0))}),t.on(this.mouseup+" "+this.move,"button[data-cmd], li[data-cmd], span[data-cmd], a[data-cmd]",e.proxy(function(t){if(i.isDisabled)return!1;if("mouseup"===t.type&&1!==t.which)return!0;var n=t.currentTarget;if("touchmove"!=t.type){if(t.stopPropagation(),t.preventDefault(),!e(n).attr("data-down"))return e("[data-down]").removeAttr("data-down"),!1;
if(e("[data-down]").removeAttr("data-down"),e(n).data("dragging")||e(n).attr("disabled"))return e(n).removeData("dragging"),!1;var r=e(n).data("timeout");r&&(clearTimeout(r),e(n).removeData("timeout"));var a=e(n).attr("data-callback");if(i.options.inlineMode===!1&&0===e(n).parents(".froala-popup").length&&(i.hide(),i.closeImageMode(),i.imageMode=!1),a)e(n).parents(".fr-dropdown").find(".fr-trigger.active").removeClass("active"),i[a]();else{var o=e(n).attr("data-namespace"),s=e(n).attr("data-cmd"),l=e(n).attr("data-val"),c=e(n).attr("data-param");o?i["exec"+o](s,l,c):(i.exec(s,l,c),i.$bttn_wrapper.find(".fr-dropdown .fr-trigger").removeClass("active"))}return!1}e(n).data("timeout")||e(n).data("timeout",setTimeout(function(){e(n).data("dragging",!0)},200))},this))},t.prototype.save=function(){if(!this.triggerEvent("beforeSave",[],!1))return!1;if(this.options.saveURL){var t={};for(var i in this.options.saveParams){var n=this.options.saveParams[i];t[i]="function"==typeof n?n.call(this):n}e.ajax({type:this.options.saveRequestType,url:this.options.saveURL,data:e.extend({body:this.getHTML()},this.options.saveParams),crossDomain:this.options.crossDomain,xhrFields:{withCredentials:this.options.withCredentials},headers:this.options.headers}).done(e.proxy(function(e){this.triggerEvent("afterSave",[e])},this)).fail(e.proxy(function(){this.triggerEvent("saveError",["Save request failed on the server."])},this))}else this.triggerEvent("saveError",["Missing save URL."])},t.prototype.isURL=function(e){if(!/^(https?:|ftps?:|)\/\//.test(e))return!1;e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var t=/\(?(?:(https?:|ftps?:|)\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|(?:www.)?(?:[^\W\s]|\.|-)|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi;return t.test(e)},t.prototype.sanitizeURL=function(e){if(/^(https?:|ftps?:|)\/\//.test(e)){if(!this.isURL(e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/g,"mailto:").replace(/tel%3A/g,"tel:").replace(/data%3Aimage/g,"data:image").replace(/webkit-fake-url%3A/g,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@");return e},t.prototype.parents=function(e,t){return e.get(0)!=this.$element.get(0)?e.parentsUntil(this.$element,t):[]},t.prototype.option=function(t,i){if(void 0===t)return this.options;if(t instanceof Object)this.options=e.extend({},this.options,t),this.initOptions(),this.setCustomText(),this.setLanguage();else{if(void 0===i)return this.options[t];switch(this.options[t]=i,t){case"direction":this.setDirection();break;case"height":case"width":case"minHeight":case"maxHeight":this.setDimensions();break;case"spellcheck":this.setSpellcheck();break;case"placeholder":this.setPlaceholder();break;case"customText":this.setCustomText();break;case"language":this.setLanguage();break;case"textNearImage":this.setTextNearImage();break;case"zIndex":this.setZIndex();break;case"theme":this.setTheme()}}};var i=e.fn.editable;e.fn.editable=function(i){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);if("string"==typeof i){var a=[];return this.each(function(){var t=e(this),r=t.data("fa.editable");if(!r[i])return e.error("Method "+i+" does not exist in Froala Editor.");var o=r[i].apply(r,n.slice(1));void 0===o?a.push(this):0===a.length&&a.push(o)}),1==a.length?a[0]:a}return"object"!=typeof i&&i?void 0:this.each(function(){var n=this,r=e(n),a=r.data("fa.editable");a||r.data("fa.editable",a=new t(n,i))})},e.fn.editable.Constructor=t,e.Editable=t,e.fn.editable.noConflict=function(){return e.fn.editable=i,this}}(window.jQuery),function(e){e.Editable.prototype.initUndoRedo=function(){this.undoStack=[],this.undoIndex=0,this.saveUndoStep(),this.disableBrowserUndo()},e.Editable.prototype.undo=function(){if(this.no_verify=!0,this.undoIndex>1){clearTimeout(this.typingTimer),this.triggerEvent("beforeUndo",[],!1);var e=this.undoStack[--this.undoIndex-1];this.restoreSnapshot(e),this.doingRedo=!0,this.triggerEvent("afterUndo",[]),this.doingRedo=!1,""!==this.text()?this.repositionEditor():this.hide(),this.$element.trigger("placeholderCheck"),this.focus(),this.refreshButtons()}this.no_verify=!1},e.Editable.prototype.redo=function(){if(this.no_verify=!0,this.undoIndex<this.undoStack.length){clearTimeout(this.typingTimer),this.triggerEvent("beforeRedo",[],!1);var e=this.undoStack[this.undoIndex++];this.restoreSnapshot(e),this.doingRedo=!0,this.triggerEvent("afterRedo",[]),this.doingRedo=!1,""!==this.text()?this.repositionEditor():this.hide(),this.$element.trigger("placeholderCheck"),this.focus(),this.refreshButtons()}this.no_verify=!1},e.Editable.prototype.saveUndoStep=function(){if(!this.undoStack)return!1;for(;this.undoStack.length>this.undoIndex;)this.undoStack.pop();var e=this.getSnapshot();this.undoStack[this.undoIndex-1]&&this.identicSnapshots(this.undoStack[this.undoIndex-1],e)||(this.undoStack.push(e),this.undoIndex++),this.refreshUndo(),this.refreshRedo()},e.Editable.prototype.refreshUndo=function(){if(this.isEnabled("undo")){if(void 0===this.$editor)return;this.$bttn_wrapper.find('[data-cmd="undo"]').removeAttr("disabled"),(0===this.undoStack.length||this.undoIndex<=1||this.isHTML)&&this.$bttn_wrapper.find('[data-cmd="undo"]').attr("disabled",!0)}},e.Editable.prototype.refreshRedo=function(){if(this.isEnabled("redo")){if(void 0===this.$editor)return;this.$bttn_wrapper.find('[data-cmd="redo"]').removeAttr("disabled"),(this.undoIndex==this.undoStack.length||this.isHTML)&&this.$bttn_wrapper.find('[data-cmd="redo"]').prop("disabled",!0)}},e.Editable.prototype.getNodeIndex=function(e){for(var t=e.parentNode.childNodes,i=0,n=null,r=0;r<t.length;r++){if(n){var a=3===t[r].nodeType&&""===t[r].textContent,o=3===n.nodeType&&3===t[r].nodeType;a||o||i++}if(t[r]==e)return i;n=t[r]}},e.Editable.prototype.getNodeLocation=function(e){var t=[];if(!e.parentNode)return[];for(;e!=this.$element.get(0);)t.push(this.getNodeIndex(e)),e=e.parentNode;return t.reverse()},e.Editable.prototype.getNodeByLocation=function(e){for(var t=this.$element.get(0),i=0;i<e.length;i++)t=t.childNodes[e[i]];return t},e.Editable.prototype.getRealNodeOffset=function(e,t){for(;e&&3===e.nodeType;){var i=e.previousSibling;i&&3==i.nodeType&&(t+=i.textContent.length),e=i}return t},e.Editable.prototype.getRangeSnapshot=function(e){return{scLoc:this.getNodeLocation(e.startContainer),scOffset:this.getRealNodeOffset(e.startContainer,e.startOffset),ecLoc:this.getNodeLocation(e.endContainer),ecOffset:this.getRealNodeOffset(e.endContainer,e.endOffset)}},e.Editable.prototype.getSnapshot=function(){var e={};if(e.html=this.$element.html(),e.ranges=[],this.selectionInEditor()&&this.$element.is(":focus"))for(var t=this.getRanges(),i=0;i<t.length;i++)e.ranges.push(this.getRangeSnapshot(t[i]));return e},e.Editable.prototype.identicSnapshots=function(e,t){return e.html!=t.html?!1:JSON.stringify(e.ranges)!=JSON.stringify(t.ranges)?!1:!0},e.Editable.prototype.restoreRangeSnapshot=function(e,t){try{var i=this.getNodeByLocation(e.scLoc),n=e.scOffset,r=this.getNodeByLocation(e.ecLoc),a=e.ecOffset,o=this.document.createRange();o.setStart(i,n),o.setEnd(r,a),t.addRange(o)}catch(s){}},e.Editable.prototype.restoreSnapshot=function(t){this.$element.html()!=t.html&&this.$element.html(t.html);var i=this.getSelection();this.clearSelection(),this.$element.focus();for(var n=0;n<t.ranges.length;n++)this.restoreRangeSnapshot(t.ranges[n],i);setTimeout(e.proxy(function(){this.$element.find(".f-img-wrap img").click()},this),0)}}(jQuery),function(e){e.Editable.prototype.refreshButtons=function(t){return this.initialized&&(this.selectionInEditor()&&!this.isHTML||this.browser.msie&&e.Editable.getIEversion()<9||t)?(this.$editor.find("button[data-cmd]").removeClass("active"),this.refreshDisabledState(),void this.raiseEvent("refresh")):!1},e.Editable.prototype.refreshDisabledState=function(){if(this.isHTML)return!1;if(this.$editor){for(var t=0;t<this.options.buttons.length;t++){var i=this.options.buttons[t];if(void 0!==e.Editable.commands[i]){var n=!1;e.isFunction(e.Editable.commands[i].disabled)?n=e.Editable.commands[i].disabled.apply(this):void 0!==e.Editable.commands[i].disabled&&(n=!0),n?(this.$editor.find('button[data-cmd="'+i+'"]').prop("disabled",!0),this.$editor.find('button[data-name="'+i+'"]').prop("disabled",!0)):(this.$editor.find('button[data-cmd="'+i+'"]').removeAttr("disabled"),this.$editor.find('button[data-name="'+i+'"]').removeAttr("disabled"))}}this.refreshUndo(),this.refreshRedo()}},e.Editable.prototype.refreshFormatBlocks=function(){var e=this.getSelectionElements()[0],t=e.tagName.toLowerCase();this.options.paragraphy&&t===this.options.defaultTag.toLowerCase()&&(t="n"),this.$editor.find('.fr-bttn > button[data-name="formatBlock"] + ul li').removeClass("active"),this.$bttn_wrapper.find('.fr-bttn > button[data-name="formatBlock"] + ul li[data-val="'+t+'"]').addClass("active")},e.Editable.prototype.refreshDefault=function(e){try{this.document.queryCommandState(e)===!0&&this.$editor.find('[data-cmd="'+e+'"]').addClass("active")}catch(t){}},e.Editable.prototype.refreshAlign=function(){var t=e(this.getSelectionElements()[0]);this.$editor.find('.fr-dropdown > button[data-name="align"] + ul li').removeClass("active");var i,n=t.css("text-align");["left","right","justify","center"].indexOf(n)<0&&(n="left"),"left"==n?i="justifyLeft":"right"==n?i="justifyRight":"justify"==n?i="justifyFull":"center"==n&&(i="justifyCenter"),this.$editor.find('.fr-dropdown > button[data-name="align"].fr-trigger i').attr("class","fa fa-align-"+n),this.$editor.find('.fr-dropdown > button[data-name="align"] + ul li[data-val="'+i+'"]').addClass("active")},e.Editable.prototype.refreshHTML=function(){this.isActive("html")?this.$editor.find('[data-cmd="html"]').addClass("active"):this.$editor.find('[data-cmd="html"]').removeClass("active")}}(jQuery),function(e){e.Editable.commands={bold:{title:"Bold",icon:"fa fa-bold",shortcut:"(Ctrl + B)",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},italic:{title:"Italic",icon:"fa fa-italic",shortcut:"(Ctrl + I)",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},underline:{cmd:"underline",title:"Underline",icon:"fa fa-underline",shortcut:"(Ctrl + U)",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},strikeThrough:{title:"Strikethrough",icon:"fa fa-strikethrough",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},subscript:{title:"Subscript",icon:"fa fa-subscript",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},superscript:{title:"Superscript",icon:"fa fa-superscript",refresh:e.Editable.prototype.refreshDefault,undo:!0,callbackWithoutSelection:function(e){this._startInDefault(e)}},formatBlock:{title:"Format Block",icon:"fa fa-paragraph",refreshOnShow:e.Editable.prototype.refreshFormatBlocks,callback:function(e,t){this.formatBlock(t)},undo:!0},align:{title:"Alignment",icon:"fa fa-align-left",refresh:e.Editable.prototype.refreshAlign,refreshOnShow:e.Editable.prototype.refreshAlign,seed:[{cmd:"justifyLeft",title:"Align Left",icon:"fa fa-align-left"},{cmd:"justifyCenter",title:"Align Center",icon:"fa fa-align-center"},{cmd:"justifyRight",title:"Align Right",icon:"fa fa-align-right"},{cmd:"justifyFull",title:"Justify",icon:"fa fa-align-justify"}],callback:function(e,t){this.align(t)},undo:!0},outdent:{title:"Indent Less",icon:"fa fa-dedent",activeless:!0,shortcut:"(Ctrl + <)",callback:function(){this.outdent(!0)},undo:!0},indent:{title:"Indent More",icon:"fa fa-indent",activeless:!0,shortcut:"(Ctrl + >)",callback:function(){this.indent()},undo:!0},selectAll:{title:"Select All",icon:"fa fa-file-text",shortcut:"(Ctrl + A)",callback:function(e,t){this.$element.focus(),this.execDefault(e,t)},undo:!1},createLink:{title:"Insert Link",icon:"fa fa-link",shortcut:"(Ctrl + K)",callback:function(){this.insertLink()},undo:!1},insertImage:{title:"Insert Image",icon:"fa fa-picture-o",activeless:!0,shortcut:"(Ctrl + P)",callback:function(){this.insertImage()},undo:!1},undo:{title:"Undo",icon:"fa fa-undo",activeless:!0,shortcut:"(Ctrl+Z)",refresh:e.Editable.prototype.refreshUndo,callback:function(){this.undo()},undo:!1},redo:{title:"Redo",icon:"fa fa-repeat",activeless:!0,shortcut:"(Shift+Ctrl+Z)",refresh:e.Editable.prototype.refreshRedo,callback:function(){this.redo()},undo:!1},html:{title:"Show HTML",icon:"fa fa-code",refresh:e.Editable.prototype.refreshHTML,callback:function(){this.html()},undo:!1},save:{title:"Save",icon:"fa fa-floppy-o",callback:function(){this.save()},undo:!1},insertHorizontalRule:{title:"Insert Horizontal Line",icon:"fa fa-minus",callback:function(e){this.insertHR(e)},undo:!0},removeFormat:{title:"Clear formatting",icon:"fa fa-eraser",activeless:!0,callback:function(){this.removeFormat()},undo:!0}},e.Editable.prototype.exec=function(t,i,n){return!this.selectionInEditor()&&e.Editable.commands[t].undo&&this.focus(),this.selectionInEditor()&&""===this.text()&&e.Editable.commands[t].callbackWithoutSelection?(e.Editable.commands[t].callbackWithoutSelection.apply(this,[t,i,n]),!1):void(e.Editable.commands[t].callback?e.Editable.commands[t].callback.apply(this,[t,i,n]):this.execDefault(t,i))},e.Editable.prototype.html=function(){var e;this.isHTML?(this.isHTML=!1,e=this.$html_area.val(),this.$box.removeClass("f-html"),this.$element.attr("contenteditable",!0),this.setHTML(e,!1),this.$editor.find('.fr-bttn:not([data-cmd="html"]), .fr-trigger').removeAttr("disabled"),this.$editor.find('.fr-bttn[data-cmd="html"]').removeClass("active"),this.$element.blur(),this.focus(),this.refreshButtons(),this.triggerEvent("htmlHide",[e],!0,!1)):(this.$box.removeClass("f-placeholder"),this.clearSelection(),this.cleanify(!1,!0,!1),e=this.cleanTags(this.getHTML(!1,!1)),this.$html_area.val(e).trigger("resize"),this.$html_area.css("height",this.$element.height()-1),this.$element.html("").append(this.$html_area).removeAttr("contenteditable"),this.$box.addClass("f-html"),this.$editor.find('button.fr-bttn:not([data-cmd="html"]), button.fr-trigger').attr("disabled",!0),this.$editor.find('.fr-bttn[data-cmd="html"]').addClass("active"),this.isHTML=!0,this.hide(),this.imageMode=!1,this.$element.blur(),this.$element.removeAttr("contenteditable"),this.triggerEvent("htmlShow",[e],!0,!1))},e.Editable.prototype.insertHR=function(t){this.$element.find("hr").addClass("fr-tag"),this.$element.hasClass("f-placeholder")?e(this.$element.find("> "+this.valid_nodes.join(", >"))[0]).before("<hr/>"):this.document.execCommand(t),this.hide();var i=this.$element.find("hr:not(.fr-tag)").next(this.valid_nodes.join(","));i.length>0?e(i[0]).prepend(this.markers_html):this.$element.find("hr:not(.fr-tag)").after(this.options.paragraphy?"<p>"+this.markers_html+"<br/></p>":this.markers_html),this.restoreSelectionByMarkers(),this.triggerEvent(t,[],!0,!1)},e.Editable.prototype.formatBlock=function(t){if(this.disabledList.indexOf("formatBlock")>=0)return!1;if(this.browser.msie&&e.Editable.getIEversion()<9)return"n"==t&&(t=this.options.defaultTag),this.document.execCommand("formatBlock",!1,"<"+t+">"),this.triggerEvent("formatBlock"),!1;if(this.$element.hasClass("f-placeholder")){if(this.options.paragraphy||"n"!=t){"n"==t&&(t=this.options.defaultTag);var i=e("<"+t+"><br/></"+t+">");this.$element.html(i),this.setSelection(i.get(0),0),this.$element.removeClass("f-placeholder")}}else{this.saveSelectionByMarkers(),this.wrapText(),this.restoreSelectionByMarkers();var n=this.getSelectionElements();n[0]==this.$element.get(0)&&(n=this.$element.find("> "+this.valid_nodes.join(", >"))),this.saveSelectionByMarkers();for(var r,a=function(t){if("PRE"==t.get(0).tagName)for(;t.find("br + br").length>0;){var i=e(t.find("br + br")[0]);i.prev().remove(),i.replaceWith("\n\n")}},o=0;o<n.length;o++){var s=e(n[o]);if(!this.fakeEmpty(s)){if(a(s),!this.options.paragraphy&&this.emptyElement(s.get(0))&&s.append("<br/>"),"n"==t)if(this.options.paragraphy){var l="<"+this.options.defaultTag+this.attrs(s.get(0))+">"+s.html()+"</"+this.options.defaultTag+">";r=e(l)}else r=s.html()+"<br/>";else r=e("<"+t+this.attrs(s.get(0))+">").html(s.html());s.get(0)!=this.$element.get(0)?s.replaceWith(r):s.html(r)}}this.unwrapText(),this.$element.find("pre + pre").each(function(){e(this).prepend(e(this).prev().html()+"<br/><br/>"),e(this).prev().remove()});var c=this;this.$element.find(this.valid_nodes.join(",")).each(function(){"PRE"!=this.tagName&&e(this).replaceWith("<"+this.tagName+c.attrs(this)+">"+e(this).html().replace(/\n\n/gi,"</"+this.tagName+"><"+this.tagName+">")+"</"+this.tagName+">")}),this.$element.find(this.valid_nodes.join(":empty ,")+":empty").append("<br/>"),this.cleanupLists(),this.restoreSelectionByMarkers()}this.triggerEvent("formatBlock"),this.repositionEditor()},e.Editable.prototype.align=function(t){if(this.browser.msie&&e.Editable.getIEversion()<9)return this.document.execCommand(t,!1,!1),this.triggerEvent("align",[t]),!1;this.saveSelectionByMarkers(),this.wrapText(),this.restoreSelectionByMarkers(),this.saveSelectionByMarkers();var i=this.getSelectionElements();"justifyLeft"==t?t="left":"justifyRight"==t?t="right":"justifyCenter"==t?t="center":"justifyFull"==t&&(t="justify");for(var n=0;n<i.length;n++)this.parents(e(i[n]),"LI").length>0&&(i[n]=e(i[n]).parents("LI").get(0)),e(i[n]).css("text-align",t);this.cleanupLists(),this.unwrapText(),this.restoreSelectionByMarkers(),this.repositionEditor(),this.triggerEvent("align",[t])},e.Editable.prototype.indent=function(t,i){if(void 0===i&&(i=!0),this.browser.msie&&e.Editable.getIEversion()<9)return t?this.document.execCommand("outdent",!1,!1):this.document.execCommand("indent",!1,!1),!1;var n=20;t&&(n=-20),this.saveSelectionByMarkers(),this.wrapText(),this.restoreSelectionByMarkers();var r=this.getSelectionElements();this.saveSelectionByMarkers();for(var a=0;a<r.length;a++){var o=e(r[a]);if(o.parentsUntil(this.$element,"li").length>0&&(o=o.closest("li")),this.raiseEvent("indent",[o,t]))if(o.get(0)!=this.$element.get(0)){var s=parseInt(o.css("margin-left"),10),l=Math.max(0,s+n);o.css("marginLeft",l),0===l&&(o.css("marginLeft",""),void 0===o.css("style")&&o.removeAttr("style"))}else{var c=e("<div>").html(o.html());o.html(c),c.css("marginLeft",Math.max(0,n)),0===Math.max(0,n)&&(c.css("marginLeft",""),void 0===c.css("style")&&c.removeAttr("style"))}}this.unwrapText(),this.restoreSelectionByMarkers(),i&&this.repositionEditor(),t||this.triggerEvent("indent")},e.Editable.prototype.outdent=function(e){this.indent(!0,e),this.triggerEvent("outdent")},e.Editable.prototype.execDefault=function(e,t){this.saveUndoStep(),this.document.execCommand(e,!1,t),this.triggerEvent(e,[],!0,!0)},e.Editable.prototype._startInDefault=function(e){this.focus(),this.document.execCommand(e,!1,!1),this.refreshButtons()},e.Editable.prototype._startInFontExec=function(t,i,n){this.focus();try{var r=this.getRange(),a=r.cloneRange();a.collapse(!1);var o=e('<span data-inserted="true" data-fr-verified="true" style="'+t+": "+n+';">'+e.Editable.INVISIBLE_SPACE+"</span>",this.document);a.insertNode(o[0]),o=this.$element.find("[data-inserted]"),o.removeAttr("data-inserted"),this.setSelection(o.get(0),1)}catch(s){}},e.Editable.prototype.removeFormat=function(){this.document.execCommand("removeFormat",!1,!1),this.document.execCommand("unlink",!1,!1)},e.Editable.prototype.inlineStyle=function(t,i,n){if(this.browser.webkit&&"font-size"!=t){var r=function(e){return e.attr("style").indexOf("font-size")>=0};this.$element.find("span").each(function(t,i){var n=e(i);n.attr("style")&&r(n)&&(n.data("font-size",n.css("font-size")),n.css("font-size",""))})}this.document.execCommand("fontSize",!1,4),this.saveSelectionByMarkers(),this.browser.webkit&&"font-size"!=t&&this.$element.find("span").each(function(t,i){var n=e(i);n.data("font-size")&&(n.css("font-size",n.data("font-size")),n.removeData("font-size"))});var a=function(i){var r=e(i);r.css(t)!=n&&r.css(t,""),""===r.attr("style")&&r.replaceWith(r.html())};this.$element.find("font").each(function(i,r){var o=e('<span data-fr-verified="true" style="'+t+": "+n+';">'+e(r).html()+"</span>");e(r).replaceWith(o);for(var s=o.find("span"),l=s.length-1;l>=0;l--)a(s[l])}),this.removeBlankSpans(),this.restoreSelectionByMarkers(),this.repositionEditor(),null!=i&&this.triggerEvent(i,[n],!0,!0)}}(jQuery),function(e){e.Editable.prototype.addListener=function(e,t){var i=this._events,n=i[e]=i[e]||[];n.push(t)},e.Editable.prototype.raiseEvent=function(e,t){void 0===t&&(t=[]);var i=!0,n=this._events[e];if(n)for(var r=0,a=n.length;a>r;r++){var o=n[r].apply(this,t);void 0!==o&&i!==!1&&(i=o)}return void 0===i&&(i=!0),i}}(jQuery),function(e){e.Editable.prototype.start_marker='<span class="f-marker" data-id="0" data-fr-verified="true" data-type="true"></span>',e.Editable.prototype.end_marker='<span class="f-marker" data-id="0" data-fr-verified="true" data-type="false"></span>',e.Editable.prototype.markers_html='<span class="f-marker" data-id="0" data-fr-verified="true" data-type="false"></span><span class="f-marker" data-id="0" data-fr-verified="true" data-type="true"></span>',e.Editable.prototype.text=function(){var e="";return this.window.getSelection?e=this.window.getSelection():this.document.getSelection?e=this.document.getSelection():this.document.selection&&(e=this.document.selection.createRange().text),e.toString()},e.Editable.prototype.selectionInEditor=function(){var t=this.getSelectionParent(),i=!1;return t==this.$element.get(0)&&(i=!0),i===!1&&e(t).parents().each(e.proxy(function(e,t){t==this.$element.get(0)&&(i=!0)},this)),i},e.Editable.prototype.getSelection=function(){var e="";return e=this.window.getSelection?this.window.getSelection():this.document.getSelection?this.document.getSelection():this.document.selection.createRange()},e.Editable.prototype.getRange=function(){var e=this.getRanges();return e.length>0?e[0]:null},e.Editable.prototype.getRanges=function(){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount){for(var t=[],i=0;i<e.rangeCount;i++)t.push(e.getRangeAt(i));return t}return this.document.createRange?[this.document.createRange()]:[]},e.Editable.prototype.clearSelection=function(){var e=this.getSelection();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}},e.Editable.prototype.getSelectionElement=function(){var t=this.getSelection();if(t.rangeCount){var i=this.getRange(),n=i.startContainer;if(1==n.nodeType){var r=!1;n.childNodes.length>0&&n.childNodes[i.startOffset]&&e(n.childNodes[i.startOffset]).text()===this.text()&&(n=n.childNodes[i.startOffset],r=!0),!r&&n.childNodes.length>0&&e(n.childNodes[0]).text()===this.text()&&["BR","IMG","HR"].indexOf(n.childNodes[0].tagName)<0&&(n=n.childNodes[0])}for(;1!=n.nodeType&&n.parentNode;)n=n.parentNode;for(var a=n;a&&"BODY"!=a.tagName;){if(a==this.$element.get(0))return n;a=e(a).parent()[0]}}return this.$element.get(0)},e.Editable.prototype.getSelectionParent=function(){var t,i=null;return this.window.getSelection?(t=this.window.getSelection(),t.rangeCount&&(i=t.getRangeAt(0).commonAncestorContainer,1!=i.nodeType&&(i=i.parentNode))):(t=this.document.selection)&&"Control"!=t.type&&(i=t.createRange().parentElement()),null!=i&&(e.inArray(this.$element.get(0),e(i).parents())>=0||i==this.$element.get(0))?i:null},e.Editable.prototype.nodeInRange=function(e,t){var i;if(e.intersectsNode)return e.intersectsNode(t);i=t.ownerthis.document.createRange();try{i.selectNode(t)}catch(n){i.selectNodeContents(t)}return-1==e.compareBoundaryPoints(Range.END_TO_START,i)&&1==e.compareBoundaryPoints(Range.START_TO_END,i)},e.Editable.prototype.getElementFromNode=function(t){for(1!=t.nodeType&&(t=t.parentNode);null!==t&&this.valid_nodes.indexOf(t.tagName)<0;)t=t.parentNode;return null!=t&&"LI"==t.tagName&&e(t).find(this.valid_nodes.join(",")).not("li").length>0?null:e.makeArray(e(t).parents()).indexOf(this.$element.get(0))>=0?t:null},e.Editable.prototype.nextNode=function(e,t){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling&&e!=t;)e=e.parentNode;return e&&e!=t?e.nextSibling:null},e.Editable.prototype.getRangeSelectedNodes=function(e){var t=[],i=e.startContainer,n=e.endContainer;if(i==n&&"TR"!=i.tagName){if(i.hasChildNodes()&&0!==i.children.length){for(var r=i.children,a=e.startOffset;a<e.endOffset;a++)r[a]&&t.push(r[a]);return 0===t.length&&t.push(i),t}return[i]}if(i==n&&"TR"==i.tagName){var o=i.childNodes,s=e.startOffset;if(o.length>s&&s>=0){var l=o[s];if("TD"==l.tagName||"TH"==l.tagName)return[l]}}for(;i&&i!=n;)t.push(i=this.nextNode(i,n));for(i=e.startContainer;i&&i!=e.commonAncestorContainer;)t.unshift(i),i=i.parentNode;return t},e.Editable.prototype.getSelectedNodes=function(){if(this.window.getSelection){var t=this.window.getSelection();if(!t.isCollapsed){for(var i=this.getRanges(),n=[],r=0;r<i.length;r++)n=e.merge(n,this.getRangeSelectedNodes(i[r]));return n}if(this.selectionInEditor()){var a=t.getRangeAt(0).startContainer;return 3==a.nodeType?[a.parentNode]:[a]}}return[]},e.Editable.prototype.getSelectionElements=function(){var t=this.getSelectedNodes(),i=[];return e.each(t,e.proxy(function(e,t){if(null!==t){var n=this.getElementFromNode(t);i.indexOf(n)<0&&n!=this.$element.get(0)&&null!==n&&i.push(n)}},this)),0===i.length&&i.push(this.$element.get(0)),i},e.Editable.prototype.getSelectionLink=function(){var t=this.getSelectionLinks();return t.length>0?e(t[0]).attr("href"):null},e.Editable.prototype.saveSelection=function(){if(!this.selectionDisabled){this.savedRanges=[];for(var e=this.getRanges(),t=0;t<e.length;t++)this.savedRanges.push(e[t].cloneRange())}},e.Editable.prototype.restoreSelection=function(){if(!this.selectionDisabled){var e,t,i=this.getSelection();if(this.savedRanges&&this.savedRanges.length)for(i.removeAllRanges(),e=0,t=this.savedRanges.length;t>e;e+=1)i.addRange(this.savedRanges[e]);this.savedRanges=null}},e.Editable.prototype.insertMarkersAtPoint=function(e){var t=e.clientX,i=e.clientY;this.removeMarkers();var n,r=null;if("undefined"!=typeof this.document.caretPositionFromPoint?(n=this.document.caretPositionFromPoint(t,i),r=this.document.createRange(),r.setStart(n.offsetNode,n.offset),r.setEnd(n.offsetNode,n.offset)):"undefined"!=typeof this.document.caretRangeFromPoint&&(n=this.document.caretRangeFromPoint(t,i),r=this.document.createRange(),r.setStart(n.startContainer,n.startOffset),r.setEnd(n.startContainer,n.startOffset)),null!==r&&"undefined"!=typeof this.window.getSelection){var a=this.window.getSelection();a.removeAllRanges(),a.addRange(r)}else if("undefined"!=typeof this.document.body.createTextRange)try{r=this.document.body.createTextRange(),r.moveToPoint(t,i);var o=r.duplicate();o.moveToPoint(t,i),r.setEndPoint("EndToEnd",o),r.select()}catch(s){}this.placeMarker(r,!0,0),this.placeMarker(r,!1,0)},e.Editable.prototype.saveSelectionByMarkers=function(){if(!this.selectionDisabled){this.selectionInEditor()||this.focus(),this.removeMarkers();for(var e=this.getRanges(),t=0;t<e.length;t++)if(e[t].startContainer!==this.document){var i=e[t];this.placeMarker(i,!0,t),this.placeMarker(i,!1,t)}}},e.Editable.prototype.hasSelectionByMarkers=function(){var e=this.$element.find('.f-marker[data-type="true"]');return e.length>0?!0:!1},e.Editable.prototype.restoreSelectionByMarkers=function(t){if(void 0===t&&(t=!0),!this.selectionDisabled){var i=this.$element.find('.f-marker[data-type="true"]');if(0===i.length)return!1;this.$element.is(":focus")||this.browser.msie||this.$element.focus();var n=this.getSelection();(t||this.getRange()&&!this.getRange().collapsed||!e(i[0]).attr("data-collapsed"))&&(this.browser.msie&&e.Editable.getIEversion()<9||(this.clearSelection(),t=!0));for(var r=0;r<i.length;r++){var a=e(i[r]).data("id"),o=i[r],s=this.$element.find('.f-marker[data-type="false"][data-id="'+a+'"]');if(this.browser.msie&&e.Editable.getIEversion()<9)return this.setSelection(o,0,s,0),this.removeMarkers(),!1;var l;if(l=t?this.document.createRange():this.getRange(),s.length>0){s=s[0];try{l.setStartAfter(o),l.setEndBefore(s)}catch(c){}}t&&n.addRange(l)}this.removeMarkers()}},e.Editable.prototype.setSelection=function(e,t,i,n){var r=this.getSelection();if(r){this.clearSelection();try{i||(i=e),void 0===t&&(t=0),void 0===n&&(n=t);var a=this.getRange();a.setStart(e,t),a.setEnd(i,n),r.addRange(a)}catch(o){}}},e.Editable.prototype.buildMarker=function(t,i,n){return void 0===n&&(n=""),e('<span class="f-marker"'+n+' style="display:none; line-height: 0;" data-fr-verified="true" data-id="'+i+'" data-type="'+t+'">',this.document)[0]},e.Editable.prototype.placeMarker=function(t,i,n){var r="";t.collapsed&&(r=' data-collapsed="true"');try{var a=t.cloneRange();if(a.collapse(i),a.insertNode(this.buildMarker(i,n,r)),i===!0&&r)for(var o=this.$element.find('span.f-marker[data-type="true"][data-id="'+n+'"]').get(0).nextSibling;3===o.nodeType&&0===o.data.length;)e(o).remove(),o=this.$element.find('span.f-marker[data-type="true"][data-id="'+n+'"]').get(0).nextSibling}catch(s){}},e.Editable.prototype.removeMarkers=function(){this.$element.find(".f-marker").remove()},e.Editable.prototype.getSelectionTextInfo=function(e){var t,i,n=!1,r=!1;if(this.window.getSelection){var a=this.window.getSelection();a.rangeCount&&(t=a.getRangeAt(0),i=t.cloneRange(),i.selectNodeContents(e),i.setEnd(t.startContainer,t.startOffset),n=""===i.toString(),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),r=""===i.toString())}else this.document.selection&&"Control"!=this.document.selection.type&&(t=this.document.selection.createRange(),i=t.duplicate(),i.moveToElementText(e),i.setEndPoint("EndToStart",t),n=""===i.text,i.moveToElementText(e),i.setEndPoint("StartToEnd",t),r=""===i.text);return{atStart:n,atEnd:r}},e.Editable.prototype.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)}}(jQuery),function(e){e.Editable.hexToRGB=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},e.Editable.hexToRGBString=function(e){var t=this.hexToRGB(e);return t?"rgb("+t.r+", "+t.g+", "+t.b+")":""},e.Editable.RGBToHex=function(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(i){return null}},e.Editable.getIEversion=function(){var e,t,i=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(i=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(i=parseFloat(RegExp.$1))),i},e.Editable.browser=function(){var e={};if(this.getIEversion()>0)e.msie=!0;else{var t=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n={browser:i[1]||"",version:i[2]||"0"};i[1]&&(e[n.browser]=!0),parseInt(n.version,10)<9&&e.msie&&(e.oldMsie=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e},e.Editable.isArray=function(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length},e.Editable.uniq=function(t){return e.grep(t,function(i,n){return n==e.inArray(i,t)
})},e.Editable.cleanWhitespace=function(t){t.contents().filter(function(){return 1==this.nodeType&&e.Editable.cleanWhitespace(e(this)),3==this.nodeType&&!/\S/.test(this.nodeValue)}).remove()}}(jQuery),function(e){e.Editable.prototype.show=function(t){if(this.hideDropdowns(),void 0!==t){if(this.options.inlineMode||this.options.editInPopup)if(null!==t&&"touchend"!==t.type){if(this.options.showNextToCursor){var i=t.pageX,n=t.pageY;i<this.$element.offset().left&&(i=this.$element.offset().left),i>this.$element.offset().left+this.$element.width()&&(i=this.$element.offset().left+this.$element.width()),n<this.$element.offset.top&&(n=this.$element.offset().top),n>this.$element.offset().top+this.$element.height()&&(n=this.$element.offset().top+this.$element.height()),20>i&&(i=20),0>n&&(n=0),this.showByCoordinates(i,n)}else this.repositionEditor();e(".froala-editor:not(.f-basic)").hide(),this.$editor.show(),0!==this.options.buttons.length||this.options.editInPopup||this.$editor.hide()}else e(".froala-editor:not(.f-basic)").hide(),this.$editor.show(),this.repositionEditor();this.hidePopups(),this.options.editInPopup||this.showEditPopupWrapper(),this.$bttn_wrapper.show(),this.refreshButtons(),this.imageMode=!1}},e.Editable.prototype.hideDropdowns=function(){this.$bttn_wrapper.find(".fr-dropdown .fr-trigger").removeClass("active"),this.$bttn_wrapper.find(".fr-dropdown .fr-trigger")},e.Editable.prototype.hide=function(e){return this.initialized?(void 0===e&&(e=!0),e?this.hideOtherEditors():(this.closeImageMode(),this.imageMode=!1),this.$popup_editor.hide(),this.hidePopups(!1),void(this.link=!1)):!1},e.Editable.prototype.hideOtherEditors=function(){for(var t=1;t<=e.Editable.count;t++)t!=this._id&&this.$window.trigger("hide."+t)},e.Editable.prototype.hideBttnWrapper=function(){this.options.inlineMode&&this.$bttn_wrapper.hide()},e.Editable.prototype.showBttnWrapper=function(){this.options.inlineMode&&this.$bttn_wrapper.show()},e.Editable.prototype.showEditPopupWrapper=function(){this.$edit_popup_wrapper&&(this.$edit_popup_wrapper.show(),setTimeout(e.proxy(function(){this.$edit_popup_wrapper.find("input").val(this.$element.text()).focus().select()},this),1))},e.Editable.prototype.hidePopups=function(e){void 0===e&&(e=!0),e&&this.hideBttnWrapper(),this.raiseEvent("hidePopups")},e.Editable.prototype.showEditPopup=function(){this.showEditPopupWrapper()}}(jQuery),function(e){e.Editable.prototype.getBoundingRect=function(){var t;if(this.isLink){t={};var i=this.$element;t.left=i.offset().left-this.$window.scrollLeft(),t.top=i.offset().top-this.$window.scrollTop(),t.width=i.outerWidth(),t.height=parseInt(i.css("padding-top").replace("px",""),10)+i.height(),t.right=1,t.bottom=1,t.ok=!0}else if(this.getRange()&&this.getRange().collapsed){var n=e(this.getSelectionElement());this.saveSelectionByMarkers();var r=this.$element.find(".f-marker:first");r.css("display","inline");var a=r.offset();r.css("display","none"),t={},t.left=a.left-this.$window.scrollLeft(),t.width=0,t.height=(parseInt(n.css("line-height").replace("px",""),10)||10)-10-this.$window.scrollTop(),t.top=a.top,t.right=1,t.bottom=1,t.ok=!0,this.removeMarkers()}else this.getRange()&&(t=this.getRange().getBoundingClientRect());return t},e.Editable.prototype.repositionEditor=function(e){var t,i,n;if(this.options.inlineMode||e){if(t=this.getBoundingRect(),this.showBttnWrapper(),t.ok||t.left>=0&&t.top>=0&&t.right>0&&t.bottom>0)i=t.left+t.width/2,n=t.top+t.height,this.iOS()&&this.iOSVersion()<8||(i+=this.$window.scrollLeft(),n+=this.$window.scrollTop()),this.showByCoordinates(i,n);else if(this.options.alwaysVisible)this.hide();else{var r=this.$element.offset();this.showByCoordinates(r.left,r.top+10)}0===this.options.buttons.length&&this.hide()}},e.Editable.prototype.showByCoordinates=function(e,t){e-=22,t+=8;var i=this.$document.find(this.options.scrollableContainer);"body"!=this.options.scrollableContainer&&(e-=i.offset().left,t-=i.offset().top,this.iPad()||(t+=i.scrollTop(),e+=i.scrollLeft()));var n=Math.max(this.$popup_editor.outerWidth(),250);e+n>=i.outerWidth()-50&&e+44-n>0?(this.$popup_editor.addClass("right-side"),e=i.outerWidth()-(e+44),"static"==i.css("position")&&(e=e+parseFloat(i.css("margin-left"),10)+parseFloat(i.css("margin-right"),10)),this.$popup_editor.css("top",t),this.$popup_editor.css("right",e),this.$popup_editor.css("left","auto")):e+n<i.outerWidth()-50?(this.$popup_editor.removeClass("right-side"),this.$popup_editor.css("top",t),this.$popup_editor.css("left",e),this.$popup_editor.css("right","auto")):(this.$popup_editor.removeClass("right-side"),this.$popup_editor.css("top",t),this.$popup_editor.css("left",Math.max(i.outerWidth()-n,10)/2),this.$popup_editor.css("right","auto")),this.$popup_editor.show()},e.Editable.prototype.positionPopup=function(t){if(e(this.$editor.find('button.fr-bttn[data-cmd="'+t+'"]')).length){var i=this.$editor.find('button.fr-bttn[data-cmd="'+t+'"]'),n=i.width(),r=i.height(),a=i.offset().left+n/2,o=i.offset().top+r;this.showByCoordinates(a,o)}}}(jQuery),function(e){e.Editable.prototype.refreshImageAlign=function(e){this.$image_editor.find('.fr-dropdown > button[data-name="align"] + ul li').removeClass("active");var t="floatImageNone",i="center";e.hasClass("fr-fil")?(i="left",t="floatImageLeft"):e.hasClass("fr-fir")&&(i="right",t="floatImageRight"),this.$image_editor.find('.fr-dropdown > button[data-name="align"].fr-trigger i').attr("class","fa fa-align-"+i),this.$image_editor.find('.fr-dropdown > button[data-name="align"] + ul li[data-val="'+t+'"]').addClass("active")},e.Editable.prototype.refreshImageDisplay=function(){var e=this.$element.find(".f-img-editor");this.$image_editor.find('.fr-dropdown > button[data-name="display"] + ul li').removeClass("active"),e.hasClass("fr-dib")?this.$image_editor.find('.fr-dropdown > button[data-name="display"] + ul li[data-val="fr-dib"]').addClass("active"):this.$image_editor.find('.fr-dropdown > button[data-name="display"] + ul li[data-val="fr-dii"]').addClass("active")},e.Editable.image_commands={align:{title:"Alignment",icon:"fa fa-align-center",refresh:e.Editable.prototype.refreshImageAlign,refreshOnShow:e.Editable.prototype.refreshImageAlign,seed:[{cmd:"floatImageLeft",title:"Align Left",icon:"fa fa-align-left"},{cmd:"floatImageNone",title:"Align Center",icon:"fa fa-align-center"},{cmd:"floatImageRight",title:"Align Right",icon:"fa fa-align-right"}],callback:function(e,t,i){this[i](e)},undo:!0},display:{title:"Text Wrap",icon:"fa fa-star",refreshOnShow:e.Editable.prototype.refreshImageDisplay,namespace:"Image",seed:[{title:"Inline",value:"fr-dii"},{title:"Break Text",value:"fr-dib"}],callback:function(e,t,i){this.displayImage(e,i)},undo:!0},linkImage:{title:"Insert Link",icon:{type:"font",value:"fa fa-link"},callback:function(e){this.linkImage(e)}},replaceImage:{title:"Replace Image",icon:{type:"font",value:"fa fa-exchange"},callback:function(e){this.replaceImage(e)}},removeImage:{title:"Remove Image",icon:{type:"font",value:"fa fa-trash-o"},callback:function(e){this.removeImage(e)}}},e.Editable.DEFAULTS=e.extend(e.Editable.DEFAULTS,{allowedImageTypes:["jpeg","jpg","png","gif"],customImageButtons:{},defaultImageTitle:"Image title",defaultImageWidth:300,defaultImageDisplay:"block",defaultImageAlignment:"center",imageButtons:["display","align","linkImage","replaceImage","removeImage"],imageDeleteConfirmation:!0,imageDeleteURL:null,imageDeleteParams:{},imageMove:!0,imageResize:!0,imageLink:!0,imageTitle:!0,imageUpload:!0,imageUploadParams:{},imageUploadParam:"file",imageUploadToS3:!1,imageUploadURL:"http://i.froala.com/upload",maxImageSize:10485760,pasteImage:!0,textNearImage:!0}),e.Editable.prototype.hideImageEditorPopup=function(){this.$image_editor&&this.$image_editor.hide()},e.Editable.prototype.showImageEditorPopup=function(){this.$image_editor&&this.$image_editor.show(),this.options.imageMove||this.$element.attr("contenteditable",!1)},e.Editable.prototype.showImageWrapper=function(){this.$image_wrapper&&this.$image_wrapper.show()},e.Editable.prototype.hideImageWrapper=function(e){this.$image_wrapper&&(this.$element.attr("data-resize")||e||(this.closeImageMode(),this.imageMode=!1),this.$image_wrapper.hide(),this.$image_wrapper.find("input").blur())},e.Editable.prototype.showInsertImage=function(){this.hidePopups(),this.showImageWrapper()},e.Editable.prototype.showImageEditor=function(){this.hidePopups(),this.showImageEditorPopup()},e.Editable.prototype.insertImageHTML=function(){var t='<div class="froala-popup froala-image-popup" style="display: none;"><h4><span data-text="true">Insert Image</span><span data-text="true">Uploading image</span><i title="Cancel" class="fa fa-times" id="f-image-close-'+this._id+'"></i></h4>';return t+='<div id="f-image-list-'+this._id+'">',this.options.imageUpload&&(t+='<div class="f-popup-line drop-upload">',t+='<div class="f-upload" id="f-upload-div-'+this._id+'"><strong data-text="true">Drop Image</strong><br>(<span data-text="true">or click</span>)<form target="frame-'+this._id+'" enctype="multipart/form-data" encoding="multipart/form-data" action="'+this.options.imageUploadURL+'" method="post" id="f-upload-form-'+this._id+'"><input id="f-file-upload-'+this._id+'" type="file" name="'+this.options.imageUploadParam+'" accept="image/*"></form></div>',this.browser.msie&&e.Editable.getIEversion()<=9&&(t+='<iframe id="frame-'+this._id+'" name="frame-'+this._id+'" src="javascript:false;" style="width:0; height:0; border:0px solid #FFF; position: fixed; z-index: -1;"></iframe>'),t+="</div>"),this.options.imageLink&&(t+='<div class="f-popup-line"><label><span data-text="true">Enter URL</span>: </label><input id="f-image-url-'+this._id+'" type="text" placeholder="http://example.com"><button class="f-browse fr-p-bttn" id="f-browser-'+this._id+'"><i class="fa fa-search"></i></button><button data-text="true" class="f-ok fr-p-bttn f-submit" id="f-image-ok-'+this._id+'">OK</button></div>'),t+="</div>",t+='<p class="f-progress" id="f-progress-'+this._id+'"><span></span></p>',t+="</div>"},e.Editable.prototype.iFrameLoad=function(){var e=this.$image_wrapper.find("iframe#frame-"+this._id);if(!e.attr("data-loaded"))return e.attr("data-loaded",!0),!1;try{var t=this.$image_wrapper.find("#f-upload-form-"+this._id);if(this.options.imageUploadToS3){var i=t.attr("action"),n=t.find('input[name="key"]').val(),r=i+n;this.writeImage(r),this.options.imageUploadToS3.callback&&this.options.imageUploadToS3.callback.call(this,r,n)}else{var a=e.contents().text();this.parseImageResponse(a)}}catch(o){this.throwImageError(7)}},e.Editable.prototype.initImage=function(){this.buildInsertImage(),(!this.isLink||this.isImage)&&this.initImagePopup(),this.addListener("destroy",this.destroyImage)},e.Editable.initializers.push(e.Editable.prototype.initImage),e.Editable.prototype.destroyImage=function(){this.$image_editor&&this.$image_editor.html("").removeData().remove(),this.$image_wrapper&&this.$image_wrapper.html("").removeData().remove()},e.Editable.prototype.buildInsertImage=function(){this.$image_wrapper=e(this.insertImageHTML()),this.$popup_editor.append(this.$image_wrapper);var t=this;if(this.$image_wrapper.on("mouseup touchend",e.proxy(function(e){this.isResizing()||e.stopPropagation()},this)),this.addListener("hidePopups",e.proxy(function(){this.hideImageWrapper(!0)}),this),this.$progress_bar=this.$image_wrapper.find("p#f-progress-"+this._id),this.options.imageUpload){if(this.browser.msie&&e.Editable.getIEversion()<=9){var i=this.$image_wrapper.find("iframe").get(0);i.attachEvent?i.attachEvent("onload",function(){t.iFrameLoad()}):i.onload=function(){t.iFrameLoad()}}this.$image_wrapper.on("change",'input[type="file"]',function(){if(void 0!==this.files)t.uploadImage(this.files);else{var i=e(this).parents("form");i.find('input[type="hidden"]').remove();var n;for(n in t.options.imageUploadParams)i.prepend('<input type="hidden" name="'+n+'" value="'+t.options.imageUploadParams[n]+'" />');if(t.options.imageUploadToS3!==!1){for(n in t.options.imageUploadToS3.params)i.prepend('<input type="hidden" name="'+n+'" value="'+t.options.imageUploadToS3.params[n]+'" />');i.prepend('<input type="hidden" name="success_action_status" value="201" />'),i.prepend('<input type="hidden" name="X-Requested-With" value="xhr" />'),i.prepend('<input type="hidden" name="Content-Type" value="" />'),i.prepend('<input type="hidden" name="key" value="'+t.options.imageUploadToS3.keyStart+(new Date).getTime()+"-"+e(this).val().match(/[^\/\\]+$/)+'" />')}else i.prepend('<input type="hidden" name="XHR_CORS_TRARGETORIGIN" value="'+t.window.location.href+'" />');t.showInsertImage(),t.showImageLoader(!0),t.disable(),i.submit()}e(this).val("")})}this.buildDragUpload(),this.$image_wrapper.on("mouseup keydown","#f-image-url-"+this._id,e.proxy(function(e){var t=e.which;t&&27===t||e.stopPropagation()},this)),this.$image_wrapper.on("click","#f-image-ok-"+this._id,e.proxy(function(){this.writeImage(this.$image_wrapper.find("#f-image-url-"+this._id).val(),!0)},this)),this.$image_wrapper.on(this.mouseup,"#f-image-close-"+this._id,e.proxy(function(e){return this.isDisabled?!1:(e.stopPropagation(),this.$bttn_wrapper.show(),this.hideImageWrapper(!0),this.options.inlineMode&&0===this.options.buttons.length&&(this.imageMode?this.showImageEditor():this.hide()),this.imageMode||(this.restoreSelection(),this.focus()),void(this.options.inlineMode||this.imageMode?this.imageMode&&this.showImageEditor():this.hide()))},this)),this.$image_wrapper.on("click",function(e){e.stopPropagation()}),this.$image_wrapper.on("click","*",function(e){e.stopPropagation()})},e.Editable.prototype.deleteImage=function(t){if(this.options.imageDeleteURL){var i=this.options.imageDeleteParams;i.info=t.data("info"),i.src=t.attr("src"),e.ajax({type:"POST",url:this.options.imageDeleteURL,data:i,crossDomain:this.options.crossDomain,xhrFields:{withCredentials:this.options.withCredentials},headers:this.options.headers}).done(e.proxy(function(e){t.parent().parent().hasClass("f-image-list")?t.parent().remove():t.parent().removeClass("f-img-deleting"),this.triggerEvent("imageDeleteSuccess",[e],!1)},this)).fail(e.proxy(function(){t.parent().removeClass("f-img-deleting"),this.triggerEvent("imageDeleteError",["Error during image delete."],!1)},this))}else t.parent().removeClass("f-img-deleting"),this.triggerEvent("imageDeleteError",["Missing imageDeleteURL option."],!1)},e.Editable.prototype.imageHandle=function(){var t=this,i=e('<span data-fr-verified="true">').addClass("f-img-handle").on({movestart:function(i){t.hide(),t.$element.addClass("f-non-selectable").attr("contenteditable",!1),t.$element.attr("data-resize",!0),e(this).attr("data-start-x",i.startX),e(this).attr("data-start-y",i.startY)},move:function(i){var n=e(this),r=i.pageX-parseInt(n.attr("data-start-x"),10);n.attr("data-start-x",i.pageX),n.attr("data-start-y",i.pageY);var a=n.prevAll("img"),o=a.width();n.hasClass("f-h-ne")||n.hasClass("f-h-se")?a.attr("width",o+r):a.attr("width",o-r),t.triggerEvent("imageResize",[],!1)},moveend:function(){e(this).removeAttr("data-start-x"),e(this).removeAttr("data-start-y"),t.$element.removeClass("f-non-selectable"),t.isImage||t.$element.attr("contenteditable",!0),t.triggerEvent("imageResizeEnd"),e(this).trigger("mouseup")},touchend:function(){e(this).trigger("moveend")}});return i},e.Editable.prototype.disableImageResize=function(){if(this.browser.mozilla)try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}},e.Editable.prototype.isResizing=function(){return this.$element.attr("data-resize")},e.Editable.prototype.getImageStyle=function(e){var t="z-index: 1; position: relative; overflow: auto;",i=e,n="padding";return e.parent().hasClass("f-img-editor")&&(i=e.parent(),n="margin"),t+=" padding-left:"+i.css(n+"-left")+";",t+=" padding-right:"+i.css(n+"-right")+";",t+=" padding-bottom:"+i.css(n+"-bottom")+";",t+=" padding-top:"+i.css(n+"-top")+";",e.hasClass("fr-dib")?(t+=" vertical-align: top; display: block;",t+=e.hasClass("fr-fir")?" float: none; margin-right: 0; margin-left: auto;":e.hasClass("fr-fil")?" float: none; margin-left: 0; margin-right: auto;":" float: none; margin: auto;"):(t+=" display: inline-block;",t+=e.hasClass("fr-fir")?" float: right;":e.hasClass("fr-fil")?" float: left;":" float: none;"),t},e.Editable.prototype.getImageClass=function(e){var t=e.split(" ");return e="fr-fin",t.indexOf("fr-fir")>=0&&(e="fr-fir"),t.indexOf("fr-fil")>=0&&(e="fr-fil"),t.indexOf("fr-dib")>=0&&(e+=" fr-dib"),t.indexOf("fr-dii")>=0&&(e+=" fr-dii"),e},e.Editable.prototype.refreshImageButtons=function(e){this.$image_editor.find("button").removeClass("active");var t=e.css("float");t=e.hasClass("fr-fil")?"Left":e.hasClass("fr-fir")?"Right":"None",this.$image_editor.find('button[data-cmd="floatImage'+t+'"]').addClass("active"),this.raiseEvent("refreshImage",[e])},e.Editable.prototype.initImageEvents=function(){document.addEventListener&&!document.dropAssigned&&(document.dropAssigned=!0,document.addEventListener("drop",e.proxy(function(t){return e(".froala-element img.fr-image-move").length?(t.preventDefault(),t.stopPropagation(),e(".froala-element img.fr-image-move").removeClass("fr-image-move"),!1):void 0},this))),this.disableImageResize();var t=this;this.$element.on("mousedown",'img:not([contenteditable="false"])',function(i){return t.isDisabled?!1:void(t.isResizing()||(t.initialized&&i.stopPropagation(),t.$element.attr("contenteditable",!1),e(this).addClass("fr-image-move")))}),this.$element.on("mouseup",'img:not([contenteditable="false"])',function(){return t.isDisabled?!1:void(t.isResizing()||(t.options.imageMove||t.isImage||t.isHTML||t.$element.attr("contenteditable",!0),e(this).removeClass("fr-image-move")))}),this.$element.on("click touchend",'img:not([contenteditable="false"])',function(i){if(t.isDisabled)return!1;if(!t.isResizing()&&t.initialized){if(i.preventDefault(),i.stopPropagation(),t.closeImageMode(),t.$element.blur(),t.refreshImageButtons(e(this)),t.$image_editor.find('.f-image-alt input[type="text"]').val(e(this).attr("alt")||e(this).attr("title")),t.showImageEditor(),!e(this).parent().hasClass("f-img-editor")||"SPAN"!=e(this).parent().get(0).tagName){var n=t.getImageClass(e(this).attr("class"));e(this).wrap('<span data-fr-verified="true" class="f-img-editor '+n+'"></span>'),0!==e(this).parents(".f-img-wrap").length||t.isImage?e(this).parents(".f-img-wrap").attr("class",n+" f-img-wrap"):e(this).parents("a").length>0?e(this).parents("a:first").wrap('<span data-fr-verified="true" class="f-img-wrap '+n+'"></span>'):e(this).parent().wrap('<span data-fr-verified="true" class="f-img-wrap '+n+'"></span>')}if(e(this).parent().find(".f-img-handle").remove(),t.options.imageResize){var r=t.imageHandle();e(this).parent().append(r.clone(!0).addClass("f-h-ne")),e(this).parent().append(r.clone(!0).addClass("f-h-se")),e(this).parent().append(r.clone(!0).addClass("f-h-sw")),e(this).parent().append(r.clone(!0).addClass("f-h-nw"))}t.showByCoordinates(e(this).offset().left+e(this).width()/2,e(this).offset().top+e(this).height()),t.imageMode=!0,t.$bttn_wrapper.find(".fr-bttn").removeClass("active"),t.clearSelection()}}),this.$element.on("mousedown touchstart",".f-img-handle",e.proxy(function(){return t.isDisabled?!1:void this.$element.attr("data-resize",!0)},this)),this.$element.on("mouseup",".f-img-handle",e.proxy(function(i){if(t.isDisabled)return!1;var n=e(i.target).prevAll("img");setTimeout(e.proxy(function(){this.$element.removeAttr("data-resize"),n.click()},this),0)},this))},e.Editable.prototype.execImage=function(t,i,n){var r=this.$element.find("span.f-img-editor"),a=r.find("img"),o=e.Editable.image_commands[t]||this.options.customImageButtons[t];o&&o.callback&&o.callback.apply(this,[a,t,i,n])},e.Editable.prototype.bindImageRefreshListener=function(t){t.refresh&&this.addListener("refreshImage",e.proxy(function(e){t.refresh.apply(this,[e])},this))},e.Editable.prototype.buildImageButton=function(e,t){var i='<button class="fr-bttn" data-namespace="Image" data-cmd="'+t+'" title="'+e.title+'">';return i+=void 0!==this.options.icons[t]?this.prepareIcon(this.options.icons[t],e.title):this.prepareIcon(e.icon,e.title),i+="</button>",this.bindImageRefreshListener(e),i},e.Editable.prototype.buildImageAlignDropdown=function(e){this.bindImageRefreshListener(e);for(var t='<ul class="fr-dropdown-menu f-align">',i=0;i<e.seed.length;i++){var n=e.seed[i];t+='<li data-cmd="align" data-namespace="Image" data-val="'+n.cmd+'" title="'+n.title+'"><a href="#"><i class="'+n.icon+'"></i></a></li>'}return t+="</ul>"},e.Editable.prototype.buildImageDropdown=function(e){return dropdown=this.buildDefaultDropdown(e),btn=this.buildDropdownButton(e,dropdown),btn},e.Editable.prototype.image_command_dispatcher={align:function(e){var t=this.buildImageAlignDropdown(e),i=this.buildDropdownButton(e,t);return i}},e.Editable.prototype.buildImageButtons=function(){for(var t="",i=0;i<this.options.imageButtons.length;i++){var n=this.options.imageButtons[i];if(void 0!==e.Editable.image_commands[n]||void 0!==this.options.customImageButtons[n]){var r=e.Editable.image_commands[n]||this.options.customImageButtons[n];r.cmd=n;var a=this.image_command_dispatcher[n];t+=a?a.apply(this,[r]):r.seed?this.buildImageDropdown(r,n):this.buildImageButton(r,n)}}return t},e.Editable.prototype.initImagePopup=function(){this.$image_editor=e('<div class="froala-popup froala-image-editor-popup" style="display: none">');var t=e('<div class="f-popup-line f-popup-toolbar">').appendTo(this.$image_editor);t.append(this.buildImageButtons()),this.addListener("hidePopups",this.hideImageEditorPopup),this.options.imageTitle&&e('<div class="f-popup-line f-image-alt">').append('<label><span data-text="true">Title</span>: </label>').append(e('<input type="text">').on("mouseup keydown touchend",function(e){var t=e.which;t&&27===t||e.stopPropagation()})).append('<button class="fr-p-bttn f-ok" data-text="true" data-callback="setImageAlt" data-cmd="setImageAlt" title="OK">OK</button>').appendTo(this.$image_editor),this.$popup_editor.append(this.$image_editor),this.bindCommandEvents(this.$image_editor),this.bindDropdownEvents(this.$image_editor)},e.Editable.prototype.displayImage=function(e,t){var i=e.parents("span.f-img-editor");i.removeClass("fr-dii fr-dib").addClass(t),this.triggerEvent("imageDisplayed",[e,t]),e.click()},e.Editable.prototype.floatImageLeft=function(e){var t=e.parents("span.f-img-editor");t.removeClass("fr-fin fr-fil fr-fir").addClass("fr-fil"),this.isImage&&this.$element.css("float","left"),this.triggerEvent("imageFloatedLeft",[e]),e.click()},e.Editable.prototype.floatImageNone=function(e){var t=e.parents("span.f-img-editor");t.removeClass("fr-fin fr-fil fr-fir").addClass("fr-fin"),this.isImage||(t.parent().get(0)==this.$element.get(0)?t.wrap('<div style="text-align: center;"></div>'):t.parents(".f-img-wrap:first").css("text-align","center")),this.isImage&&this.$element.css("float","none"),this.triggerEvent("imageFloatedNone",[e]),e.click()},e.Editable.prototype.floatImageRight=function(e){var t=e.parents("span.f-img-editor");t.removeClass("fr-fin fr-fil fr-fir").addClass("fr-fir"),this.isImage&&this.$element.css("float","right"),this.triggerEvent("imageFloatedRight",[e]),e.click()},e.Editable.prototype.linkImage=function(e){this.imageMode=!0,this.showInsertLink();var t=e.parents("span.f-img-editor");"A"==t.parent().get(0).tagName?(this.$link_wrapper.find('input[type="text"]').val(t.parent().attr("href")),this.$link_wrapper.find(".f-external-link").attr("href",t.parent().attr("href")),"_blank"==t.parent().attr("target")?this.$link_wrapper.find('input[type="checkbox"]').prop("checked",!0):this.$link_wrapper.find('input[type="checkbox"]').prop("checked",!1),this.$link_wrapper.find("a.f-external-link, button.f-unlink").show()):(this.$link_wrapper.find('input[type="text"]').val("http://"),this.$link_wrapper.find(".f-external-link").attr("href","#"),this.$link_wrapper.find('input[type="checkbox"]').prop("checked",this.options.alwaysBlank),this.$link_wrapper.find("a.f-external-link, button.f-unlink").hide())},e.Editable.prototype.replaceImage=function(e){this.showInsertImage(),this.imageMode=!0,this.$image_wrapper.find('input[type="text"]').val(e.attr("src")),this.showByCoordinates(e.offset().left+e.width()/2,e.offset().top+e.height())},e.Editable.prototype.removeImage=function(t){var i=t.parents("span.f-img-editor");if(0===i.length)return!1;var n=t.get(0),r="Are you sure? Image will be deleted.";if(e.Editable.LANGS[this.options.language]&&(r=e.Editable.LANGS[this.options.language].translation[r]),!this.options.imageDeleteConfirmation||confirm(r)){if(this.triggerEvent("beforeRemoveImage",[e(n)],!1)){var a=i.parents(this.valid_nodes.join(","));i.parents(".f-img-wrap").length?i.parents(".f-img-wrap").remove():i.remove(),this.refreshImageList(!0),this.hide(),a.length&&a[0]!=this.$element.get(0)&&""===e(a[0]).text()&&e(a[0]).remove(),this.wrapText(),this.triggerEvent("afterRemoveImage",[t]),this.focus(),this.imageMode=!1}}else t.click()},e.Editable.prototype.setImageAlt=function(){var e=this.$element.find("span.f-img-editor");e.find("img").attr("alt",this.$image_editor.find('.f-image-alt input[type="text"]').val()),e.find("img").attr("title",this.$image_editor.find('.f-image-alt input[type="text"]').val()),this.hide(),this.closeImageMode(),this.triggerEvent("imageAltSet")},e.Editable.prototype.buildImageMove=function(){var t=this;this.isLink||this.initDrag(),t.$element.on("dragover dragenter dragend",function(){return!1}),t.$element.on("drop",function(i){if(t.isDisabled)return!1;if(t.closeImageMode(),t.hide(),t.imageMode=!1,t.initialized||(t.$element.unbind("mousedown.element"),t.lateInit()),!t.options.imageUpload||0!==e(".froala-element img.fr-image-move").length){if(e(".froala-element .fr-image-move").length>0&&t.options.imageMove){i.preventDefault(),i.stopPropagation(),t.insertMarkersAtPoint(i.originalEvent),t.restoreSelectionByMarkers();var n=e("<div>").append(e(".froala-element img.fr-image-move").clone().removeClass("fr-image-move").addClass("fr-image-dropped")).html();t.insertHTML(n);var r=e(".froala-element img.fr-image-move").parent();e(".froala-element img.fr-image-move").remove(),r.get(0)!=t.$element.get(0)&&r.is(":empty")&&r.remove(),t.clearSelection(),t.initialized?setTimeout(function(){t.$element.find(".fr-image-dropped").removeClass(".fr-image-dropped").click()},0):t.$element.find(".fr-image-dropped").removeClass(".fr-image-dropped"),t.sync(),t.hideOtherEditors()}else i.preventDefault(),i.stopPropagation(),e(".froala-element img.fr-image-move").removeClass("fr-image-move");return!1}if(i.originalEvent.dataTransfer&&i.originalEvent.dataTransfer.files&&i.originalEvent.dataTransfer.files.length){if(t.isDisabled)return!1;var a=i.originalEvent.dataTransfer.files;t.options.allowedImageTypes.indexOf(a[0].type.replace(/image\//g,""))>=0&&(t.insertMarkersAtPoint(i.originalEvent),t.showByCoordinates(i.originalEvent.pageX,i.originalEvent.pageY),t.uploadImage(a),i.preventDefault(),i.stopPropagation())}})},e.Editable.prototype.buildDragUpload=function(){var t=this;t.$image_wrapper.on("dragover","#f-upload-div-"+this._id,function(){return e(this).addClass("f-hover"),!1}),t.$image_wrapper.on("dragend","#f-upload-div-"+this._id,function(){return e(this).removeClass("f-hover"),!1}),t.$image_wrapper.on("drop","#f-upload-div-"+this._id,function(i){return i.preventDefault(),i.stopPropagation(),t.options.imageUpload?(e(this).removeClass("f-hover"),void t.uploadImage(i.originalEvent.dataTransfer.files)):!1})},e.Editable.prototype.showImageLoader=function(t){if(void 0===t&&(t=!1),t){var i="Please wait!";e.Editable.LANGS[this.options.language]&&(i=e.Editable.LANGS[this.options.language].translation[i]),this.$progress_bar.find("span").css("width","100%").text(i)}else this.$image_wrapper.find("h4").addClass("uploading");this.$image_wrapper.find("#f-image-list-"+this._id).hide(),this.$progress_bar.show(),this.showInsertImage()},e.Editable.prototype.hideImageLoader=function(){this.$progress_bar.hide(),this.$progress_bar.find("span").css("width","0%").text(""),this.$image_wrapper.find("#f-image-list-"+this._id).show(),this.$image_wrapper.find("h4").removeClass("uploading")},e.Editable.prototype.writeImage=function(t,i,n){if(i&&(t=this.sanitizeURL(t),""===t))return!1;var r=new Image;r.onerror=e.proxy(function(){this.hideImageLoader(),this.throwImageError(1)},this),r.onload=this.imageMode?e.proxy(function(){var e=this.$element.find(".f-img-editor > img");e.attr("src",t),this.hide(),this.hideImageLoader(),this.$image_editor.show(),this.enable(),this.triggerEvent("imageReplaced",[e,n]),setTimeout(function(){e.trigger("click")},0)},this):e.proxy(function(){this.insertLoadedImage(t,n)},this),this.showImageLoader(!0),r.src=t},e.Editable.prototype.processInsertImage=function(t,i){void 0===i&&(i=!0),this.enable(),this.restoreSelection(),this.focus();var n="";parseInt(this.options.defaultImageWidth,10)&&(n=' width="'+this.options.defaultImageWidth+'"');var r="fr-fin";"left"==this.options.defaultImageAlignment&&(r="fr-fil"),"right"==this.options.defaultImageAlignment&&(r="fr-fir"),r+=" fr-di"+this.options.defaultImageDisplay[0];var a='<img class="'+r+' fr-just-inserted" alt="'+this.options.defaultImageTitle+'" src="'+t+'"'+n+">",o=this.getSelectionElements()[0],s=this.getRange(),l=!this.browser.msie&&e.Editable.getIEversion()>8?e(s.startContainer):null;l&&l.hasClass("f-img-wrap")?(1===s.startOffset?(l.after("<"+this.options.defaultTag+'><span class="f-marker" data-type="true" data-id="0"></span><br/><span class="f-marker" data-type="false" data-id="0"></span></'+this.options.defaultTag+">"),this.restoreSelectionByMarkers(),this.getSelection().collapseToStart()):0===s.startOffset&&(l.before("<"+this.options.defaultTag+'><span class="f-marker" data-type="true" data-id="0"></span><br/><span class="f-marker" data-type="false" data-id="0"></span></'+this.options.defaultTag+">"),this.restoreSelectionByMarkers(),this.getSelection().collapseToStart()),this.insertHTML(a)):this.getSelectionTextInfo(o).atStart&&o!=this.$element.get(0)&&"TD"!=o.tagName&&"TH"!=o.tagName&&"LI"!=o.tagName?e(o).before("<"+this.options.defaultTag+">"+a+"</"+this.options.defaultTag+">"):this.insertHTML(a),this.disable()},e.Editable.prototype.insertLoadedImage=function(t,i){this.triggerEvent("imageLoaded",[t],!1),this.processInsertImage(t,!1),this.browser.msie&&this.$element.find("img").each(function(e,t){t.oncontrolselect=function(){return!1}}),this.enable(),this.hide(),this.hideImageLoader(),this.wrapText(),this.cleanupLists();var n,r=this.$element.find("img.fr-just-inserted").get(0);r&&(n=r.previousSibling),n&&3==n.nodeType&&/\u200B/gi.test(n.textContent)&&e(n).remove(),this.triggerEvent("imageInserted",[this.$element.find("img.fr-just-inserted"),i]),setTimeout(e.proxy(function(){this.$element.find("img.fr-just-inserted").removeClass("fr-just-inserted").trigger("touchend")},this),50)},e.Editable.prototype.throwImageErrorWithMessage=function(e){this.enable(),this.triggerEvent("imageError",[{message:e,code:0}],!1),this.hideImageLoader()},e.Editable.prototype.throwImageError=function(e){this.enable();var t="Unknown image upload error.";1==e?t="Bad link.":2==e?t="No link in upload response.":3==e?t="Error during file upload.":4==e?t="Parsing response failed.":5==e?t="Image too large.":6==e?t="Invalid image type.":7==e&&(t="Image can be uploaded only to same domain in IE 8 and IE 9."),this.triggerEvent("imageError",[{code:e,message:t}],!1),this.hideImageLoader()},e.Editable.prototype.uploadImage=function(t){if(!this.triggerEvent("beforeImageUpload",[t],!1))return!1;if(void 0!==t&&t.length>0){var i;if(this.drag_support.formdata&&(i=this.drag_support.formdata?new FormData:null),i){var n;for(n in this.options.imageUploadParams)i.append(n,this.options.imageUploadParams[n]);if(this.options.imageUploadToS3!==!1){for(n in this.options.imageUploadToS3.params)i.append(n,this.options.imageUploadToS3.params[n]);i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",t[0].type),i.append("key",this.options.imageUploadToS3.keyStart+(new Date).getTime()+"-"+t[0].name)
}if(i.append(this.options.imageUploadParam,t[0]),t[0].size>this.options.maxImageSize)return this.throwImageError(5),!1;if(this.options.allowedImageTypes.indexOf(t[0].type.replace(/image\//g,""))<0)return this.throwImageError(6),!1}if(i){var r;if(this.options.crossDomain)r=this.createCORSRequest("POST",this.options.imageUploadURL);else{r=new XMLHttpRequest,r.open("POST",this.options.imageUploadURL);for(var a in this.options.headers)r.setRequestHeader(a,this.options.headers[a])}r.onload=e.proxy(function(){var t="Please wait!";e.Editable.LANGS[this.options.language]&&(t=e.Editable.LANGS[this.options.language].translation[t]),this.$progress_bar.find("span").css("width","100%").text(t);try{this.options.imageUploadToS3?201==r.status?this.parseImageResponseXML(r.responseXML):this.throwImageError(3):r.status>=200&&r.status<300?this.parseImageResponse(r.responseText):this.throwImageError(3)}catch(i){this.throwImageError(4)}},this),r.onerror=e.proxy(function(){this.throwImageError(3)},this),r.upload.onprogress=e.proxy(function(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;this.$progress_bar.find("span").css("width",t+"%")}},this),this.disable(),r.send(i),this.showImageLoader()}}},e.Editable.prototype.parseImageResponse=function(t){try{var i=e.parseJSON(t);i.link?this.writeImage(i.link,!1,t):i.error?this.throwImageErrorWithMessage(i.error):this.throwImageError(2)}catch(n){this.throwImageError(4)}},e.Editable.prototype.parseImageResponseXML=function(t){try{var i=e(t).find("Location").text(),n=e(t).find("Key").text();this.options.imageUploadToS3.callback.call(this,i,n),i?this.writeImage(i):this.throwImageError(2)}catch(r){this.throwImageError(4)}},e.Editable.prototype.setImageUploadURL=function(e){e&&(this.options.imageUploadURL=e),this.options.imageUploadToS3&&(this.options.imageUploadURL="https://"+this.options.imageUploadToS3.bucket+"."+this.options.imageUploadToS3.region+".amazonaws.com/")},e.Editable.prototype.closeImageMode=function(){this.$element.find("span.f-img-editor > img").each(e.proxy(function(t,i){e(i).removeClass("fr-fin fr-fil fr-fir fr-dib fr-dii").addClass(this.getImageClass(e(i).parent().attr("class"))),e(i).parents(".f-img-wrap").length>0?"A"==e(i).parent().parent().get(0).tagName?e(i).siblings("span.f-img-handle").remove().end().unwrap().parent().unwrap():e(i).siblings("span.f-img-handle").remove().end().unwrap().unwrap():e(i).siblings("span.f-img-handle").remove().end().unwrap()},this)),this.$element.find("span.f-img-editor").length&&(this.$element.find("span.f-img-editor").remove(),this.$element.parents("span.f-img-editor").remove()),this.$element.removeClass("f-non-selectable"),this.editableDisabled||this.isHTML||this.$element.attr("contenteditable",!0),this.$image_editor&&this.$image_editor.hide(),this.$link_wrapper&&this.options.linkText&&this.$link_wrapper.find('input[type="text"].f-lt').parent().removeClass("fr-hidden")},e.Editable.prototype.refreshImageList=function(t){if(!this.isLink&&!this.options.editInPopup){var i=[],n=[],r=this;if(this.$element.find("img").each(function(t,a){var o=e(a);if(i.push(o.attr("src")),n.push(o),0!==o.parents(".f-img-editor").length||o.hasClass("fr-dii")||o.hasClass("fr-dib")||(r.options.textNearImage?o.addClass(o.hasClass("fr-fin")?"fr-dib":o.hasClass("fr-fil")||o.hasClass("fr-fir")?"fr-dii":"block"==o.css("display")&&"none"==o.css("float")?"fr-dib":"fr-dii"):(o.addClass("fr-dib"),r.options.imageButtons.splice(r.options.imageButtons.indexOf("display"),1))),r.options.textNearImage||o.removeClass("fr-dii").addClass("fr-dib"),0===o.parents(".f-img-editor").length&&!o.hasClass("fr-fil")&&!o.hasClass("fr-fir")&&!o.hasClass("fr-fin"))if(o.hasClass("fr-dii"))o.addClass("right"==o.css("float")?"fr-fir":"left"==o.css("float")?"fr-fil":"fr-fin");else{var s=o.attr("style");o.hide(),o.addClass(0===parseInt(o.css("margin-right"),10)&&s?"fr-fir":0===parseInt(o.css("margin-left"),10)&&s?"fr-fil":"fr-fin"),o.show()}o.css("margin",""),o.css("float",""),o.removeAttr("style"),o.removeAttr("data-style")}),void 0===t)for(var a=0;a<this.imageList.length;a++)i.indexOf(this.imageList[a].attr("src"))<0&&this.triggerEvent("afterRemoveImage",[this.imageList[a]],!1);this.imageList=n}},e.Editable.prototype.insertImage=function(){this.options.inlineMode||(this.closeImageMode(),this.imageMode=!1,this.positionPopup("insertImage")),this.selectionInEditor()&&this.saveSelection(),this.showInsertImage(),this.imageMode=!1,this.$image_wrapper.find('input[type="text"]').val("")}}(jQuery),function(e){e.Editable.prototype.showLinkWrapper=function(){this.$link_wrapper&&(this.$link_wrapper.show(),this.$link_wrapper.trigger("hideLinkList"),this.$link_wrapper.trigger("hideLinkClassList"),this.$link_wrapper.find("input.f-lu").removeClass("fr-error"),this.imageMode||!this.options.linkText?this.$link_wrapper.find('input[type="text"].f-lt').parent().addClass("fr-hidden"):this.$link_wrapper.find('input[type="text"].f-lt').parent().removeClass("fr-hidden"),this.imageMode&&this.$link_wrapper.find('input[type="text"].f-lu').removeAttr("disabled"),this.phone()?this.$document.scrollTop(this.$link_wrapper.offset().top+30):setTimeout(e.proxy(function(){this.imageMode&&this.iPad()||this.$link_wrapper.find('input[type="text"].f-lu').focus().select()},this),0),this.link=!0),this.refreshDisabledState()},e.Editable.prototype.hideLinkWrapper=function(){this.$link_wrapper&&(this.$link_wrapper.hide(),this.$link_wrapper.find("input").blur()),this.refreshDisabledState()},e.Editable.prototype.showInsertLink=function(){this.hidePopups(),this.showLinkWrapper()},e.Editable.prototype.initLinkEvents=function(){var t=this,i=function(e){e.stopPropagation(),e.preventDefault()},n=function(i){if(i.stopPropagation(),i.preventDefault(),t.isDisabled)return!1;if(""!==t.text())return t.hide(),!1;t.link=!0,t.clearSelection(),t.removeMarkers(),t.selectionDisabled||(e(this).before('<span class="f-marker" data-type="true" data-id="0" data-fr-verified="true"></span>'),e(this).after('<span class="f-marker" data-type="false" data-id="0" data-fr-verified="true"></span>'),t.restoreSelectionByMarkers()),t.exec("createLink");var n=e(this).attr("href")||"";t.$link_wrapper.find("input.f-lt").val(e(this).text()),t.isLink?("#"==n&&(n=""),t.$link_wrapper.find("input#f-lu-"+t._id).val(n.replace(/\&amp;/g,"&")),t.$link_wrapper.find(".f-external-link").attr("href",n||"#")):(t.$link_wrapper.find("input.f-lu").val(n.replace(/\&amp;/g,"&")),t.$link_wrapper.find(".f-external-link").attr("href",n)),t.$link_wrapper.find('input[type="checkbox"]').prop("checked","_blank"==e(this).attr("target")),t.$link_wrapper.find("li.f-choose-link-class").each(e.proxy(function(t,i){e(this).hasClass(e(i).data("class"))&&e(i).click()},this)),t.showByCoordinates(e(this).offset().left+e(this).outerWidth()/2,e(this).offset().top+(parseInt(e(this).css("padding-top"),10)||0)+e(this).height()),t.showInsertLink(),e(this).hasClass("fr-file")?t.$link_wrapper.find("input.f-lu").attr("disabled","disabled"):t.$link_wrapper.find("input.f-lu").removeAttr("disabled"),t.closeImageMode()};this.$element.on("mousedown","a",e.proxy(function(e){this.isResizing()||e.stopPropagation()},this)),this.isLink?this.iOS()?(this.$element.on("touchstart",i),this.$element.on("touchend",n)):this.$element.on("click",n):this.iOS()?(this.$element.on("touchstart",'a:not([contenteditable="false"])',i),this.$element.on("touchend",'a:not([contenteditable="false"])',n),this.$element.on("touchstart",'a[contenteditable="false"]',i),this.$element.on("touchend",'a[contenteditable="false"]',i)):(this.$element.on("click",'a:not([contenteditable="false"])',n),this.$element.on("click",'a[contenteditable="false"]',i))},e.Editable.prototype.destroyLink=function(){this.$link_wrapper.html("").removeData().remove()},e.Editable.prototype.initLink=function(){this.buildCreateLink(),this.initLinkEvents(),this.addListener("destroy",this.destroyLink)},e.Editable.initializers.push(e.Editable.prototype.initLink),e.Editable.prototype.removeLink=function(){this.imageMode?("A"==this.$element.find(".f-img-editor").parent().get(0).tagName&&e(this.$element.find(".f-img-editor").get(0)).unwrap(),this.triggerEvent("imageLinkRemoved"),this.showImageEditor(),this.$element.find(".f-img-editor").find("img").click(),this.link=!1):(this.restoreSelection(),this.document.execCommand("unlink",!1,null),this.isLink||this.$element.find("a:empty").remove(),this.triggerEvent("linkRemoved"),this.hideLinkWrapper(),this.$bttn_wrapper.show(),(!this.options.inlineMode||this.isLink)&&this.hide(),this.link=!1)},e.Editable.prototype.writeLink=function(t,i,n,r,a){var o;this.options.noFollow&&(a=!0),this.options.alwaysBlank&&(r=!0);var s="",l="";a===!0&&/^https?:\/\//.test(t)&&(s='rel="nofollow"'),r===!0&&(l='target="_blank"');var c=t;if(t=this.sanitizeURL(t),this.options.convertMailAddresses){var d=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i;d.test(t)&&0!==t.indexOf("mailto:")&&(t="mailto:"+t)}if(0===t.indexOf("mailto:")||""===this.options.linkAutoPrefix||/^(https?:|ftps?:|)\/\//.test(t)||(t=this.options.linkAutoPrefix+t),""===t)return this.$link_wrapper.find("input.f-lu").addClass("fr-error").focus(),this.triggerEvent("badLink",[c],!1),!1;if(this.$link_wrapper.find("input.f-lu").removeClass("fr-error"),this.imageMode){if("A"!=this.$element.find(".f-img-editor").parent().get(0).tagName)this.$element.find(".f-img-editor").wrap('<a data-fr-link="true" href="'+t+'" '+l+" "+s+"></a>");else{var p=this.$element.find(".f-img-editor").parent();r===!0?p.attr("target","_blank"):p.removeAttr("target"),a===!0?p.attr("rel","nofollow"):p.removeAttr("rel"),p.removeClass(Object.keys(this.options.linkClasses).join(" ")),p.attr("href",t).addClass(n)}this.triggerEvent("imageLinkInserted",[t]),this.showImageEditor(),this.$element.find(".f-img-editor").find("img").click(),this.link=!1}else{var u=null;this.isLink?""===i&&(i=this.$element.text()):(this.restoreSelection(),o=this.getSelectionLinks(),o.length>0&&(u=o[0].attributes,is_file=e(o[0]).hasClass("fr-file")),this.saveSelectionByMarkers(),this.document.execCommand("unlink",!1,t),this.$element.find('span[data-fr-link="true"]').each(function(t,i){e(i).replaceWith(e(i).html())}),this.restoreSelectionByMarkers()),this.isLink?(this.$element.text(i),o=[this.$element.attr("href",t).get(0)]):(this.removeMarkers(),(this.options.linkText||""===this.text())&&(this.insertHTML('<span class="f-marker" data-fr-verified="true" data-id="0" data-type="true"></span>'+(i||t)+'<span class="f-marker" data-fr-verified="true" data-id="0" data-type="false"></span>'),this.restoreSelectionByMarkers()),this.document.execCommand("createLink",!1,t),o=this.getSelectionLinks());for(var h=0;h<o.length;h++){if(u)for(var f=0;f<u.length;f++)"href"!=u[f].nodeName&&e(o[h]).attr(u[f].nodeName,u[f].value);r===!0?e(o[h]).attr("target","_blank"):e(o[h]).removeAttr("target"),a===!0&&/^https?:\/\//.test(t)?e(o[h]).attr("rel","nofollow"):e(o[h]).removeAttr("rel"),e(o[h]).data("fr-link",!0),e(o[h]).removeClass(Object.keys(this.options.linkClasses).join(" ")),e(o[h]).addClass(n)}this.$element.find("a:empty").remove(),this.triggerEvent("linkInserted",[t]),this.hideLinkWrapper(),this.$bttn_wrapper.show(),(!this.options.inlineMode||this.isLink)&&this.hide(),this.link=!1}},e.Editable.prototype.createLinkHTML=function(){var e='<div class="froala-popup froala-link-popup" style="display: none;">';e+='<h4><span data-text="true">Insert Link</span><a target="_blank" title="Open Link" class="f-external-link" href="#"><i class="fa fa-external-link"></i></a><i title="Cancel" class="fa fa-times" id="f-link-close-'+this._id+'"></i></h4>',e+='<div class="f-popup-line fr-hidden"><input type="text" placeholder="Text" class="f-lt" id="f-lt-'+this._id+'"></div>';var t="";if(this.options.linkList.length&&(t="f-bi"),e+='<div class="f-popup-line"><input type="text" placeholder="http://www.example.com" class="f-lu '+t+'" id="f-lu-'+this._id+'"/>',this.options.linkList.length){e+='<button class="fr-p-bttn f-browse-links" id="f-browse-links-'+this._id+'"><i class="fa fa-chevron-down"></i></button>',e+='<ul id="f-link-list-'+this._id+'">';for(var i=0;i<this.options.linkList.length;i++){var n=this.options.linkList[i];e+='<li class="f-choose-link" data-nofollow="'+n.nofollow+'" data-blank="'+n.blank+'" data-body="'+n.body+'" data-title="'+n.title+'" data-href="'+n.href+'">'+n.body+"</li>"}e+="</ul>"}if(e+="</div>",Object.keys(this.options.linkClasses).length){e+='<div class="f-popup-line"><input type="text" placeholder="Choose link type" class="f-bi" id="f-luc-'+this._id+'" disabled="disabled"/>',e+='<button class="fr-p-bttn f-browse-links" id="f-links-class-'+this._id+'"><i class="fa fa-chevron-down"></i></button>',e+='<ul id="f-link-class-list-'+this._id+'">';for(var r in this.options.linkClasses){var a=this.options.linkClasses[r];e+='<li class="f-choose-link-class" data-class="'+r+'">'+a+"</li>"}e+="</ul>",e+="</div>"}return e+='<div class="f-popup-line"><input type="checkbox" id="f-checkbox-'+this._id+'"> <label data-text="true" for="f-checkbox-'+this._id+'">Open in new tab</label><button data-text="true" type="button" class="fr-p-bttn f-ok f-submit" id="f-ok-'+this._id+'">OK</button>',this.options.unlinkButton&&(e+='<button type="button" data-text="true" class="fr-p-bttn f-ok f-unlink" id="f-unlink-'+this._id+'">UNLINK</button>'),e+="</div></div>"},e.Editable.prototype.buildCreateLink=function(){this.$link_wrapper=e(this.createLinkHTML()),this.$popup_editor.append(this.$link_wrapper);var t=this;this.addListener("hidePopups",this.hideLinkWrapper),this.$link_wrapper.on("mouseup touchend",e.proxy(function(e){this.isResizing()||(e.stopPropagation(),this.$link_wrapper.trigger("hideLinkList"))},this)),this.$link_wrapper.on("click",function(e){e.stopPropagation()}),this.$link_wrapper.on("click","*",function(e){e.stopPropagation()}),this.options.linkText&&this.$link_wrapper.on("mouseup keydown","input#f-lt-"+this._id,e.proxy(function(e){var t=e.which;t&&27===t||e.stopPropagation(),this.$link_wrapper.trigger("hideLinkList"),this.$link_wrapper.trigger("hideLinkClassList")},this)),this.$link_wrapper.on("mouseup keydown touchend touchstart","input#f-lu-"+this._id,e.proxy(function(e){var t=e.which;t&&27===t||e.stopPropagation(),this.$link_wrapper.trigger("hideLinkList"),this.$link_wrapper.trigger("hideLinkClassList")},this)),this.$link_wrapper.on("click keydown","input#f-checkbox-"+this._id,function(e){var t=e.which;t&&27===t||e.stopPropagation()}),this.$link_wrapper.on("touchend","button#f-ok-"+this._id,function(e){e.stopPropagation()}).on("click","button#f-ok-"+this._id,e.proxy(function(){var e,t=this.$link_wrapper.find("input#f-lt-"+this._id),i=this.$link_wrapper.find("input#f-lu-"+this._id),n=this.$link_wrapper.find("input#f-luc-"+this._id),r=this.$link_wrapper.find("input#f-checkbox-"+this._id);e=t?t.val():"";var a=i.val();this.isLink&&""===a&&(a="#");var o="";n&&(o=n.data("class")),this.writeLink(a,e,o,r.prop("checked"))},this)),this.$link_wrapper.on("click touch","button#f-unlink-"+this._id,e.proxy(function(){this.link=!0,this.removeLink()},this)),this.options.linkList.length&&(this.$link_wrapper.on("click touch","li.f-choose-link",function(){var i=t.$link_wrapper.find("button#f-browse-links-"+t._id),n=t.$link_wrapper.find("input#f-lt-"+t._id),r=t.$link_wrapper.find("input#f-lu-"+t._id),a=t.$link_wrapper.find("input#f-checkbox-"+t._id);n&&n.val(e(this).data("body")),r.val(e(this).data("href")),a.prop("checked",e(this).data("blank")),i.click()}).on("mouseup","li.f-choose-link",function(e){e.stopPropagation()}),this.$link_wrapper.on("click","button#f-browse-links-"+this._id+", button#f-browse-links-"+this._id+" > i",function(i){i.stopPropagation();var n=t.$link_wrapper.find("ul#f-link-list-"+t._id);t.$link_wrapper.trigger("hideLinkClassList"),e(this).find("i").toggleClass("fa-chevron-down"),e(this).find("i").toggleClass("fa-chevron-up"),n.toggle()}).on("mouseup","button#f-browse-links-"+this._id+", button#f-browse-links-"+this._id+" > i",function(e){e.stopPropagation()}),this.$link_wrapper.bind("hideLinkList",function(){var e=t.$link_wrapper.find("ul#f-link-list-"+t._id),i=t.$link_wrapper.find("button#f-browse-links-"+t._id);e&&e.is(":visible")&&i.click()})),Object.keys(this.options.linkClasses).length&&(this.$link_wrapper.on("mouseup keydown","input#f-luc-"+this._id,e.proxy(function(e){var t=e.which;t&&27===t||e.stopPropagation(),this.$link_wrapper.trigger("hideLinkList"),this.$link_wrapper.trigger("hideLinkClassList")},this)),this.$link_wrapper.on("click touch","li.f-choose-link-class",function(){var i=t.$link_wrapper.find("input#f-luc-"+t._id);i.val(e(this).text()),i.data("class",e(this).data("class")),t.$link_wrapper.trigger("hideLinkClassList")}).on("mouseup","li.f-choose-link-class",function(e){e.stopPropagation()}),this.$link_wrapper.on("click","button#f-links-class-"+this._id,function(i){i.stopPropagation(),t.$link_wrapper.trigger("hideLinkList");var n=t.$link_wrapper.find("ul#f-link-class-list-"+t._id);e(this).find("i").toggleClass("fa-chevron-down"),e(this).find("i").toggleClass("fa-chevron-up"),n.toggle()}).on("mouseup","button#f-links-class-"+this._id,function(e){e.stopPropagation()}),this.$link_wrapper.bind("hideLinkClassList",function(){var e=t.$link_wrapper.find("ul#f-link-class-list-"+t._id),i=t.$link_wrapper.find("button#f-links-class-"+t._id);e&&e.is(":visible")&&i.click()})),this.$link_wrapper.on(this.mouseup,"i#f-link-close-"+this._id,e.proxy(function(){this.$bttn_wrapper.show(),this.hideLinkWrapper(),(!this.options.inlineMode&&!this.imageMode||this.isLink||0===this.options.buttons.length)&&this.hide(),this.imageMode?this.showImageEditor():(this.restoreSelection(),this.focus())},this))},e.Editable.prototype.getSelectionLinks=function(){var e,t,i,n,r=[];if(window.getSelection){var a=window.getSelection();if(a.getRangeAt&&a.rangeCount){n=this.document.createRange();for(var o=0;o<a.rangeCount;++o)if(e=a.getRangeAt(o),t=e.commonAncestorContainer,t&&1!=t.nodeType&&(t=t.parentNode),t&&"a"==t.nodeName.toLowerCase())r.push(t);else{i=t.getElementsByTagName("a");for(var s=0;s<i.length;++s)n.selectNodeContents(i[s]),n.compareBoundaryPoints(e.END_TO_START,e)<1&&n.compareBoundaryPoints(e.START_TO_END,e)>-1&&r.push(i[s])}}}else if(this.document.selection&&"Control"!=this.document.selection.type)if(e=this.document.selection.createRange(),t=e.parentElement(),"a"==t.nodeName.toLowerCase())r.push(t);else{i=t.getElementsByTagName("a"),n=this.document.body.createTextRange();for(var l=0;l<i.length;++l)n.moveToElementText(i[l]),n.compareEndPoints("StartToEnd",e)>-1&&n.compareEndPoints("EndToStart",e)<1&&r.push(i[l])}return r},e.Editable.prototype.insertLink=function(){this.options.inlineMode||(this.closeImageMode(),this.imageMode=!1,this.positionPopup("createLink")),this.selectionInEditor()&&this.saveSelection(),this.showInsertLink();var t=this.getSelectionLink()||"",i=this.getSelectionLinks();i.length>0?(this.$link_wrapper.find('input[type="checkbox"]').prop("checked","_blank"==e(i[0]).attr("target")),this.$link_wrapper.find('input[type="text"].f-lt').val(e(i[0]).text()||""),e(i[0]).hasClass("fr-file")?this.$link_wrapper.find('input[type="text"].f-lu').attr("disabled","disabled"):this.$link_wrapper.find('input[type="text"].f-lu').removeAttr("disabled"),this.$link_wrapper.find("a.f-external-link, button.f-unlink").show()):(this.$link_wrapper.find('input[type="checkbox"]').prop("checked",this.options.alwaysBlank),this.$link_wrapper.find('input[type="text"].f-lt').val(this.text()),this.$link_wrapper.find('input[type="text"].f-lu').removeAttr("disabled"),this.$link_wrapper.find("a.f-external-link, button.f-unlink").hide()),this.$link_wrapper.find(".f-external-link").attr("href",t||"#"),this.$link_wrapper.find('input[type="text"].f-lu').val(t.replace(/\&amp;/g,"&")||"http://")}}(jQuery),function(e){e.Editable.prototype.browserFixes=function(){this.backspaceEmpty(),this.backspaceInEmptyBlock(),this.fixHR(),this.domInsert(),this.fixIME(),this.cleanInvisibleSpace(),this.cleanBR(),this.insertSpace()},e.Editable.prototype.backspaceInEmptyBlock=function(){this.$element.on("keyup",e.proxy(function(t){var i=t.which;if(this.browser.mozilla&&!this.isHTML&&8==i){var n=e(this.getSelectionElement());this.valid_nodes.indexOf(n.get(0).tagName)>=0&&1==n.find("*").length&&""===n.text()&&1==n.find("br").length&&this.setSelection(n.get(0))}},this))},e.Editable.prototype.insertSpace=function(){this.browser.mozilla&&this.$element.on("keypress",e.proxy(function(e){var t=e.which,i=this.getSelectionElements()[0];this.isHTML||32!=t||"PRE"==i.tagName||(e.preventDefault(),this.insertSimpleHTML("&nbsp;"))},this))},e.Editable.prototype.cleanBR=function(){this.$element.on("keyup",e.proxy(function(){this.$element.find(this.valid_nodes.join(" > br:last, ")+" > br:last").each(e.proxy(function(t,i){var n=i.previousSibling;["TH","TD"].indexOf(e(i).parent().get(0).tagName)<0&&n&&"BR"!=n.tagName&&e(i).parent().text().length>0&&this.isLastSibling(i)&&e(i).remove()},this))},this))},e.Editable.prototype.replaceU200B=function(t){for(var i=0;i<t.length;i++)3==t[i].nodeType&&/\u200B/gi.test(t[i].textContent)?t[i].textContent=t[i].textContent.replace(/\u200B/gi,""):1==t[i].nodeType&&this.replaceU200B(e(t[i]).contents())},e.Editable.prototype.cleanInvisibleSpace=function(){var t=function(t){var i=e(t).text();return t&&/\u200B/.test(e(t).text())&&i.replace(/\u200B/gi,"").length>0?!0:!1};this.$element.on("keyup",e.proxy(function(){var i=this.getSelectionElement();t(i)&&0===e(i).find("li").length&&(this.saveSelectionByMarkers(),this.replaceU200B(e(i).contents()),this.restoreSelectionByMarkers())},this))},e.Editable.prototype.fixHR=function(){this.$element.on("keypress",e.proxy(function(t){var i=e(this.getSelectionElement());if(i.is("hr")||i.parents("hr").length)return!1;var n=t.which;if(8==n){var r=e(this.getSelectionElements()[0]);r.prev().is("hr")&&this.getSelectionTextInfo(r.get(0)).atStart&&(this.saveSelectionByMarkers(),r.prev().remove(),this.restoreSelectionByMarkers(),t.preventDefault())}},this))},e.Editable.prototype.backspaceEmpty=function(){this.$element.on("keydown",e.proxy(function(e){var t=e.which;!this.isHTML&&8==t&&this.$element.hasClass("f-placeholder")&&e.preventDefault()},this))},e.Editable.prototype.domInsert=function(){this.$element.on("keydown",e.proxy(function(e){var t=e.which;8===t&&(this.no_verify=!0),13===t&&(this.add_br=!0)},this)),this.$element.on("DOMNodeInserted",e.proxy(function(t){if("SPAN"!==t.target.tagName||e(t.target).attr("data-fr-verified")||this.no_verify||this.textEmpty(t.target)||e(t.target).replaceWith(e(t.target).contents()),"BR"===t.target.tagName&&setTimeout(function(){e(t.target).removeAttr("type")},0),"A"===t.target.tagName&&setTimeout(function(){e(t.target).removeAttr("_moz_dirty")},0),this.options.paragraphy&&this.add_br&&"BR"===t.target.tagName&&(e(t.target).prev().length&&"TABLE"===e(t.target).prev().get(0).tagName||e(t.target).next().length&&"TABLE"===e(t.target).next().get(0).tagName)){e(t.target).wrap('<p class="fr-p-wrap">');var i=this.$element.find("p.fr-p-wrap").removeAttr("class");this.setSelection(i.get(0))}"BR"===t.target.tagName&&this.isLastSibling(t.target)&&"LI"==t.target.parentNode.tagName&&e(t.target).remove()},this)),this.$element.on("keyup",e.proxy(function(e){var t=e.which;8===t&&(this.$element.find("span:not(.fr-verified)").attr("data-fr-verified",!0),this.no_verify=!1),13===t&&(this.add_br=!1)},this))},e.Editable.prototype.fixIME=function(){try{this.$element.get(0).msGetInputContext&&(this.$element.get(0).msGetInputContext().addEventListener("MSCandidateWindowShow",e.proxy(function(){this.ime=!0},this)),this.$element.get(0).msGetInputContext().addEventListener("MSCandidateWindowHide",e.proxy(function(){this.ime=!1,this.$element.trigger("keydown"),this.oldHTML=""},this)))}catch(t){}}}(jQuery),function(e){e.Editable.prototype.handleEnter=function(){var t=e.proxy(function(){var t=this.getSelectionElement();return"LI"==t.tagName||this.parents(e(t),"li").length>0?!0:!1},this);this.$element.on("keypress",e.proxy(function(e){if(!this.isHTML&&!t()){var i=e.which;if(13==i&&!e.shiftKey){e.preventDefault(),this.saveUndoStep(),this.insertSimpleHTML("<break></break>");var n=this.getSelectionElements();n[0]==this.$element.get(0)?this.enterInMainElement(n[0]):this.enterInElement(n[0])}}},this))},e.Editable.prototype.enterInMainElement=function(t){var i=e(t).find("break").get(0);if(e(i).parent().get(0)==t)this.isLastSibling(i)?this.insertSimpleHTML("</br>"+this.markers_html+this.br):e(t).hasClass("f-placeholder")?e(t).html("</br>"+this.markers_html+this.br):this.insertSimpleHTML("</br>"+this.markers_html),e(t).find("break").remove(),this.restoreSelectionByMarkers();else if(e(i).parents(this.$element).length){for(t=this.getSelectionElement();"BREAK"==t.tagName||0===e(t).text().length;)t=t.parentNode;if(this.getSelectionTextInfo(t).atEnd)e(t).after(this.breakEnd(this.getDeepParent(t),!0)),this.$element.find("break").remove(),this.restoreSelectionByMarkers();else if(this.getSelectionTextInfo(t).atStart){for(;i.parentNode!=this.$element.get(0);)i=i.parentNode;e(i).before("<br/>"),this.$element.find("break").remove(),this.$element.find("a:empty").replaceWith(this.markers_html+"<br/>"),this.restoreSelectionByMarkers()}else this.breakMiddle(this.getDeepParent(t),!0),this.restoreSelectionByMarkers()}else e(i).remove()},e.Editable.prototype.enterInElement=function(t){["TD","TH"].indexOf(t.tagName)<0?this.getSelectionTextInfo(t).atEnd?(e(t).after(this.breakEnd(t)),this.$element.find("break").remove(),this.restoreSelectionByMarkers()):this.getSelectionTextInfo(t).atStart?(e(t).before(this.options.paragraphy?"<"+this.options.defaultTag+">"+this.br+"</"+this.options.defaultTag+">":"<br/>"),this.$element.find("break").remove()):"PRE"==t.tagName?(this.$element.find("break").after("<br/>"+this.markers_html),this.$element.find("break").remove(),this.restoreSelectionByMarkers()):(this.breakMiddle(t),this.restoreSelectionByMarkers()):this.enterInMainElement(t)},e.Editable.prototype.breakEnd=function(t,i){void 0===i&&(i=!1);var n=e(t).find("break").get(0),r=this.br;this.options.paragraphy||(r="<br/>");var a=this.markers_html+r;for(i&&(a=this.markers_html+e.Editable.INVISIBLE_SPACE);n!=t;)"A"!=n.tagName&&"BREAK"!=n.tagName&&(a="<"+n.tagName+this.attrs(n)+">"+a+"</"+n.tagName+">"),n=n.parentNode;return i&&"A"!=n.tagName&&"BREAK"!=n.tagName&&(a="<"+n.tagName+this.attrs(n)+">"+a+"</"+n.tagName+">"),this.options.paragraphy&&(a="<"+this.options.defaultTag+">"+a+"</"+this.options.defaultTag+">"),i&&(a=r+a),a},e.Editable.prototype.breakMiddle=function(t,i){void 0===i&&(i=!1);for(var n=e(t).find("break").get(0),r=this.markers_html,a="";n!=t;)n=n.parentNode,a=a+"</"+n.tagName+">",r="<"+n.tagName+this.attrs(n)+">"+r;var o="<"+t.tagName+this.attrs(t)+">"+e(t).html()+"</"+t.tagName+">";o=o.replace(/<break><\/break>/,a+(i?this.br:"")+r),e(t).replaceWith(o)}}(jQuery),function(e){e.Editable.prototype.isFirstSibling=function(e){var t=e.previousSibling;return t?3==t.nodeType&&""===t.textContent?this.isFirstSibling(t):!1:!0},e.Editable.prototype.isLastSibling=function(e){var t=e.nextSibling;return t?3==t.nodeType&&""===t.textContent?this.isLastSibling(t):!1:!0},e.Editable.prototype.getDeepParent=function(e){return e.parentNode==this.$element.get(0)?e:this.getDeepParent(e.parentNode)},e.Editable.prototype.attrs=function(e){for(var t="",i=e.attributes,n=0;n<i.length;n++){var r=i[n];t+=" "+r.nodeName+'="'+r.value+'"'}return t}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){function i(e){function t(){n?(i(),B(t),r=!0,n=!1):r=!1}var i=e,n=!1,r=!1;this.kick=function(){n=!0,r||t()},this.end=function(e){var t=i;e&&(r?(i=n?function(){t(),e()}:e,n=!0):e())}}function n(){return!0}function r(){return!1}function a(e){e.preventDefault()}function o(e){F[e.target.tagName.toLowerCase()]||e.preventDefault()}function s(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function l(e,t){var i,n;if(e.identifiedTouch)return e.identifiedTouch(t);for(i=-1,n=e.length;++i<n;)if(e[i].identifier===t)return e[i]}function c(e,t){var i=l(e.changedTouches,t.identifier);return!i||i.pageX===t.pageX&&i.pageY===t.pageY?void 0:i}function d(e){var t;s(e)&&(t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},P(document,j.move,p,t),P(document,j.cancel,u,t))}function p(e){var t=e.data;y(e,t,e,h)}function u(){h()}function h(){N(document,j.move,p),N(document,j.cancel,u)}function f(e){var t,i;F[e.target.tagName.toLowerCase()]||(t=e.changedTouches[0],i={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier},P(document,H.move+"."+t.identifier,m,i),P(document,H.cancel+"."+t.identifier,g,i))}function m(e){var t=e.data,i=c(e,t);i&&y(e,t,i,v)}function g(e){var t=e.data,i=l(e.changedTouches,t.identifier);i&&v(t.identifier)}function v(e){N(document,"."+e,m),N(document,"."+e,g)}function y(e,t,i,n){var r=i.pageX-t.startX,a=i.pageY-t.startY;L*L>r*r+a*a||x(e,t,i,r,a,n)}function b(){return this._handled=n,!1}function w(e){try{e._handled()}catch(t){return!1}}function x(e,t,i,n,r,a){var o,s;t.target,o=e.targetTouches,s=e.timeStamp-t.timeStamp,t.type="movestart",t.distX=n,t.distY=r,t.deltaX=n,t.deltaY=r,t.pageX=i.pageX,t.pageY=i.pageY,t.velocityX=n/s,t.velocityY=r/s,t.targetTouches=o,t.finger=o?o.length:1,t._handled=b,t._preventTouchmoveDefault=function(){e.preventDefault()},R(t.target,t),a(t.identifier)}function $(e){var t=e.data.timer;e.data.touch=e,e.data.timeStamp=e.timeStamp,t.kick()}function k(e){var t=e.data.event,i=e.data.timer;E(),I(t,i,function(){setTimeout(function(){N(t.target,"click",r)},0)})}function E(){N(document,j.move,$),N(document,j.end,k)}function C(e){var t=e.data.event,i=e.data.timer,n=c(e,t);n&&(e.preventDefault(),t.targetTouches=e.targetTouches,e.data.touch=n,e.data.timeStamp=e.timeStamp,i.kick())}function T(e){var t=e.data.event,i=e.data.timer,n=l(e.changedTouches,t.identifier);n&&(S(t),I(t,i))}function S(e){N(document,"."+e.identifier,C),N(document,"."+e.identifier,T)}function _(e,t,i){var n=i-e.timeStamp;e.type="move",e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/n,e.velocityY=.3*e.velocityY+.7*e.deltaY/n,e.pageX=t.pageX,e.pageY=t.pageY}function I(e,t,i){t.end(function(){return e.type="moveend",R(e.target,e),i&&i()})}function M(){return P(this,"movestart.move",w),!0}function D(){return N(this,"dragstart drag",a),N(this,"mousedown touchstart",o),N(this,"movestart",w),!0}function A(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(P(this,"dragstart."+e.guid+" drag."+e.guid,a,t,e.selector),P(this,"mousedown."+e.guid,o,t,e.selector))}function O(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(N(this,"dragstart."+e.guid+" drag."+e.guid),N(this,"mousedown."+e.guid))}var L=6,P=e.event.add,N=e.event.remove,R=function(t,i,n){e.event.trigger(i,n,t)},B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){e()},25)}}(),F={textarea:!0,input:!0,select:!0,button:!0},j={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},H={move:"touchmove",cancel:"touchend",end:"touchend"};e.event.special.movestart={setup:M,teardown:D,add:A,remove:O,_default:function(e){function n(){_(a,o.touch,o.timeStamp),R(e.target,a)}var a,o;e._handled()&&(a={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},o={event:a,timer:new i(n),touch:t,timeStamp:t},e.identifier===t?(P(e.target,"click",r),P(document,j.move,$,o),P(document,j.end,k,o)):(e._preventTouchmoveDefault(),P(document,H.move+"."+e.identifier,C,o),P(document,H.end+"."+e.identifier,T,o)))}},e.event.special.move={setup:function(){P(this,"movestart.move",e.noop)
},teardown:function(){N(this,"movestart.move",e.noop)}},e.event.special.moveend={setup:function(){P(this,"movestart.moveend",e.noop)},teardown:function(){N(this,"movestart.moveend",e.noop)}},P(document,"mousedown.move",d),P(document,"touchstart.move",f),"function"==typeof Array.prototype.indexOf&&!function(e){for(var t=["changedTouches","targetTouches"],i=t.length;i--;)-1===e.event.props.indexOf(t[i])&&e.event.props.push(t[i])}(e)}),window.WYSIWYGModernizr=function(e,t,i){function n(e){h.cssText=e}function r(e,t){return typeof e===t}var a,o,s,l="2.7.1",c={},d=t.documentElement,p="modernizr",u=t.createElement(p),h=u.style,f=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),m={},g=[],v=g.slice,y=function(e,i,n,r){var a,o,s,l,c=t.createElement("div"),u=t.body,h=u||t.createElement("body");if(parseInt(n,10))for(;n--;)s=t.createElement("div"),s.id=r?r[n]:p+(n+1),c.appendChild(s);return a=["&#173;",'<style id="s',p,'">',e,"</style>"].join(""),c.id=p,(u?c:h).innerHTML+=a,h.appendChild(c),u||(h.style.background="",h.style.overflow="hidden",l=d.style.overflow,d.style.overflow="hidden",d.appendChild(h)),o=i(c,e),u?c.parentNode.removeChild(c):(h.parentNode.removeChild(h),d.style.overflow=l),!!o},b=function(t){var i=e.matchMedia||e.msMatchMedia;if(i)return i(t).matches;var n;return y("@media "+t+" { #"+p+" { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),n},w={}.hasOwnProperty;s=r(w,"undefined")||r(w.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return w.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=v.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=t.prototype;var a=new r,o=t.apply(a,i.concat(v.call(arguments)));return Object(o)===o?o:a}return t.apply(e,i.concat(v.call(arguments)))};return n}),m.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:y(["@media (",f.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i};for(var x in m)s(m,x)&&(o=x.toLowerCase(),c[o]=m[x](),g.push((c[o]?"":"no-")+o));return c.addTest=function(e,t){if("object"==typeof e)for(var n in e)s(e,n)&&c.addTest(n,e[n]);else{if(e=e.toLowerCase(),c[e]!==i)return c;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(d.className+=" "+(t?"":"no-")+e),c[e]=t}return c},n(""),u=a=null,c._version=l,c._prefixes=f,c.mq=b,c.testStyles=y,c}(this,this.document),!function(e){e.Editable.prototype.coreInit=function(){var e=this,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=function(e){for(var t=e.toString(),i=0,n=0;n<t.length;n++)i+=parseInt(t.charAt(n),10);return i>10?i%9+1:i};if(e.options.key!==!1){var n=function(e,t,i){for(var n=Math.abs(i);n-->0;)e-=t;return 0>i&&(e+=123),e},r=function(e){return e},a=function(e){if(!e)return e;for(var a="",o=r("charCodeAt"),s=r("fromCharCode"),l=t.indexOf(e[0]),c=1;c<e.length-2;c++){for(var d=i(++l),p=e[o](c),u="";/[0-9-]/.test(e[c+1]);)u+=e[++c];u=parseInt(u,10)||0,p=n(p,d,u),p^=l-1&31,a+=String[s](p)}return a},o=r(a),s=function(e){return"none"==e.css("display")?(e.attr("style",e.attr("style")+o("zD4D2qJ-7dhuB-11bB4E1wqlhlfE4gjhkbB6C5eg1C-8h1besB-16e1==")),!0):!1},l=function(){for(var e=0,t=document.domain,i=t.split("."),n="_gd"+(new Date).getTime();e<i.length-1&&-1==document.cookie.indexOf(n+"="+n);)t=i.slice(-1-++e).join("."),document.cookie=n+"="+n+";domain="+t+";";return document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),c=function(){var t=o(e.options.key)||"";return t!==o("eQZMe1NJGC1HTMVANU==")&&t.indexOf(l,t.length-l.length)<0&&[o("9qqG-7amjlwq=="),o("KA3B3C2A6D1D5H5H1A3==")].indexOf(l)<0?(e.$box.append(o("uA5kygD3g1h1lzrA7E2jtotjvooB2A5eguhdC-22C-16nC2B3lh1deA-21C-16B4A2B4gi1F4D1wyA-13jA4H5C2rA-65A1C10dhzmoyJ2A10A-21d1B-13xvC2I4enC4C2B5B4G4G4H1H4A10aA8jqacD1C3c1B-16D-13A-13B2E5A4jtxfB-13fA1pewxvzA3E-11qrB4E4qwB-16icA1B3ykohde1hF4A2E4clA4C7E6haA4D1xtmolf1F-10A1H4lhkagoD5naalB-22B8B4quvB-8pjvouxB3A-9plnpA2B6D6BD2D1C2H1C3C3A4mf1G-10C-8i1G3C5B3pqB-9E5B1oyejA3ddalvdrnggE3C3bbj1jC6B3D3gugqrlD8B2DB-9qC-7qkA10D2VjiodmgynhA4HA-9D-8pI-7rD4PrE-11lvhE3B5A-16C7A6A3ekuD1==")),e.$lb=e.$box.find("> div:last"),e.$ab=e.$lb.find("> a"),s(e.$lb)||s(e.$ab)):void 0};c()}},e.Editable.initializers.push(e.Editable.prototype.coreInit)}(jQuery),function(e){e.Editable.DEFAULTS=e.extend(e.Editable.DEFAULTS,{allowedBlankTags:["TEXTAREA"],selfClosingTags:["br","button","input","img","hr","param","!--","source","embed","!","meta","link","base"]}),e.Editable.prototype.isClosingTag=function(e){return e?null!==e.match(/^<\/([a-zA-Z0-9]+)([^<]+)*>$/gi):!1},e.Editable.prototype.tagName=function(e){return e.replace(/^<\/?([a-zA-Z0-9-!]+)([^>]+)*>$/gi,"$1").toLowerCase()},e.Editable.SELF_CLOSING_AFTER=["source"],e.Editable.prototype.isSelfClosingTag=function(e){var t=this.tagName(e);return this.options.selfClosingTags.indexOf(t.toLowerCase())>=0},e.Editable.prototype.tagKey=function(e){return e.type+(e.attrs||[]).sort().join("|")},e.Editable.prototype.extendedKey=function(e){return this.tagKey(e)+JSON.stringify(e.style)},e.Editable.prototype.mapDOM=function(t){var i=[],n={},r={},a=0,o=this;e(t).find(".f-marker").html(e.Editable.INVISIBLE_SPACE);var s=function(t,i){if(3===t.nodeType)return[];if(8===t.nodeType)return[{comment:!0,attrs:{},styles:{},idx:a++,sp:i,ep:i,text:t.textContent}];var n=t.tagName;"B"==n&&(n="STRONG"),"I"==n&&(!t.className||t.className.indexOf("fa-")<0)&&(n="EM"),t.style.display="";var r={},s={},l=null;if(t.attributes)for(var c=0;c<t.attributes.length;c++){var d=t.attributes[c];"style"==d.nodeName?l=d.value:r[d.nodeName]=d.value}if(l){var p=l.match(/([^:]*):([^:;]*(;|$))/gi);if(p)for(var u=0;u<p.length;u++){var h=p[u].split(":"),f=h.slice(1).join(":").trim();";"==f[f.length-1]&&(f=f.substr(0,f.length-1)),s[h[0].trim()]=f}}var m=[];if(e.isEmptyObject(r)&&"SPAN"==t.tagName&&!e.isEmptyObject(s)){for(var g in s){var v={};v[g]=s[g],m.push({selfClosing:!1,attrs:r,styles:v,idx:a++,sp:i,ep:i+t.textContent.length,tagName:n})}return m}return[{selfClosing:o.options.selfClosingTags.indexOf(n.toLowerCase())>=0,attrs:r,styles:s,idx:a++,sp:i,ep:i+t.textContent.length,tagName:n}]},l=function(e,o){var c,d,p;if(e!=t)for(d=s(e,o),c=0;c<d.length;c++)p=d[c],i.push(p),n[p.sp]||(n[p.sp]={}),r[p.ep]||(r[p.ep]={}),n[p.sp][p.tagName]||(n[p.sp][p.tagName]=[]),r[p.ep][p.tagName]||(r[p.ep][p.tagName]=[]),n[p.sp][p.tagName].push(p),r[p.ep][p.tagName].push(p);var u=e.childNodes;if(u){for(c=0;c<u.length;c++)c>0&&8!=u[c-1].nodeType&&(o+=u[c-1].textContent.length),l(u[c],o);if(d)for(c=0;c<d.length;c++)p=d[c],p.ci=a++,n[p.ep]||(n[p.ep]={}),n[p.ep][p.tagName]||(n[p.ep][p.tagName]=[]),n[p.ep][p.tagName].push({shadow:!0,ci:a-1})}},c=function(){var t,r,a,s;for(t in n)for(var l in n[t])for(a=0;a<n[t][l].length;a++)if(r=n[t][l][a],!(r.selfClosing||r.dirty||r.shadow||r.comment))for(var c=a+1;c<n[t][l].length;c++)if(s=n[t][l][c],!(s.selfClosing||s.dirty||s.shadow||s.comment||1!=Object.keys(r.styles).length||1!=Object.keys(s.styles).length||s.sp==s.ep)){var d=Object.keys(r.styles)[0];if(s.styles[d]){r.sp=s.ep;for(var p=0;p<n[r.sp][r.tagName].length;p++){var u=n[r.sp][r.tagName][p];if(u.shadow&&u.ci==s.ci){n[r.sp][r.tagName].splice(p,0,r);break}}n[t][l].splice(a,1),a--;break}}for(t=0;t<i.length;t++)if(r=i[t],!r.dirty&&!r.selfClosing&&!r.comment)if(r.sp==r.ep&&e.isEmptyObject(r.attrs)&&e.isEmptyObject(r.style)&&o.options.allowedBlankTags.indexOf(r.tagName)<0)r.dirty=!0;else if(n[r.ep]&&n[r.ep][r.tagName])for(a=0;a<n[r.ep][r.tagName].length;a++)if(s=n[r.ep][r.tagName][a],!s.dirty&&r!=s&&!r.selfClosing&&!s.shadow&&!s.comment&&e.isEmptyObject(s.attrs)&&JSON.stringify(s.styles)==JSON.stringify(r.styles)){r.ep=s.ep,s.dirty=!0,t--;break}for(t=0;t<i.length;t++)if(r=i[t],!r.dirty&&!r.selfClosing&&!r.comment)if(r.sp==r.ep&&e.isEmptyObject(r.attrs)&&e.isEmptyObject(r.style)&&o.options.allowedBlankTags.indexOf(r.tagName)<0)r.dirty=!0;else if(n[r.sp]&&n[r.sp][r.tagName])for(a=n[r.sp][r.tagName].length-1;a>=0;a--)s=n[r.sp][r.tagName][a],s.dirty||r!=s&&(r.selfClosing||s.shadow||s.comment||r.ep==s.ep&&e.isEmptyObject(s.attrs)&&(r.styles=e.extend(r.styles,s.styles),s.dirty=!0))};l(t,0),c();for(var d=i.length-1;d>=0;d--)i.dirty&&i.splice(d,1);return i},e.Editable.prototype.sortNodes=function(e,t){if("BR"==e.tagName)return-1;if("BR"==t.tagName)return 1;if(e.comment)return 1;var i=e.ep-e.sp,n=t.ep-e.sp;return 0===i&&0===n?e.idx-t.idx:i===n?t.ci-e.ci:n-i},e.Editable.prototype.openTag=function(e){var t,i="<"+e.tagName.toLowerCase(),n=Object.keys(e.attrs).sort();for(t=0;t<n.length;t++){var r=n[t];i+=" "+r+'="'+e.attrs[r]+'"'}var a="",o=Object.keys(e.styles).sort();for(t=0;t<o.length;t++){var s=o[t];null!=e.styles[s]&&(a+=s.replace("_","-")+": "+e.styles[s]+"; ")}return""!==a&&(i+=' style="'+a.trim()+'"'),i+=">"},e.Editable.prototype.commentTag=function(e){var t="";if(e.selfClosing){var i;t="<"+e.tagName.toLowerCase();var n=Object.keys(e.attrs).sort();for(i=0;i<n.length;i++){var r=n[i];t+=" "+r+'="'+e.attrs[r]+'"'}var a="",o=Object.keys(e.styles).sort();for(i=0;i<o.length;i++){var s=o[i];null!=e.styles[s]&&(a+=s.replace("_","-")+": "+e.styles[s]+"; ")}""!==a&&(t+=' style="'+a.trim()+'"'),t+="/>"}else e.comment&&(t="<!--"+e.text+"-->");return t},e.Editable.prototype.closeTag=function(e){return"</"+e.tagName.toLowerCase()+">"},e.Editable.prototype.nodesOpenedAt=function(e,t){for(var i=[],n=e.length-1;n>=0&&e[n].sp==t;)i.push(e.pop()),n--;return i},e.Editable.prototype.entity=function(e){return ch_map={">":"&gt;","<":"&lt;","&":"&amp;"},ch_map[e]?ch_map[e]:e},e.Editable.prototype.removeInvisibleWhitespace=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];i.childNodes.length?this.removeInvisibleWhitespace(i):i.textContent=i.textContent.replace(/\u200B/gi,"")}},e.Editable.prototype.cleanOutput=function(t,i){var n,r,a,o;i&&this.removeInvisibleWhitespace(t);var s=this.mapDOM(t,i).sort(function(e,t){return t.sp-e.sp}),l=t.textContent;html="";var c=[],d=-1,p=e.proxy(function(){for(var t="";c.length;){var i=c.pop();i.selfClosing||i.comment?t+=this.commentTag(i):(!e.isEmptyObject(i.attrs)||this.options.allowedBlankTags.indexOf(i.tagName)>=0)&&(t=this.openTag(i)+t+this.closeTag(i))}html+=t},this),u={},h=[];for(n=0;n<=l.length;n++){if(u[n])for(r=u[n].length-1;r>=0;r--)if(h[h.length-1].tagName==u[n][r].tagName&&JSON.stringify(h[h.length-1].styles)==JSON.stringify(u[n][r].styles))html+=this.closeTag(u[n][r]),h.pop();else{for(var f=[];h[h.length-1].tagName!==u[n][r].tagName||JSON.stringify(h[h.length-1].styles)!==JSON.stringify(u[n][r].styles);)o=h.pop(),html+=this.closeTag(o),f.push(o);for(html+=this.closeTag(u[n][r]),h.pop();f.length;){var m=f.pop();html+=this.openTag(m),h.push(m)}}for(var g=this.nodesOpenedAt(s,n).sort(this.sortNodes).reverse();g.length;){var v=g.pop();if(!v.dirty)if(v.selfClosing||v.comment)v.ci>d||"BR"==v.tagName?(p(),html+=this.commentTag(v),d=v.ci):c.length?(c.push(v),d=v.ci):(html+=this.commentTag(v),d=v.ci);else if(v.ep>v.sp){v.ci>d&&p();var y=[];if("A"==v.tagName)for(var b=v.sp+1;b<v.ep;b++)if(u[b]&&u[b].length)for(a=0;a<u[b].length;a++)y.push(u[b][a]),html+=this.closeTag(u[b][a]),h.pop();var w=[];if("SPAN"==v.tagName&&("#123456"==v.styles["background-color"]||"#123456"===e.Editable.RGBToHex(v.styles["background-color"])||"#123456"==v.styles.color||"#123456"===e.Editable.RGBToHex(v.styles.color)))for(;h.length;){var x=h.pop();html+=this.closeTag(x),w.push(x)}for(html+=this.openTag(v),d=v.ci,h.push(v),u[v.ep]||(u[v.ep]=[]),u[v.ep].push(v);y.length;)v=y.pop(),html+=this.openTag(v),h.push(v);for(;w.length;)v=w.pop(),html+=this.openTag(v),h.push(v)}else v.sp==v.ep&&(c.push(v),d=v.ci)}p(),n!=l.length&&(html+=this.entity(l[n]))}return html=html.replace(/(<span[^>]*? class\s*=\s*["']?f-marker["']?[^>]+>)\u200B(<\/span>)/gi,"$1$2"),html},e.Editable.prototype.wrapDirectContent=function(){if(!this.options.paragraphy)for(var t=null,i=this.$element.contents(),n=0;n<i.length;n++)1!=i[n].nodeType||this.valid_nodes.indexOf(i[n].tagName)<0?(t||(t=e('<div class="fr-wrap">'),e(i[n]).before(t)),t.append(i[n])):t=null},e.Editable.prototype.cleanify=function(t,i,n){if(this.browser.msie&&e.Editable.getIEversion()<9)return!1;var r;if(this.isHTML)return!1;void 0===t&&(t=!0),void 0===n&&(n=!0),this.no_verify=!0,this.$element.find("span").removeAttr("data-fr-verified"),n&&this.saveSelectionByMarkers(),t?r=this.getSelectionElements():(this.wrapDirectContent(),r=this.$element.find(this.valid_nodes.join(",")),0===r.length&&(r=[this.$element.get(0)]));var a,o;if(r[0]!=this.$element.get(0))for(var s=0;s<r.length;s++){var l=e(r[s]);0===l.find(this.valid_nodes.join(",")).length&&(a=l.html(),o=this.cleanOutput(l.get(0),i),o!==a&&l.html(o))}else 0===this.$element.find(this.valid_nodes.join(",")).length&&(a=this.$element.html(),o=this.cleanOutput(this.$element.get(0),i),o!==a&&this.$element.html(o));this.$element.find("[data-fr-idx]").removeAttr("data-fr-idx"),this.$element.find(".fr-wrap").each(function(){e(this).replaceWith(e(this).html())}),this.$element.find(".f-marker").html(""),n&&this.restoreSelectionByMarkers(),this.$element.find("span").attr("data-fr-verified",!0),this.no_verify=!1}}(jQuery),angular.module("froala",[]).value("froalaConfig",{}).directive("froala",["froalaConfig","$timeout",function(e){e=e||{};for(var t=["afterPaste","afterRemoveImage","afterSave","afterUploadPastedImage","align","backColor","badLink","beforeDeleteImage","beforeFileUpload","beforeImageUpload","beforePaste","beforeRemoveImage","beforeSave","blur","bold","cellDeleted","cellHorizontalSplit","cellInsertedAfter","cellInsertedBefore","cellVerticalSplit","cellsMerged","columnDeleted","columnInsertedAfter","columnInsertedBefore","contentChanged","fileError","fileUploaded","focus","fontFamily","fontSize","foreColor","formatBlock","htmlHide","htmlShow","imageAltSet","imageDeleteError","imageDeleteSuccess","imageError","imageFloatedLeft","imageFloatedNone","imageFloatedRight","imageInserted","imageLinkInserted","imageLinkRemoved","imageLoaded","imageReplaced","imagesLoadError","imagesLoaded","indent","initialized","italic","linkInserted","linkRemoved","onPaste","orderedListInserted","outdent","redo","rowDeleted","rowInsertedAbove","rowInsertedBelow","saveError","selectAll","strikeThrough","subscript","superscript","tableDeleted","tableInserted","underline","undo","unorderedListInserted","videoError","videoFloatedLeft","videoFloatedNone","videoFloatedRight","videoInserted","videoRemoved"],i=0,n=function(e){return e.search("froalaEvent")>=0?(e=e.replace("froalaEvent",""),e.charAt(0).toLowerCase()+e.slice(1)):!1},r=function(e){var t="froalaEvent"+e.charAt(0).toUpperCase()+e.slice(1);return t},a={froala:"="},o=0;o<t.length;o++)a[t[o]]="="+r(t[o]);return{restrict:"A",require:"ngModel",scope:a,link:function(r,a,o,s){if(!(a instanceof jQuery))throw"Froala requires jQuery, are you loading it before Angular?";var l,c=angular.extend({},e,r.froala);c.contentChangedCallback&&(l=c.contentChangedCallback,delete c.contentChangedCallback),o.id||o.$set("id","froala-"+i++);var d=function(){var e,t=a.editable("getHTML");if(angular.isArray(t)&&angular.isString(t[0]))e=t[0];else{if(!angular.isString(t))return void console.error("We received an unexpected format for the html");e=t}s.$setViewValue(e),r.$root.$$phase||r.$apply()};c.contentChangedCallback=function(){l&&l(),d()},s.$render=function(){a.editable("setHTML",s.$viewValue||"",!0)};var p=a.editable(c).data("fa.editable");p.$element.on("blur keyup change",function(){d()});var u=function(e,i){if(e&&i){var n,r;t.indexOf(e)>-1?(n=a,r="editable."+e):(n=p.$element,r=e),n.on(r,i)}};for(var h in o)if(o.hasOwnProperty(h)){var f=n(h);f&&u(f,r[f])}for(var h in c.events)c.events.hasOwnProperty(h)&&u(h,c.events[h]);r.froala&&(r.froala.froala=angular.bind(a,$(o.id).editable)),r.$watch("froala",function(e,t){for(var i in e)e.hasOwnProperty(i)&&e[i]!=t[i]&&a.editable("option",i,e[i])},!0),r.$on("$destroy",function(){p.destroy()})}}}]),function(e,t){"use strict";function i(){this.$get=["$$sanitizeUri",function(e){return function(t){var i=[];return a(t,d(i,function(t,i){return!/^unsafe/.test(e(t,i))})),i.join("")}}]}function n(e){var i=[],n=d(i,t.noop);return n.chars(e),i.join("")}function r(e){var t,i={},n=e.split(",");for(t=0;t<n.length;t++)i[n[t]]=!0;return i}function a(e,i){function n(e,n,a,s){if(n=t.lowercase(n),T[n])for(;c.last()&&S[c.last()];)r("",c.last());C[n]&&c.last()==n&&r("",n),s=$[n]||!!s,s||c.push(n);var l={};a.replace(f,function(e,t,i,n,r){var a=i||n||r||"";l[t]=o(a)}),i.start&&i.start(n,l,s)}function r(e,n){var r,a=0;if(n=t.lowercase(n))for(a=c.length-1;a>=0&&c[a]!=n;a--);if(a>=0){for(r=c.length-1;r>=a;r--)i.end&&i.end(c[r]);c.length=a}}var a,s,l,c=[],d=e;for(c.last=function(){return c[c.length-1]};e;){if(s=!0,c.last()&&_[c.last()])e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+c.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(b,"$1"),i.chars&&i.chars(o(t)),""}),r("",c.last());else if(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(i.comment&&i.comment(e.substring(4,a)),e=e.substring(a+3),s=!1)):y.test(e)?(l=e.match(y),l&&(e=e.replace(l[0],""),s=!1)):g.test(e)?(l=e.match(h),l&&(e=e.substring(l[0].length),l[0].replace(h,r),s=!1)):m.test(e)&&(l=e.match(u),l&&(e=e.substring(l[0].length),l[0].replace(u,n),s=!1)),s){a=e.indexOf("<");var w=0>a?e:e.substring(0,a);e=0>a?"":e.substring(a),i.chars&&i.chars(o(w))}if(e==d)throw p("badparse","The sanitizer was unable to parse the following block of html: {0}",e);d=e}r()}function o(e){if(!e)return"";var t=O.exec(e),i=t[1],n=t[3],r=t[2];return r&&(A.innerHTML=r.replace(/</g,"&lt;"),r="textContent"in A?A.textContent:A.innerText),i+r+n}function s(e){return e.replace(/&/g,"&amp;").replace(w,function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(i-56320)+65536)+";"}).replace(x,function(e){var t=e.charCodeAt(0);return 159>=t||173==t||t>=1536&&1540>=t||1807==t||6068==t||6069==t||t>=8204&&8207>=t||t>=8232&&8239>=t||t>=8288&&8303>=t||65279==t||t>=65520&&65535>=t?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e){var i="",n=e.split(";");return t.forEach(n,function(e){var n=e.split(":");if(2==n.length){var r=L(t.lowercase(n[0])),e=L(t.lowercase(n[1]));(("color"===r||"background-color"===r)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===r&&("left"===e||"right"===e||"center"===e||"justify"===e)||"float"===r&&("left"===e||"right"===e||"none"===e)||("width"===r||"height"===r)&&e.match(/[0-9\.]*(px|em|rem|%)/))&&(i+=r+": "+e+";")}}),i}function c(e,t,i,n){return"img"===e&&t["ta-insert-video"]&&("ta-insert-video"===i||"allowfullscreen"===i||"frameborder"===i||"contenteditble"===i&&"false"===n)?!0:!1}function d(e,i){var n=!1,r=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!n&&_[e]&&(n=e),n||I[e]!==!0||(r("<"),r(e),t.forEach(a,function(n,o){var d=t.lowercase(o),p="img"===e&&"src"===d||"background"===d;("style"===d&&""!==(n=l(n))||c(e,a,d,n)||D[d]===!0&&(M[d]!==!0||i(n,p)))&&(r(" "),r(o),r('="'),r(s(n)),r('"'))}),r(o?"/>":">"))},end:function(e){e=t.lowercase(e),n||I[e]!==!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(s(e))}}}var p=t.$$minErr("$sanitize"),u=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,h=/^<\s*\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,g=/^<\s*\//,v=/<!--(.*?)-->/g,y=/<!DOCTYPE([^>]*?)>/i,b=/<!\[CDATA\[(.*?)]]>/g,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~| |!])/g,$=r("area,br,col,hr,img,wbr"),k=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),E=r("rp,rt"),C=t.extend({},E,k),T=t.extend({},k,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),S=t.extend({},E,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),_=r("script,style"),I=t.extend({},$,T,S,C),M=r("background,cite,href,longdesc,src,usemap"),D=t.extend({},M,r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),A=document.createElement("pre"),O=/^(\s*)([\s\S]*?)(\s*)$/,L=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",i),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var i=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,r=/^mailto:/;return function(a,o){function s(e){e&&h.push(n(e))}function l(e,i){h.push("<a "),t.isDefined(o)&&(h.push('target="'),h.push(o),h.push('" ')),h.push('href="'),h.push(e),h.push('">'),s(i),h.push("</a>")}if(!a)return a;for(var c,d,p,u=a,h=[];c=u.match(i);)d=c[0],c[2]==c[3]&&(d="mailto:"+d),p=c.index,s(u.substr(0,p)),l(d,c[0].replace(r,"")),u=u.substring(p+c[0].length);return s(u),e(h.join(""))}}])}(window,window.angular);