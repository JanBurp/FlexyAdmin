# Data modelOm de database te benaderen in je code kun je natuurlijk gebruik maken van de standaard CodeIgniter classes zoals de QueryBuilder.FlexyAdmin heeft nog laag boven de QueryBuilder in de vorm van het model Data, hieronder een eenvoudig voorbeeld:    $this->data->table( 'tbl_menu' );    $query = $this->data->get();    En een iets uitgebreider voorbeeld:    $submenu = $this->data->table( 'tbl_menu' )                          ->select( array('str_title','txt_text') )                          ->where( 'self_parent', 3 )                          ->tree( 'uri' )                          ->get_result();## Voordelen - Koppelen van relaties met ->with()- Zoeken in relaties met ->where()- Array resultaat (ook de relaties) met ->get_result(), ->get_row() en ->get_field()- Caching van (array) resultaten met ->cache()- Alle Query Builder methods zijn bekend en werken zoals je gewend bent, veel hebben wel uitgebreidere mogelijkheden.- Resultaat als opties (klaar voor een dropdown form) met ->get_result_as_options()- Default waarden van een row met ->get_defaults()En nog veel meer...# Gebruik- Het data model is standaard altijd al geladen, dus je hoeft er niets voor te doen.- De methods die geen data teruggeven kun je koppelen aan elkaar:    $result = $this->data->table(...)->select(...)->where(...)->get_result();- Je start altijd met het aangeven van welke tabel je data opvraagd:    $this->data->table( $table );    - Daarna de methods voor de opbouw van de query, bijvoorbeeld:    $this->data->select( ... );    $this->data->where( ... );    $this->data->order_by_( ... );    - Aan het einde een method voor je resultaat, enkele voorbeelden:    $query = $this->data->get();    $result = $this->data->get_result();    - Eventueel nog een aanroep om informatie over het resultaat op te vragen:    $query_info = $this->data->get_query_info();    $insert_id  = $this->data->insert_id();    $last_sql   = $this->data->last_query();        # DocumentatieJe kunt alle mogelijkheden lezen in de interne documentatie (NIET AANPASSEN!):`sys/flexyadmin/models/data/Data_Core.php`    # InstellingenData analyseert bij aanvang de tabel en genereert daarmee een aantal instellingen zoals:- De relaties van de tabel- De velden en informatie daarover van de tabel- De meest logische standaard 'order_by' van de tabel- En nog meer## Caching van instellingenDeze instellingen kunnen worden gecached zodat daarna de analyse niet meer nodig is. Dat scheelt enorm veel tijd.Caching van instellingen kun je aan/uit zetten in `site/config/flexyadmin_config.php` met de waarde `$config['CACHE_DATA_SETTINGS']`.## Instellingen zelf aanpassenJe kunt de instellingen van een tabel ook zelf aanpassen:- Elke tabel kan een config bestand hebben in `site/config/data/...`- De naam is de naam van de tabel, bijvoorbeeld: `site/config/data/tbl_menu.php`- Je hoeft niet alle instellingen te geven, alleen de instellingen die je anders wilt dan standaard.### Documentatie van instellingenLees in `sys/flexyadmin/config/data/data.php` over alle mogelijke instellingen (NIET AANPASSEN!).In de map `site/config/data` staan er al een aantal voor de standaard tabellen. Deze kun je aanpassen naar wens of gebruiken als voorbeeld.## Config bestand automatisch aanmakenJe hoeft niet zelf een config bestand aan te maken. Je kunt het ook laten doen door FlexyAdmin:- Zorg dat je bent ingelogd in het CMS- Ga naar /_admin/plugin/db_data_create/...- Geef aan het einde van de url de naam je tabelEr gebeuren nu twee dingen:- In de map `site/config/data` komt een nieuw config bestand met de naam van jouw tabel.  Daarin staan alle standaard instellingen al vooringesteld. Je kunt deze aanpassen of verwijderen (behalve $config['table']).- In de map `site/models/data` komt een eigen DataModel bestand met de naam van jouw tabel. Lees hieronder (Eigen model) meer hierover. Deze kun je verwijderen als je hem niet gebruikt. # Eigen modelHet Data model heeft al erg veel standaard mogelijkheden. Maar er zijn natuurlijk altijd situaties denkbaar dat je meer wilt.Je kunt dan specifiek voor jouw tabel het Data model uitbreiden:- Maak automatisch een datamodel aan met de plugin `db_data_create`, zie hierboven.- Je hebt dan een kaal Model in de map `site/mnodels/data/`- Je kunt nu alle public & protected methods van Data overrulen.- Of zelf nieuwe methods toevoegen.NB Enkele models moeten niet extenden van Data_Core, maar van een Core van zichzelf:- tbl_menu - Core_tbl_menu- tbl_links - Core_tbl_links- res_assets - Core_res_assets- cfg_users - Core_cfg_users## VoorbeeldDit voorbeeld zorg ervoor dat array resultaten van de tabel `tbl_links` altijd goed links bevatten:      Class Tbl_links extends Data_Core {              public function __construct() {          parent::__construct();        }                /**         * Uitbreiding op get_result()         *          * Voorkomt niet bestaande of foutieve links in een array resultaat         *         * @param int $limit          * @param int $offset          * @return array         * @author Jan den Besten         */        public function get_result( $limit=0, $offset=0 ) {                    // Eigen aanpassingen aan de query          $this->where('url_url !=""');          $this->like('url_url','http','after');                    // Geef het resultaat terug door de standaard get_result() nu aan te roepen          return parent::get_result($limit,$offset);        }              }      