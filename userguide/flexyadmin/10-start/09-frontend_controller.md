# Frontend ControllerStandaard verwijzen delen van de url in CodeIgniter naar eigencontrollers. Dat is aan de frontend van FlexyAdmin niet zo. Daar is maar ééncontroller die zorgt dat afhankelijk van de uri de gevraagde pagina wordtgetoond. De frontend controller vind je hier: _site/Controller.php_.## Belangrijkste kenmerken van de controller- Alle uri's komen terecht bij de frontend controller. Behalve uri's beginnend met een `_`.- Er is standaard een variabele bekend, de array: `$this->site`.- Aan het eind van de controller wordt de hoofd view (_site/views/site.php_) geladen met `$this->site` als meegegeven array.- De controller heeft al een aantal method's die het leven veraangenamen. Bijvoorbeeld om de taal van je site te selecteren. Of om naar dieper gelegen pagina's te redirecten in geval van een lege pagina.- In de meeste gevallen hoef je zelf niets aan de controller te veranderen. Met een aantal instellingen in _site/config/config.php_ en eigen modules kun je praktisch alle aanpassingen doen die je zou willen (zie hieronder).## $this->siteDe array `$this->site` is standaard bekend in de controller. Aan het eind van de controller wordt deze variabele meegegeven aan de hoofdview.Wat zit er in `$this->site`:- Alle velden die in *tbl_site* staan- Verwijzingen naar assets mappen- Taalinstellingen- Diverse content gegenereerd door de controller (en eventueel door modules)Concreet ziet de array er standaard zo uit:    $this->site              = array(      ['title']                => 'Titel',                          // Titel van de site (= tbl_site.str_title)      ['author']               => 'Jan den Besten',                 // Auteur van de site (= tbl_site.str_author)      ['url']                  => 'http://www.flexyadmin.com',      // Url van de site (= tbl_site.url_url)      ['email']                => 'info@flexyadmin.com',            // Email van de site (= tbl_site.email_email) (Deze wordt standaard gebruikt bij de modules contact_form en comments)      ['description']          => '',                               // Description (= tbl_site.stx_description)      ['keywords']             => '',                               // Keywords (= tbl_site.stx_keywords)      ['str_google_analytics'] => '',                               // Wordt gebruikt voor Google Analytics. (= tbl_site.str_google_analytics)      ['assets']               => 'site/assets',                    // verwijzing naar de assets map      ['admin_assets']         => 'sys/flexyadmin/assets',          // verwijzing naar de flexyadmin assets map      ['languages']            => array('nl'),                      // array met mogelijke talen. Zoals ingesteld in _site/config/config.php_      ['language']             => 'nl',                             // door de controller ingestelde taal      ['uri']                  => '',                               // Uri van huidige pagina      ['menu']                 => '',                               // Bij aanvang leeg, wordt gevuld met het menu (HTML)      ['content']              => '',                               // Bij aanvang leeg. Wordt gevuld met alle HTML content      ['class']                => '',                               // Bij aanvang leeg. Wordt gebruikt om een class mee te geven aan de body tag      ['modules']              => array(),                          // Modules die de controller heeft geladen      ['break']                => FALSE                             // Als TRUE dan heeft een module aangegeven dat er verder geen content en modules mogen worden geladen en getoond    )Nogmaals: modules kunnen de inhoud van `$this->site` aanpassen. Zo maakt de module *submenu* een extra variabele `$this->site['submenu']` aan die in de hoofview gebruikt kan worden.# Configuratie van de controllerHet gedrag van de frontend controller kan door een aantal instellingen wordenaangepast. De instellingen vindt je in het bestand _site/config/config.php._Hieronder een overzicht.## CachingJe kunt het tonen van de pagina's aanzienlijk versnellen (en je server veelminder belasten!) door caching aan te zetten (TRUE). Caching in FlexyAdminmaakt gebruik van de standaard [output caching][1] van CodeIgniter met eenaantal [aanpassingen][4].Standaard staat caching uit (FALSE):    $config['caching'] = FALSE;Na een bepaalde tijd vervalt de gecachte pagina en zal opnieuw gerenderd worden bij de volgende aanvraag. Deze tijdkun je hier instellen in minuten (standaard 1440 wat 24 uur is).    $config['caching_time'] = 1440;De verschillen t.o.v. de standaard CodeIgniter caching:- Als `$_POST` of `$_GET` bestaan en inhoud bevatten dan wordt de pagina niet uit de cache geladen.  Op deze manier kunnen pagina's met formulieren blijven werken.- Als een gebruiker iets aanpast in FlexyAdmin zal de gehele cache leeg worden gemaakt.- Als een pagina door een bezoeker wordt aangepast (bijvoorbeeld bij het plaatsen van *comments*)  dan moet die pagina opnieuw worden gerenderd (en dus uit de cache worden verwijderd).  Gebruik daarvoor de functies van de [Cache_helper][4].  De module [Comments][5] doet dit bijvoorbeeld elke keer als een bezoeker een reactie heeft geplaatst.  Als dat niet zou gebeuren zou de reactie pas getoond worden als de cache na de standaard tijd wordt gerefreshed (standaard is dat dus een hele dag!)## TalenJe kunt je site [meertalig maken][6]. Dit vergt onder andere enkele instellingen voor de controller.Je moet alle talen die de site gebruikt instellen (standaard alleen 'nl'):    $config['languages'] = array('nl','en');De standaard taal. Hier begint de site mee als nog geen taal gekozen is:    $config['language'] = "nl";## Nieuwe variabelen toekennen aan $this->siteJe kunt zonder dat in de code van de controller te hoeven doen variabelentoevoegen en initialiseren (als een lege string) aan $this->site. Dit isbijvoorbeeld handig als je een module hebt gemaakt die een variabele aan$this->site toevoegd maar niet altijd wordt aangeroepen.Standaard is de array leeg, hieronder een voorbeeld:    $config['site_variables'] = array('prev','next','comments');## RedirectAls je een site hebt met pagina's in meerdere niveau's en je wilt dat bij eenlege pagina vanzelf naar de eerste pagina wordt gesprongen op een niveau lager(als die bestaat) zet deze optie dan aan (`TRUE`). Standaard staat de optie uit(`FALSE`).    $config['redirect'] = FALSE;## PaginationIn FlexyAdmin is de standaard CodeIgniter [Pagination class][2] is zo [uitgebreid][7] dater een aantal dingen geautomatiseerd worden. Als je site hier gebruik vanmaakt (bijvoorbeeld een blog of een agenda over meerdere pagina's) dan kun jedat de controller hiermee laten weten.    $config['auto_pagination'] = FALSE;## ModulesDe controller zorgt ook voor het [laden en aanroepen van Modules][3].## Homepage instellenAls de site wordt aangeroepen met een kale url (bijvoorbeeld*www.flexyadmin.com* en niet *www.flexyadmin.com/contact*) dan moet FlexyAdminweten welke pagina getoond moet worden. Dit is de homepage.Je kunt FlexyAdmin vertellen dat dat automatisch gebeurt (standaard). Dan zalde allereerste pagina in het menu worden gekozen.    $config['menu_autoset_home']=TRUE;    Als je dat niet automatisch wilt dan kun je met de hand de uri instellen voor de homepage:    $config['menu_autoset_home']=FALSE;    $config['menu_homepage_uri']='home';## HoofdviewAls de controller klaar is met alle inhoud verzamelen dan wordt de hoofdview van de site geladen (met `$this->site`als meegegeven data). Standaard heet deze hoofdview _site.php_.Als je om wat voor reden ook een andere view als hoofdview wilt of een andere naamgeving prefereert kun je dat hier instellen.    $config['main_view']='site';    ## PageviewDe controller laad voor elke pagina de page view met het huidige menu-item als meegegeven data. Uiteindelijk wordt dit een onderdeel wordt van de hele content.  Je kunt eventueel de pageview vervangen door een andere view:    $config['page_view']='page';           [1]: http://codeigniter.com/user_guide/general/caching.html   [2]: http://codeigniter.com/user_guide/libraries/pagination.html   [3]: {Modules-laden-en-aanroepen}      [4]: {cache_helper}      [5]: {Comments}      [6]: {Meertalige-site}      [7]: {MY_Pagination}      [8]: {Modules-maken}